var t={d:(r,e)=>{for(var o in e)t.o(e,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:e[o]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)},r={};t.d(r,{Z:()=>g});class e{identityMatrix(){return[1,0,0,0,1,0,0,0,1]}projectionMatrix(t,r){return[2/t,0,0,0,2/r,0,-1,-1,1]}translationMatrix(t,r){return[1,0,0,0,1,0,t,r,1]}rotationMatrix(t){const r=t/180*Math.PI,e=Math.sin(r),o=Math.cos(r);return[o,-e,0,e,o,0,0,0,1]}scaleMatrix(t,r){return[t,0,0,0,r,0,0,0,1]}arrayToMatrix(t,r){const e=[];for(let o=0;o<t.length;o+=r)e.push(t.slice(o,o+r));return e}multiplyMatrices(t,r){if(t.length===r.length&&[1,4,9,16].includes(t.length)){const e=Math.sqrt(t.length),o=this.arrayToMatrix(t,e),a=this.arrayToMatrix(r,e);return o.map(((t,r)=>a[0].map(((e,n)=>t.reduce(((t,e,i)=>t+o[r][i]*a[i][n]),0))))).flat(1)}}}function o(t,r,e){const o=function(t,r,e){const o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,e),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS))return o;console.log(t.getProgramInfoLog(o)),t.deleteProgram(o)}(t,i(t,t.VERTEX_SHADER,r),i(t,t.FRAGMENT_SHADER,e));return o}function a(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}function n(t){const r=new e,o=r.identityMatrix(),a=r.projectionMatrix(t.canvas.width,t.canvas.height),n=r.translationMatrix(0,0),i=r.rotationMatrix(0),s=r.scaleMatrix(1,1);let c=r.multiplyMatrices(o,a);return c=r.multiplyMatrices(c,n),c=r.multiplyMatrices(c,i),c=r.multiplyMatrices(c,s),c}function i(t,r,e){const o=t.createShader(r);if(t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;console.log(t.getShaderInfoLog(o)),t.deleteShader(o)}const s="attribute vec2 a_position;\r\nuniform mat3 u_matrix;\r\n\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n}",c="precision mediump float;\r\nuniform vec4 u_color;\r\n\r\nvoid main() {\r\n    gl_FragColor = u_color;\r\n}";class l{getTickInfo(t,r){const e=t/r,o=Math.pow(10,Math.floor(Math.log10(e))),a=e/o,n=(a<10?[1,1.5,2,3,5,7,10].find((t=>t>a)):10)*o;return{tickHeight:n,tickCount:Math.ceil(t/n)}}drawLines(t,r){const e=o(t,s,c),i=t.getAttribLocation(e,"a_position"),l=t.getUniformLocation(e,"u_color"),u=t.getUniformLocation(e,"u_matrix"),f=n(t),h=Math.max(...r.map(Math.abs)),m=this.getTickInfo(h,8),g=t.canvas.width,d=t.canvas.height,A=Math.floor(Math.min(g,d)/100),_=(d-2*A)/7,v=[],R=A,b=g-A;for(let t=1;t<=m.tickCount;t++){const r=t*_;v.push(R,r,b,r)}console.log(v);const p=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,p),t.bufferData(t.ARRAY_BUFFER,new Int16Array(v),t.STATIC_DRAW),a(t),t.useProgram(e),t.uniform4f(l,.7,.7,.7,1),t.uniformMatrix3fv(u,!1,f),t.useProgram(e),t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,p),t.vertexAttribPointer(i,2,t.SHORT,!1,0,0),t.drawArrays(t.LINES,0,v.length/2),m.tickCount*m.tickHeight}drawBars(t,r,e){const a=o(t,s,c),i=t.getAttribLocation(a,"a_position"),l=t.getUniformLocation(a,"u_color"),u=t.getUniformLocation(a,"u_matrix"),f=n(t),h=t.canvas.width,m=t.canvas.height,g=Math.floor(Math.min(h,m)/100),d=h-2*g,A=(m-2*g)/e,_=[],v=r.length,R=d/v;for(let t=0;t<v;t++){const e=g+r[t]*A,o=g+R*t+R/5,a=g+R*(t+1)-R/5;_.push(o,g,o,e,a,e),_.push(o,g,a,g,a,e)}const b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,new Float32Array(_),t.STATIC_DRAW),t.useProgram(a),t.uniformMatrix3fv(u,!1,f),t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,b);for(let r=0;r<v;r++)t.uniform4f(l,Math.random(),Math.random(),Math.random(),1),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,12*r*Float32Array.BYTES_PER_ELEMENT),t.drawArrays(t.TRIANGLES,0,12)}drawRect(t){const r=o(t,"attribute vec2 a_position;\r\nuniform vec4 u_color;\r\nuniform mat3 u_matrix;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n    v_color = u_color;\r\n}","precision mediump float;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}"),e=t.getAttribLocation(r,"a_position"),i=t.getUniformLocation(r,"u_color"),s=t.getUniformLocation(r,"u_matrix"),c=n(t),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Int16Array([0,0,0,50,50,50,0,0,50,0,50,50]),t.STATIC_DRAW),a(t),t.useProgram(r),t.uniformMatrix3fv(s,!1,c),t.enableVertexAttribArray(e),t.uniform4f(i,.5,.5,.5,1),t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(e,2,t.SHORT,!1,0,0),t.drawArrays(t.TRIANGLES,0,3),t.enableVertexAttribArray(e),t.uniform4f(i,.1,.5,.9,1),t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(e,2,t.SHORT,!1,0,6*Int16Array.BYTES_PER_ELEMENT),t.drawArrays(t.TRIANGLES,0,3)}drawF(t){const r=o(t,"attribute vec2 a_position;\r\nvarying vec4 v_color;\r\nuniform mat3 u_matrix;\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n    v_color = gl_Position;\r\n}","precision mediump float;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}");t.useProgram(r);const e=t.getAttribLocation(r,"a_position"),i=t.getUniformLocation(r,"u_matrix");a(t);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),this.setGeometry(t),t.enableVertexAttribArray(e);const c=t.FLOAT;t.vertexAttribPointer(e,2,c,!1,0,0);const l=n(t);t.uniformMatrix3fv(i,!1,l);const u=t.TRIANGLES;t.drawArrays(u,0,18)}setGeometry(t){t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,30,0,0,150,0,150,30,0,30,150,30,0,100,0,30,30,30,30,100,0,100,30,30,60,67,60,30,90,30,90,67,60,67,90]),t.STATIC_DRAW)}}const u=class{static sliceOrFill(t,r,e){if(t.length===r)return t;if(t.length>r)return t.slice(0,r);if(t.length<r)for(;t.length!==r;)t.push(null!=e?e:0);return t}static mergeRight(t,r){const e=Object.keys(r);Object.entries(t).forEach((t=>{const o=t[0];if(e.includes(o)){const e=t[1];r[o]=e}}))}};class f{constructor(t){let r=t;if("string"==typeof r&&(r=document.getElementById(r.replace("/^#/",""))),r instanceof HTMLCanvasElement)this.context=r.getContext("webgl");else{if(!(r instanceof WebGLRenderingContext))throw Error("Argument must be valid ID, HTMLCanvasElement or WebGLRenderingContext");this.context=r}this.chartOptions={title:"Untitled",showTitle:!0,showLegend:!1},this.seriesData=[]}setChartOptions(t){u.mergeRight(t,this.chartOptions)}setSerieOptions(t,r){r?r.forEach((r=>{const e=this.seriesData.find((t=>t.name==r));e?u.mergeRight(t,e.options):console.warn(`Serie with name ${r} not found.`)})):this.seriesData.forEach((r=>u.mergeRight(t,r.options)))}}class h extends f{constructor(t){super(t)}set X(t){this.dataLabels=t}set Y(t){const{length:r}=this.dataLabels;if(!r)throw Error('Values on "X" axis must be specified before setting "Y" values.');const e=t.map((t=>u.sliceOrFill(t,r)));this.seriesData=e.map(((t,r)=>this.getDefaultSerieObject(t,r)))}getDefaultSerieObject(t,r){return{values:t,name:`serie${r}`,options:{color:{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:255},showLabels:!1,showOnLegend:!1,edgeThickness:0}}}draw(){const t=new l,r=t.drawLines(this.context,this.seriesData[0].values);t.drawBars(this.context,this.seriesData[0].values,r)}}class m extends f{constructor(t){super(t)}set X(t){this.seriesData=t.map((t=>this.getDefaultSerieObject(t)))}set Y(t){const{length:r}=this.seriesData;if(!r)throw Error('Values on "X" axis must be specified before setting "Y" values.');const e=u.sliceOrFill(t,r);this.seriesData.map(((t,r)=>{t.value=e[r]}))}getDefaultSerieObject(t){return{value:0,name:t,options:{color:{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:255},showLabels:!1,showOnLegend:!1,edgeThickness:0}}}draw(){throw Error("Not implemented yet")}}function g(t,r){switch(t.toLowerCase().trim()){case"pie":return new m(r);case"bar":return new h(r);default:throw new Error(`${t} chart is not defined.`)}}var d=r.Z;export{d as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixTQUFTL0YsS0FBS3VJLFFBQVN2SSxLQUFLK0ksV0FBVyxHQUFHdUIsT0FBUTFMLElDMUN4RCxNQUFNb00sVUFBaUJoRCxFQUkxQkMsWUFBWTFGLEdBQ1JzSCxNQUFNdEgsR0FHQ3VILE1BQUVDLEdBQ1QvSixLQUFLK0ksV0FDRGdCLEVBQU83SixLQUFLK0ssR0FBVWpMLEtBQUtxSyxzQkFBc0JZLEtBRzlDaEIsTUFBRUssR0FDVCxNQUFNLE9BQUVoTCxHQUFXVSxLQUFLK0ksV0FDeEIsSUFBS3pKLEVBQ0QsTUFBTW9KLE1BQU0sbUVBQ2hCLE1BQU13QyxFQUFlaEMsRUFBV2lCLFlBQVlHLEVBQVFoTCxHQUNwRFUsS0FBSytJLFdBQVc3SSxLQUFJLENBQUNpTCxFQUFRZixLQUN6QmUsRUFBT3BELE1BQVFtRCxFQUFhZCxNQUk1QkMsc0JBQXNCWSxHQUMxQixNQUFPLENBQ0hsRCxNQUFPLEVBQ1AwQixLQUFNd0IsRUFDTmhDLFFBQVMsQ0FDTHNCLE1BQU8sQ0FDSEMsRUFBR2hNLEtBQUs2RSxNQUFzQixJQUFoQjdFLEtBQUtpSSxVQUNuQmdFLEVBQUdqTSxLQUFLNkUsTUFBc0IsSUFBaEI3RSxLQUFLaUksVUFDbkJpRSxFQUFHbE0sS0FBSzZFLE1BQXNCLElBQWhCN0UsS0FBS2lJLFVBQ25Ca0UsRUFBRyxLQUVQQyxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsY0FBZSxJQUtwQkMsT0FDSCxNQUFNckMsTUFBTSx3QkN6Q0wsU0FBUzBDLEVBQVc5SSxFQUFjQyxHQUM3QyxPQUFRRCxFQUFLK0ksY0FBY0MsUUFDdkIsSUFBSyxNQUNELE9BQU8sSUFBSU4sRUFBU3pJLEdBQ3hCLElBQUssTUFDRCxPQUFPLElBQUlxSCxFQUFTckgsR0FDeEIsUUFDSSxNQUFNLElBQUltRyxNQUFNLEdBQUdwRyw0QiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvcGxvdC1sb2dpYy9NYXRoVXRpbHMudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9wbG90LWxvZ2ljL1Bsb3RVdGlscy50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3NoYWRlcnMvdmVydGV4U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL2V4YW1wbGVMaW5lcy92ZXJ0ZXhTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3NoYWRlcnMvZXhhbXBsZUxpbmVzL2ZyYWdtZW50U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9wbG90LWxvZ2ljL0RyYXcudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL2V4YW1wbGVUd29SZWN0YW5nbGVzL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvc2hhZGVycy9leGFtcGxlVHdvUmVjdGFuZ2xlcy9mcmFnbWVudFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvc2hhZGVycy9mcmFnbWVudFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9DaGFydFV0aWxzLnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9DaGFydC50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvQmFyQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9jb21wb25lbnRzL1BpZUNoYXJ0LnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9DaGFydFNlcnZhbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRoVXRpbHMge1xyXG4gICAgaWRlbnRpdHlNYXRyaXgoKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIDEsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIDEsIDAsXHJcbiAgICAgICAgICAgIDAsIDAsIDEsXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIC8vIFJ5c293YW5pZSBvZCBkb2xuZWdvIGxld2VnbyByb2d1LlxyXG4gICAgLy8gQ2hjxIVjIHJ5c293YcSHIG9kIGfDs3JuZWdvIGxld2VnbyxcclxuICAgIC8vIHptaWVuacSHIG5hIC0yL2hlaWdodCBvcmF6ICsxXHJcbiAgICBwcm9qZWN0aW9uTWF0cml4KHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIDIgLyB3aWR0aCwgMCwgMCxcclxuICAgICAgICAgICAgMCwgMiAvIGhlaWdodCwgMCxcclxuICAgICAgICAgICAgLTEsIC0xLCAxXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIHRyYW5zbGF0aW9uTWF0cml4KHR4OiBudW1iZXIsIHR5OiBudW1iZXIpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgMSwgMCwgMCxcclxuICAgICAgICAgICAgMCwgMSwgMCxcclxuICAgICAgICAgICAgdHgsIHR5LCAxLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICByb3RhdGlvbk1hdHJpeChkZWdyZWVzOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgY29uc3QgcmFkaWFucyA9IGRlZ3JlZXMgLyAxODAgKiBNYXRoLlBJO1xyXG4gICAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihyYWRpYW5zKTtcclxuICAgICAgICBjb25zdCBjID0gTWF0aC5jb3MocmFkaWFucyk7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgYywgLXMsIDAsXHJcbiAgICAgICAgICAgIHMsIGMsIDAsXHJcbiAgICAgICAgICAgIDAsIDAsIDEsXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIHNjYWxlTWF0cml4KHN4OiBudW1iZXIsIHN5OiBudW1iZXIpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgc3gsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIHN5LCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcnJheVRvTWF0cml4KGFycjogbnVtYmVyW10sIHNpemU6IG51bWJlcik6IG51bWJlcltdW10ge1xyXG4gICAgICAgIGNvbnN0IHJlczogbnVtYmVyW11bXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSBzaXplKVxyXG4gICAgICAgICAgICByZXMucHVzaChhcnIuc2xpY2UoaSwgaSArIHNpemUpKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVzZSBtYXRoLmpzIGlmIG5lZWRlZCAtIGNvZGUgYnkgSmFuIFR1cm/FiFxyXG4gICAgbXVsdGlwbHlNYXRyaWNlcyhGOiBudW1iZXJbXSwgUzogbnVtYmVyW10pOiBudW1iZXJbXSB7XHJcbiAgICAgICAgaWYgKEYubGVuZ3RoID09PSBTLmxlbmd0aCAmJiBbMSwgNCwgOSwgMTZdLmluY2x1ZGVzKEYubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3cgPSBNYXRoLnNxcnQoRi5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjb25zdCBBID0gdGhpcy5hcnJheVRvTWF0cml4KEYsIHBvdyk7XHJcbiAgICAgICAgICAgIGNvbnN0IEIgPSB0aGlzLmFycmF5VG9NYXRyaXgoUywgcG93KTtcclxuICAgICAgICAgICAgcmV0dXJuIEEubWFwKChyb3csIGkpID0+XHJcbiAgICAgICAgICAgICAgICBCWzBdLm1hcCgoXywgaikgPT5cclxuICAgICAgICAgICAgICAgICAgICByb3cucmVkdWNlKChhY2MsIF8sIG4pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjYyArIEFbaV1bbl0gKiBCW25dW2pdLCAwXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApLmZsYXQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IE1hdGhVdGlscyBmcm9tICcuL01hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZzOiBzdHJpbmcsIGZzOiBzdHJpbmcpOiBXZWJHTFByb2dyYW0ge1xyXG4gICAgY29uc3QgdmVydGV4U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2cyk7XHJcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBmcyk7XHJcbiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICByZXR1cm4gcHJvZ3JhbTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVWaWV3KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbiAgICBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApO1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogbnVtYmVyW10ge1xyXG4gICAgY29uc3QgZHJhd1V0aWxzOiBNYXRoVXRpbHMgPSBuZXcgTWF0aFV0aWxzKCk7XHJcbiAgICBjb25zdCB0cmFuc2xhdGlvblggPSAwO1xyXG4gICAgY29uc3QgdHJhbnNsYXRpb25ZID0gMDtcclxuICAgIGNvbnN0IHJvdGF0aW9uSW5EZWdyZWVzID0gMDtcclxuICAgIGNvbnN0IHNjYWxlWCA9IDE7XHJcbiAgICBjb25zdCBzY2FsZVkgPSAxO1xyXG5cclxuICAgIGNvbnN0IGlkZW50aXR5TWF0cml4ID0gZHJhd1V0aWxzLmlkZW50aXR5TWF0cml4KCk7XHJcbiAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gZHJhd1V0aWxzLnByb2plY3Rpb25NYXRyaXgoZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uTWF0cml4ID0gZHJhd1V0aWxzLnRyYW5zbGF0aW9uTWF0cml4KHRyYW5zbGF0aW9uWCwgdHJhbnNsYXRpb25ZKTtcclxuICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gZHJhd1V0aWxzLnJvdGF0aW9uTWF0cml4KHJvdGF0aW9uSW5EZWdyZWVzKTtcclxuICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gZHJhd1V0aWxzLnNjYWxlTWF0cml4KHNjYWxlWCwgc2NhbGVZKTtcclxuXHJcbiAgICBsZXQgbWF0cml4ID0gZHJhd1V0aWxzLm11bHRpcGx5TWF0cmljZXMoaWRlbnRpdHlNYXRyaXgsIHByb2plY3Rpb25NYXRyaXgpO1xyXG4gICAgbWF0cml4ID0gZHJhd1V0aWxzLm11bHRpcGx5TWF0cmljZXMobWF0cml4LCB0cmFuc2xhdGlvbk1hdHJpeCk7XHJcbiAgICBtYXRyaXggPSBkcmF3VXRpbHMubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsIHJvdGF0aW9uTWF0cml4KTtcclxuICAgIG1hdHJpeCA9IGRyYXdVdGlscy5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgc2NhbGVNYXRyaXgpO1xyXG4gICAgcmV0dXJuIG1hdHJpeDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU2hhZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGU6IG51bWJlciwgc291cmNlOiBzdHJpbmcpOiBXZWJHTFNoYWRlciB7XHJcbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG5cclxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2VzcykgcmV0dXJuIHNoYWRlcjtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xyXG4gICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyKTogV2ViR0xQcm9ncmFtIHwgbnVsbCB7XHJcbiAgICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgY29uc3Qgc3VjY2VzcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xyXG4gICAgaWYgKHN1Y2Nlc3MpIHJldHVybiBwcm9ncmFtO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcclxuICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247XFxyXFxudmFyeWluZyB2ZWM0IHZfY29sb3I7XFxyXFxudW5pZm9ybSBtYXQzIHVfbWF0cml4O1xcclxcbnZvaWQgbWFpbigpIHtcXHJcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxKTtcXHJcXG4gICAgdl9jb2xvciA9IGdsX1Bvc2l0aW9uO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IFwiYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcXHJcXG51bmlmb3JtIG1hdDMgdV9tYXRyaXg7XFxyXFxuXFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHVfbWF0cml4ICogdmVjMyhhX3Bvc2l0aW9uLCAxKSkueHksIDAsIDEpO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxyXFxudW5pZm9ybSB2ZWM0IHVfY29sb3I7XFxyXFxuXFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9GcmFnQ29sb3IgPSB1X2NvbG9yO1xcclxcbn1cIiIsImltcG9ydCB7IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cywgZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgsIHByZXBhcmVWaWV3IH0gZnJvbSBcIi4vUGxvdFV0aWxzXCI7XHJcbmltcG9ydCB2ZXJ0ZXhTaGFkZXJTdHJpbmcgZnJvbSAnLi4vc2hhZGVycy92ZXJ0ZXhTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCBmcmFnbWVudFNoYWRlclN0cmluZyBmcm9tICcuLi9zaGFkZXJzL2ZyYWdtZW50U2hhZGVyLmdsc2wnO1xyXG5pbXBvcnQgZXhhbXBsZVR3b1JlY3RhbmdsZXNWU2hhZGVyU3RyaW5nIGZyb20gJy4uL3NoYWRlcnMvZXhhbXBsZVR3b1JlY3RhbmdsZXMvdmVydGV4U2hhZGVyLmdsc2wnO1xyXG5pbXBvcnQgZXhhbXBsZVR3b1JlY3RhbmdsZXNGU2hhZGVyU3RyaW5nIGZyb20gJy4uL3NoYWRlcnMvZXhhbXBsZVR3b1JlY3RhbmdsZXMvZnJhZ21lbnRTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCBleGFtcGxlTGluZXNWIGZyb20gJy4uL3NoYWRlcnMvZXhhbXBsZUxpbmVzL3ZlcnRleFNoYWRlci5nbHNsJztcclxuaW1wb3J0IGV4YW1wbGVMaW5lc0YgZnJvbSAnLi4vc2hhZGVycy9leGFtcGxlTGluZXMvZnJhZ21lbnRTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCB7IFRpY2tJbmZvIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhdyB7XHJcbiAgICAvLyBBbGdvcml0aG0gYnkgJ01hcmsgUmFuc29tJy4gUG9ydGVkIHRvIEpTIGFuZCBtb2RpZmllZCBieSBtZS5cclxuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM2MTY4MS9cclxuICAgIGdldFRpY2tJbmZvKGxhcmdlc3Q6IG51bWJlciwgbW9zdFRpY2tzOiBudW1iZXIpOiBUaWNrSW5mbyB7XHJcbiAgICAgICAgY29uc3QgbWluaW11bSA9IGxhcmdlc3QgLyBtb3N0VGlja3M7XHJcbiAgICAgICAgY29uc3QgbWFnbml0dWRlID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2cxMChtaW5pbXVtKSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc2lkdWFsID0gbWluaW11bSAvIG1hZ25pdHVkZTtcclxuICAgICAgICBjb25zdCB0YWJsZSA9IFsxLCAxLjUsIDIsIDMsIDUsIDcsIDEwXTtcclxuICAgICAgICBjb25zdCB0aWNrID0gcmVzaWR1YWwgPCAxMCA/IHRhYmxlLmZpbmQoKGUpID0+IChlID4gcmVzaWR1YWwpKSA6IDEwO1xyXG4gICAgICAgIGNvbnN0IHRpY2tIZWlnaHQgPSB0aWNrICogbWFnbml0dWRlO1xyXG4gICAgICAgIGNvbnN0IHRpY2tDb3VudCA9IE1hdGguY2VpbChsYXJnZXN0IC8gdGlja0hlaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIHsgdGlja0hlaWdodCwgdGlja0NvdW50IH07XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0xpbmVzKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHNlcmllczogbnVtYmVyW10pOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMoZ2wsIGV4YW1wbGVMaW5lc1YsIGV4YW1wbGVMaW5lc0YpO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQUxvYyA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICdhX3Bvc2l0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgY29sb3JVTG9jID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X2NvbG9yJyk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4VUxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9tYXRyaXgnKTtcclxuICAgICAgICBjb25zdCBtYXRyaXggPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLnNlcmllcy5tYXAoTWF0aC5hYnMpKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGlja0luZm8gPSB0aGlzLmdldFRpY2tJbmZvKG1heCwgOCk7XHJcbiAgICAgICAgY29uc3QgdyA9IGdsLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoID0gZ2wuY2FudmFzLmhlaWdodDtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5mbG9vcihNYXRoLm1pbih3LCBoKSAvIDEwMCk7XHJcbiAgICAgICAgY29uc3QgdW5kZXJMaW5lQXJlYUhlaWdodCA9IChoIC0gMiAqIHBhZGRpbmcpIC8gNztcclxuICAgICAgICBjb25zdCBsaW5lc1BvaW50cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFkZGluZztcclxuICAgICAgICBjb25zdCBlbmQgPSB3IC0gcGFkZGluZztcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aWNrSW5mby50aWNrQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSCA9IGkgKiB1bmRlckxpbmVBcmVhSGVpZ2h0O1xyXG4gICAgICAgICAgICBsaW5lc1BvaW50cy5wdXNoKHN0YXJ0LCBsaW5lSCwgZW5kLCBsaW5lSCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGxpbmVzUG9pbnRzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhQnVmZmVyKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEludDE2QXJyYXkobGluZXNQb2ludHMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgICAgIHByZXBhcmVWaWV3KGdsKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIGdsLnVuaWZvcm00Zihjb2xvclVMb2MsIDAuNywgMC43LCAwLjcsIDEpO1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobWF0cml4VUxvYywgZmFsc2UsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BTG9jKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkFMb2MsIDIsIGdsLlNIT1JULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5MSU5FUywgMCwgbGluZXNQb2ludHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aWNrSW5mby50aWNrQ291bnQgKiB0aWNrSW5mby50aWNrSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdCYXJzKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHNlcmllczogbnVtYmVyW10sIG1heDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cyhnbCwgZXhhbXBsZUxpbmVzViwgZXhhbXBsZUxpbmVzRik7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25BTG9jID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfcG9zaXRpb24nKTtcclxuICAgICAgICBjb25zdCBjb2xvclVMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfY29sb3InKTtcclxuICAgICAgICBjb25zdCBtYXRyaXhVTG9jID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X21hdHJpeCcpO1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IGdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsKTtcclxuXHJcbiAgICAgICAgY29uc3QgdyA9IGdsLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoID0gZ2wuY2FudmFzLmhlaWdodDtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5mbG9vcihNYXRoLm1pbih3LCBoKSAvIDEwMCk7IC8vbnAgNiAtIHd0ZWR5IEggPSA1ODguXHJcbiAgICAgICAgY29uc3QgSCA9IGggLSAyICogcGFkZGluZztcclxuICAgICAgICBjb25zdCBXID0gdyAtIDIgKiBwYWRkaW5nO1xyXG4gICAgICAgIGNvbnN0IG11bHRpcGllciA9IEggLyBtYXg7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbFBvaW50cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IENPTF9OVU1TID0gc2VyaWVzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBjb2xBcmVhV2lkdGggPSBXIC8gQ09MX05VTVM7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ09MX05VTVM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xIZWlnaHQgPSBwYWRkaW5nICsgc2VyaWVzW2ldICogbXVsdGlwaWVyO1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludExlZnRYID0gcGFkZGluZyArIChjb2xBcmVhV2lkdGggKiBpKSArIChjb2xBcmVhV2lkdGggLyA1KTtcclxuICAgICAgICAgICAgY29uc3QgcG9pbnRMZWZ0WSA9IHBhZGRpbmcgKyAoY29sQXJlYVdpZHRoICogKGkgKyAxKSkgLSAoY29sQXJlYVdpZHRoIC8gNSk7XHJcbiAgICAgICAgICAgIGNvbFBvaW50cy5wdXNoKHBvaW50TGVmdFgsIHBhZGRpbmcsIHBvaW50TGVmdFgsIGNvbEhlaWdodCwgcG9pbnRMZWZ0WSwgY29sSGVpZ2h0KTtcclxuICAgICAgICAgICAgY29sUG9pbnRzLnB1c2gocG9pbnRMZWZ0WCwgcGFkZGluZywgcG9pbnRMZWZ0WSwgcGFkZGluZywgcG9pbnRMZWZ0WSwgY29sSGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGFCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoY29sUG9pbnRzKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG5cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobWF0cml4VUxvYywgZmFsc2UsIG1hdHJpeCk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BTG9jKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDT0xfTlVNUzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm00Zihjb2xvclVMb2MsIE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCksIDEpO1xyXG4gICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uQUxvYywgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCBpICogMTIgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xyXG4gICAgICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgMTIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3UmVjdChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XHJcbiAgICAgICAgLy8gSU5JVFxyXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMoZ2wsIGV4YW1wbGVUd29SZWN0YW5nbGVzVlNoYWRlclN0cmluZywgZXhhbXBsZVR3b1JlY3RhbmdsZXNGU2hhZGVyU3RyaW5nKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICdhX3Bvc2l0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgY29sb3JVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfY29sb3InKTtcclxuICAgICAgICBjb25zdCBtYXRyaXhVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfbWF0cml4Jyk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4ID0gZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZ2wpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGRhdGFCdWZmZXIpO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgSW50MTZBcnJheShbMCwgMCwgMCwgNTAsIDUwLCA1MCwgMCwgMCwgNTAsIDAsIDUwLCA1MF0pLCBnbC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgICAgIC8vIFJFTkRFUlxyXG4gICAgICAgIHByZXBhcmVWaWV3KGdsKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobWF0cml4VW5pZm9ybUxvY2F0aW9uLCBmYWxzZSwgbWF0cml4KTtcclxuXHJcbiAgICAgICAgLy8gUkVOREVSIC0+IERSQVcgMVxyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24pO1xyXG4gICAgICAgIGdsLnVuaWZvcm00Zihjb2xvclVuaWZvcm1Mb2NhdGlvbiwgMC41LCAwLjUsIDAuNSwgMSk7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGRhdGFCdWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiwgMiwgZ2wuU0hPUlQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgMyk7XHJcblxyXG4gICAgICAgIC8vIFJFRE5FUiAtPiBEUkFXIDJcclxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uKTtcclxuICAgICAgICBnbC51bmlmb3JtNGYoY29sb3JVbmlmb3JtTG9jYXRpb24sIDAuMSwgMC41LCAwLjksIDEpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhQnVmZmVyKTtcclxuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24sIDIsIGdsLlNIT1JULCBmYWxzZSwgMCwgNiAqIEludDE2QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xyXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCAzKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3RihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cyhnbCwgdmVydGV4U2hhZGVyU3RyaW5nLCBmcmFnbWVudFNoYWRlclN0cmluZyk7XHJcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICdhX3Bvc2l0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4VW5pZm9ybUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X21hdHJpeCcpXHJcblxyXG4gICAgICAgIHByZXBhcmVWaWV3KGdsKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25CdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zaXRpb25CdWZmZXIpO1xyXG4gICAgICAgIHRoaXMuc2V0R2VvbWV0cnkoZ2wpO1xyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24pO1xyXG5cclxuICAgICAgICBjb25zdCBzaXplID0gMjsgICAgICAgICAgICAgLy8gMiBjb21wb25lbnRzIHBlciBpdGVyYXRpb25cclxuICAgICAgICBjb25zdCB0eXBlID0gZ2wuRkxPQVQ7ICAgICAgLy8gdHlwZSBvZiBjb21wb25lbnQgKDMyYml0IGZsb2F0KVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IGZhbHNlOyAgICAvLyBkb24ndCBub3JtYWxpemUgZGF0YVxyXG4gICAgICAgIGNvbnN0IHN0cmlkZSA9IDAgICAgICAgICAgICAvLyBtb3ZlIHNpemUgKiBzaXplb2YodHlwZSkgYml0cyB0byBnZXQgbmV4dCBwb3NpdGlvblxyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IDAgICAgICAgICAgICAvLyBzdGFydHMgYXQgdGhhdCBiaXRcclxuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24sIHNpemUsIHR5cGUsIG5vcm1hbGl6ZSwgc3RyaWRlLCBvZmZzZXQpO1xyXG5cclxuICAgICAgICBjb25zdCBtYXRyaXggPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbCk7XHJcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihtYXRyaXhVbmlmb3JtTG9jYXRpb24sIGZhbHNlLCBtYXRyaXgpO1xyXG5cclxuICAgICAgICBjb25zdCBwcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVTO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ID0gMTg7XHJcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhwcmltaXRpdmVUeXBlLCBvZmZzZXQsIGNvdW50KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzZXRHZW9tZXRyeShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShcclxuICAgICAgICAgICAgZ2wuQVJSQVlfQlVGRkVSLFxyXG4gICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KFtcclxuICAgICAgICAgICAgICAgIC8vIGxlZnQgY29sdW1uXHJcbiAgICAgICAgICAgICAgICAwLCAwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDAsXHJcbiAgICAgICAgICAgICAgICAwLCAxNTAsXHJcbiAgICAgICAgICAgICAgICAwLCAxNTAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMCxcclxuICAgICAgICAgICAgICAgIDMwLCAxNTAsXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdG9wIHJ1bmdcclxuICAgICAgICAgICAgICAgIDMwLCAwLFxyXG4gICAgICAgICAgICAgICAgMTAwLCAwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDMwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDMwLFxyXG4gICAgICAgICAgICAgICAgMTAwLCAwLFxyXG4gICAgICAgICAgICAgICAgMTAwLCAzMCxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBtaWRkbGUgcnVuZ1xyXG4gICAgICAgICAgICAgICAgMzAsIDYwLFxyXG4gICAgICAgICAgICAgICAgNjcsIDYwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDkwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDkwLFxyXG4gICAgICAgICAgICAgICAgNjcsIDYwLFxyXG4gICAgICAgICAgICAgICAgNjcsIDkwLFxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcclxcbnVuaWZvcm0gdmVjNCB1X2NvbG9yO1xcclxcbnVuaWZvcm0gbWF0MyB1X21hdHJpeDtcXHJcXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgodV9tYXRyaXggKiB2ZWMzKGFfcG9zaXRpb24sIDEpKS54eSwgMCwgMSk7XFxyXFxuICAgIHZfY29sb3IgPSB1X2NvbG9yO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxyXFxudmFyeWluZyB2ZWM0IHZfY29sb3I7XFxyXFxuXFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9GcmFnQ29sb3IgPSB2X2NvbG9yO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxyXFxudmFyeWluZyB2ZWM0IHZfY29sb3I7XFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9GcmFnQ29sb3IgPSB2X2NvbG9yO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIC8qKlxyXG4gICAgICogSWYgbmVlZGVkLCBzbGljZSAnYXJyYXknIHRvICdsZW4nIGl0ZW1zIG9yIGZpbGwgdG8gJ2xlbicgaXRlbXMgdXNpbmcgJ2ZpbGxXaXRoJy5cclxuICAgICAqIEBwYXJhbSBhcnJheSAtIGFycmF5IHRvIHNsaWNlIG9yIGZpbGwuXHJcbiAgICAgKiBAcGFyYW0gbGVuIC0gdGhlIHJlc3VsdGluZyBsZW5ndGggb2YgYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gZmlsbFdpdGggLSBudW1iZXIgd2l0aCB3aGljaCBhcnJheSBzaG91bGQgYmUgZmlsbGVkLlxyXG4gICAgICogQHJldHVybnMgc2xpY2VkIG9yIGZpbGxlZCBhcnJheS5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNsaWNlT3JGaWxsKGFycmF5OiBudW1iZXJbXSwgbGVuOiBudW1iZXIsIGZpbGxXaXRoPzogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IGxlbikgcmV0dXJuIGFycmF5O1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPiBsZW4pIHJldHVybiBhcnJheS5zbGljZSgwLCBsZW4pO1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPCBsZW4pXHJcbiAgICAgICAgICAgIHdoaWxlIChhcnJheS5sZW5ndGggIT09IGxlbilcclxuICAgICAgICAgICAgICAgIGFycmF5LnB1c2goZmlsbFdpdGggPz8gMCk7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWVyZ2UgcHJvcGVydGllcyBmcm9tICduZXdPcHRpb25zJyB0byAnYWN0dWFsT3B0aW9ucycgKHJpZ2h0LWpvaW4gbGlrZSkuXHJcbiAgICAgKiBAcGFyYW0gbmV3T3B0aW9ucyAtIHNvbWUgb3B0aW9uIHByb3BlcnRpZXMgZm9yIHR5cGUgVC5cclxuICAgICAqIEBwYXJhbSBhY3R1YWxPcHRpb25zIC0gYWxsIG9wdGlvbiBwcm9wZXJ0aWVzIGZvciB0eXBlIFQuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBtZXJnZVJpZ2h0PFQ+KG5ld09wdGlvbnM6IFBhcnRpYWw8VD4sIGFjdHVhbE9wdGlvbnM6IFQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYWN0dWFsT3B0aW9ucyk7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmV3T3B0aW9ucykuZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpclswXTtcclxuICAgICAgICAgICAgaWYgKGtleXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyWzFdO1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCBcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGFjdHVhbE9wdGlvbnNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTZXJpZURhdGFDb21tb24sIENoYXJ0T3B0aW9ucywgQ29udGV4dFNvdXJjZSwgU2VyaWVPcHRpb25zIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgQ2hhcnRVdGlscyBmcm9tIFwiLi9DaGFydFV0aWxzXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2hhcnQge1xyXG5cclxuICAgIGNvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIHNlcmllc0RhdGE6IFNlcmllRGF0YUNvbW1vbltdO1xyXG4gICAgY2hhcnRPcHRpb25zOiBDaGFydE9wdGlvbnM7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBDb250ZXh0U291cmNlKSB7XHJcbiAgICAgICAgbGV0IGFuYWx5emVkRWxlbWVudCA9IHNvdXJjZTtcclxuICAgICAgICBpZiAodHlwZW9mIGFuYWx5emVkRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgYW5hbHl6ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5hbHl6ZWRFbGVtZW50LnJlcGxhY2UoJy9eIy8nLCAnJykpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYW5hbHl6ZWRFbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gYW5hbHl6ZWRFbGVtZW50LmdldENvbnRleHQoJ3dlYmdsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFuYWx5emVkRWxlbWVudCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBhbmFseXplZEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhyb3cgRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgdmFsaWQgSUQsIEhUTUxDYW52YXNFbGVtZW50IG9yIFdlYkdMUmVuZGVyaW5nQ29udGV4dCcpO1xyXG5cclxuICAgICAgICB0aGlzLmNoYXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdGl0bGU6ICdVbnRpdGxlZCcsXHJcbiAgICAgICAgICAgIHNob3dUaXRsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2hvd0xlZ2VuZDogZmFsc2UsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNlcmllc0RhdGEgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q2hhcnRPcHRpb25zKG9wdGlvbnM6IFBhcnRpYWw8Q2hhcnRPcHRpb25zPik6IHZvaWQge1xyXG4gICAgICAgIENoYXJ0VXRpbHMubWVyZ2VSaWdodChvcHRpb25zLCB0aGlzLmNoYXJ0T3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFNlcmllT3B0aW9ucyhuZXdPcHRpb25zOiBQYXJ0aWFsPFNlcmllT3B0aW9ucz4sIHdoaWNoU2VyaWVzPzogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgICAgICBpZiAod2hpY2hTZXJpZXMpIHdoaWNoU2VyaWVzLmZvckVhY2goKHNlcmllTmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3R1YWxTZXJpZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmllc0RhdGEuZmluZCgoZXhpc3RpbmdTZXJpZSkgPT4gZXhpc3RpbmdTZXJpZS5uYW1lID09IHNlcmllTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChhY3R1YWxTZXJpZSkge1xyXG4gICAgICAgICAgICAgICAgQ2hhcnRVdGlscy5tZXJnZVJpZ2h0KG5ld09wdGlvbnMsIGFjdHVhbFNlcmllLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBTZXJpZSB3aXRoIG5hbWUgJHtzZXJpZU5hbWV9IG5vdCBmb3VuZC5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zZXJpZXNEYXRhLmZvckVhY2goKHNlcmllKSA9PiBDaGFydFV0aWxzLm1lcmdlUmlnaHQobmV3T3B0aW9ucywgc2VyaWUub3B0aW9ucykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXQgWCh2YWx1ZTogc3RyaW5nW10gfCBudW1iZXJbXSB8IG51bWJlcltdW10pO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCBZKHZhbHVlOiBudW1iZXJbXSB8IG51bWJlcltdW10pO1xyXG4gICAgcHVibGljIGFic3RyYWN0IGRyYXcoKTogdm9pZDtcclxufSIsImltcG9ydCB7IE11bHRpU2VyaWVEYXRhLCBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgRHJhdyBmcm9tIFwiLi4vcGxvdC1sb2dpYy9EcmF3XCI7XHJcbmltcG9ydCB7IENoYXJ0IH0gZnJvbSBcIi4vQ2hhcnRcIjtcclxuaW1wb3J0IENoYXJ0VXRpbHMgZnJvbSBcIi4vQ2hhcnRVdGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhckNoYXJ0IGV4dGVuZHMgQ2hhcnQge1xyXG4gICAgZGF0YUxhYmVsczogc3RyaW5nW107XHJcbiAgICBzZXJpZXNEYXRhOiBNdWx0aVNlcmllRGF0YVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogQ29udGV4dFNvdXJjZSkge1xyXG4gICAgICAgIHN1cGVyKHNvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBYKGxhYmVsczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLmRhdGFMYWJlbHMgPSBsYWJlbHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBZKHNlcmllczogbnVtYmVyW11bXSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzLmRhdGFMYWJlbHM7XHJcbiAgICAgICAgaWYgKCFsZW5ndGgpXHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWYWx1ZXMgb24gXCJYXCIgYXhpcyBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgc2V0dGluZyBcIllcIiB2YWx1ZXMuJyk7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkU2VyaWVzID0gc2VyaWVzLm1hcChzZXJpZSA9PiBDaGFydFV0aWxzLnNsaWNlT3JGaWxsKHNlcmllLCBsZW5ndGgpKTtcclxuICAgICAgICB0aGlzLnNlcmllc0RhdGEgPSBtYXBwZWRTZXJpZXMubWFwKChzZXJpZSwgaW5kZXgpID0+IHRoaXMuZ2V0RGVmYXVsdFNlcmllT2JqZWN0KHNlcmllLCBpbmRleCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdFNlcmllT2JqZWN0KHNlcmllOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlcik6IE11bHRpU2VyaWVEYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWx1ZXM6IHNlcmllLFxyXG4gICAgICAgICAgICBuYW1lOiBgc2VyaWUke2luZGV4fWAsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgICAgICBnOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSksXHJcbiAgICAgICAgICAgICAgICAgICAgYTogMjU1XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2hvd0xhYmVsczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzaG93T25MZWdlbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWRnZVRoaWNrbmVzczogMCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZHJhdyA9IG5ldyBEcmF3KCk7XHJcbiAgICAgICAgY29uc3QgYyA9IGRyYXcuZHJhd0xpbmVzKHRoaXMuY29udGV4dCwgdGhpcy5zZXJpZXNEYXRhWzBdLnZhbHVlcyk7XHJcbiAgICAgICAgZHJhdy5kcmF3QmFycyh0aGlzLmNvbnRleHQsIHRoaXMuc2VyaWVzRGF0YVswXS52YWx1ZXMsIGMpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU2luZ2xlU2VyaWVEYXRhLCBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBDaGFydCB9IGZyb20gXCIuL0NoYXJ0XCI7XHJcbmltcG9ydCBDaGFydFV0aWxzIGZyb20gXCIuL0NoYXJ0VXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQaWVDaGFydCBleHRlbmRzIENoYXJ0IHtcclxuXHJcbiAgICBzZXJpZXNEYXRhOiBTaW5nbGVTZXJpZURhdGFbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IENvbnRleHRTb3VyY2UpIHtcclxuICAgICAgICBzdXBlcihzb3VyY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWChsYWJlbHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5zZXJpZXNEYXRhID1cclxuICAgICAgICAgICAgbGFiZWxzLm1hcCgobGFiZWwpID0+IHRoaXMuZ2V0RGVmYXVsdFNlcmllT2JqZWN0KGxhYmVsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBZKHZhbHVlczogbnVtYmVyW10pIHtcclxuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5zZXJpZXNEYXRhO1xyXG4gICAgICAgIGlmICghbGVuZ3RoKVxyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignVmFsdWVzIG9uIFwiWFwiIGF4aXMgbXVzdCBiZSBzcGVjaWZpZWQgYmVmb3JlIHNldHRpbmcgXCJZXCIgdmFsdWVzLicpO1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFZhbHVlcyA9IENoYXJ0VXRpbHMuc2xpY2VPckZpbGwodmFsdWVzLCBsZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuc2VyaWVzRGF0YS5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gbWFwcGVkVmFsdWVzW2luZGV4XTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRTZXJpZU9iamVjdChsYWJlbDogc3RyaW5nKTogU2luZ2xlU2VyaWVEYXRhIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgbmFtZTogbGFiZWwsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgICAgICBnOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSksXHJcbiAgICAgICAgICAgICAgICAgICAgYTogMjU1XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2hvd0xhYmVsczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzaG93T25MZWdlbmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWRnZVRoaWNrbmVzczogMCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udGV4dFNvdXJjZSB9IGZyb20gXCIuLi9tb2RlbHNcIjtcclxuaW1wb3J0IHsgQmFyQ2hhcnQgfSBmcm9tIFwiLi9CYXJDaGFydFwiO1xyXG5pbXBvcnQgeyBDaGFydCB9IGZyb20gXCIuL0NoYXJ0XCI7XHJcbmltcG9ydCB7IFBpZUNoYXJ0IH0gZnJvbSBcIi4vUGllQ2hhcnRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNlcnZlQ2hhcnQodHlwZTogc3RyaW5nLCBzb3VyY2U6IENvbnRleHRTb3VyY2UpOiBDaGFydCB7XHJcbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKS50cmltKCkpIHtcclxuICAgICAgICBjYXNlIFwicGllXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGllQ2hhcnQoc291cmNlKTtcclxuICAgICAgICBjYXNlIFwiYmFyXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmFyQ2hhcnQoc291cmNlKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dHlwZX0gY2hhcnQgaXMgbm90IGRlZmluZWQuYCk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJNYXRoVXRpbHMiLCJpZGVudGl0eU1hdHJpeCIsInByb2plY3Rpb25NYXRyaXgiLCJ3aWR0aCIsImhlaWdodCIsInRyYW5zbGF0aW9uTWF0cml4IiwidHgiLCJ0eSIsInJvdGF0aW9uTWF0cml4IiwiZGVncmVlcyIsInJhZGlhbnMiLCJNYXRoIiwiUEkiLCJzIiwic2luIiwiYyIsImNvcyIsInNjYWxlTWF0cml4Iiwic3giLCJzeSIsImFycmF5VG9NYXRyaXgiLCJhcnIiLCJzaXplIiwicmVzIiwiaSIsImxlbmd0aCIsInB1c2giLCJzbGljZSIsIm11bHRpcGx5TWF0cmljZXMiLCJGIiwiUyIsImluY2x1ZGVzIiwicG93Iiwic3FydCIsIkEiLCJ0aGlzIiwiQiIsIm1hcCIsInJvdyIsIl8iLCJqIiwicmVkdWNlIiwiYWNjIiwibiIsImZsYXQiLCJjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMiLCJnbCIsInZzIiwiZnMiLCJwcm9ncmFtIiwidmVydGV4U2hhZGVyIiwiZnJhZ21lbnRTaGFkZXIiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJkZWxldGVQcm9ncmFtIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInByZXBhcmVWaWV3Iiwidmlld3BvcnQiLCJjYW52YXMiLCJjbGVhckNvbG9yIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwiZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgiLCJkcmF3VXRpbHMiLCJtYXRyaXgiLCJ0eXBlIiwic291cmNlIiwic2hhZGVyIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsIkRyYXciLCJnZXRUaWNrSW5mbyIsImxhcmdlc3QiLCJtb3N0VGlja3MiLCJtaW5pbXVtIiwibWFnbml0dWRlIiwiZmxvb3IiLCJsb2cxMCIsInJlc2lkdWFsIiwidGlja0hlaWdodCIsImZpbmQiLCJlIiwidGlja0NvdW50IiwiY2VpbCIsImRyYXdMaW5lcyIsInNlcmllcyIsInBvc2l0aW9uQUxvYyIsImdldEF0dHJpYkxvY2F0aW9uIiwiY29sb3JVTG9jIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwibWF0cml4VUxvYyIsIm1heCIsImFicyIsInRpY2tJbmZvIiwidyIsImgiLCJwYWRkaW5nIiwibWluIiwidW5kZXJMaW5lQXJlYUhlaWdodCIsImxpbmVzUG9pbnRzIiwic3RhcnQiLCJlbmQiLCJsaW5lSCIsImRhdGFCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkludDE2QXJyYXkiLCJTVEFUSUNfRFJBVyIsInVzZVByb2dyYW0iLCJ1bmlmb3JtNGYiLCJ1bmlmb3JtTWF0cml4M2Z2IiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiU0hPUlQiLCJkcmF3QXJyYXlzIiwiTElORVMiLCJkcmF3QmFycyIsIlciLCJtdWx0aXBpZXIiLCJjb2xQb2ludHMiLCJDT0xfTlVNUyIsImNvbEFyZWFXaWR0aCIsImNvbEhlaWdodCIsInBvaW50TGVmdFgiLCJwb2ludExlZnRZIiwiRmxvYXQzMkFycmF5IiwicmFuZG9tIiwiRkxPQVQiLCJCWVRFU19QRVJfRUxFTUVOVCIsIlRSSUFOR0xFUyIsImRyYXdSZWN0IiwicG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiIsImNvbG9yVW5pZm9ybUxvY2F0aW9uIiwibWF0cml4VW5pZm9ybUxvY2F0aW9uIiwiZHJhd0YiLCJwb3NpdGlvbkJ1ZmZlciIsInNldEdlb21ldHJ5IiwicHJpbWl0aXZlVHlwZSIsInN0YXRpYyIsImFycmF5IiwibGVuIiwiZmlsbFdpdGgiLCJuZXdPcHRpb25zIiwiYWN0dWFsT3B0aW9ucyIsImtleXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInBhaXIiLCJ2YWx1ZSIsIkNoYXJ0IiwiY29uc3RydWN0b3IiLCJhbmFseXplZEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVwbGFjZSIsIkhUTUxDYW52YXNFbGVtZW50IiwiY29udGV4dCIsImdldENvbnRleHQiLCJXZWJHTFJlbmRlcmluZ0NvbnRleHQiLCJFcnJvciIsImNoYXJ0T3B0aW9ucyIsInRpdGxlIiwic2hvd1RpdGxlIiwic2hvd0xlZ2VuZCIsInNlcmllc0RhdGEiLCJzZXRDaGFydE9wdGlvbnMiLCJvcHRpb25zIiwiQ2hhcnRVdGlscyIsIm1lcmdlUmlnaHQiLCJzZXRTZXJpZU9wdGlvbnMiLCJ3aGljaFNlcmllcyIsInNlcmllTmFtZSIsImFjdHVhbFNlcmllIiwiZXhpc3RpbmdTZXJpZSIsIm5hbWUiLCJ3YXJuIiwic2VyaWUiLCJCYXJDaGFydCIsInN1cGVyIiwiWCIsImxhYmVscyIsImRhdGFMYWJlbHMiLCJZIiwibWFwcGVkU2VyaWVzIiwic2xpY2VPckZpbGwiLCJpbmRleCIsImdldERlZmF1bHRTZXJpZU9iamVjdCIsInZhbHVlcyIsImNvbG9yIiwiciIsImciLCJiIiwiYSIsInNob3dMYWJlbHMiLCJzaG93T25MZWdlbmQiLCJlZGdlVGhpY2tuZXNzIiwiZHJhdyIsIlBpZUNoYXJ0IiwibGFiZWwiLCJtYXBwZWRWYWx1ZXMiLCJvcHRpb24iLCJzZXJ2ZUNoYXJ0IiwidG9Mb3dlckNhc2UiLCJ0cmltIl0sInNvdXJjZVJvb3QiOiIifQ==