var t={d:(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)},r={};t.d(r,{Z:()=>w});const e="attribute vec2 a_position;\r\nuniform mat3 u_matrix;\r\n\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n}",a="precision mediump float;\r\nuniform vec4 u_color;\r\n\r\nvoid main() {\r\n    gl_FragColor = u_color;\r\n}";function n(t,r,e){const a=function(t,r,e){const a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,e),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;const n=t.getProgramInfoLog(a);throw t.deleteProgram(a),Error(n)}(t,o(t,t.VERTEX_SHADER,r),o(t,t.FRAGMENT_SHADER,e));return a}function o(t,r,e){const a=t.createShader(r);if(t.shaderSource(a,e),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))return a;const n=t.getShaderInfoLog(a);throw t.deleteShader(a),Error(n)}function i(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}function s(t){return t.startsWith("gl_")||t.startsWith("webgl_")}function c(t,r,e){switch(r){case t.FLOAT:return r=>t.uniform1fv(e,r);case t.FLOAT_VEC2:return r=>t.uniform2fv(e,r);case t.FLOAT_VEC3:return r=>t.uniform3fv(e,r);case t.FLOAT_VEC4:return r=>t.uniform4fv(e,r);case t.INT:return r=>t.uniform1iv(e,r);case t.INT_VEC2:return r=>t.uniform2iv(e,r);case t.INT_VEC3:return r=>t.uniform3iv(e,r);case t.INT_VEC4:return r=>t.uniform4iv(e,r);case t.FLOAT_MAT2:return r=>t.uniformMatrix2fv(e,!1,r);case t.FLOAT_MAT3:return r=>t.uniformMatrix3fv(e,!1,r);case t.FLOAT_MAT4:return r=>t.uniformMatrix4fv(e,!1,r);default:throw Error(`Type 0x${r} is invalid.`)}}function h(t,r){const e=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),a={};for(let n=0;n<e;n++){const e=t.getActiveUniform(r,n),{name:o}=e;if(!s(o)){const n=t.getUniformLocation(r,o);if(null!=n){const r=c(t,e.type,n);a[o.endsWith("[0]")?o.substr(0,o.length-3):o]=r}}}return a}function l(t,r){for(const e in r)t[e](r[e])}function u(t,r,e){const a={};for(const n in e){const o=t.getAttribLocation(r,n),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e[n],t.STATIC_DRAW),a[n]={buffer:i,byteLength:e[n].byteLength,location:o}}return a}class f{identityMatrix(){return[1,0,0,0,1,0,0,0,1]}projectionMatrix(t,r){return[2/t,0,0,0,2/r,0,-1,-1,1]}translationMatrix(t,r){return[1,0,0,0,1,0,t,r,1]}rotationMatrix(t){const r=t/180*Math.PI,e=Math.sin(r),a=Math.cos(r);return[a,-e,0,e,a,0,0,0,1]}scaleMatrix(t,r){return[t,0,0,0,r,0,0,0,1]}arrayToMatrix(t,r){const e=[];for(let a=0;a<t.length;a+=r)e.push(t.slice(a,a+r));return e}multiplyMatrices(t,r){if(t.length===r.length&&[1,4,9,16].includes(t.length)){const e=Math.sqrt(t.length),a=this.arrayToMatrix(t,e),n=this.arrayToMatrix(r,e);return a.map(((t,r)=>n[0].map(((e,o)=>t.reduce(((t,e,i)=>t+a[r][i]*n[i][o]),0))))).flat(1)}}getTransformationMatrix(t){const r=this.identityMatrix(),e=this.projectionMatrix(t.canvas.width,t.canvas.height),a=this.translationMatrix(0,0),n=this.rotationMatrix(0),o=this.scaleMatrix(1,1);let i=this.multiplyMatrices(r,e);return i=this.multiplyMatrices(i,a),i=this.multiplyMatrices(i,n),i=this.multiplyMatrices(i,o),i}}class m{constructor(t){this.gl=t}getContentFrame(t,r){const e=Math.floor(Math.min(t,r)/100);return{x:e,y:e,w:t-2*e,h:r-2*e}}drawTitle(t,r){const{canvas:e}=this.gl,a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);const n=Math.floor(r.h/10),o={x:r.x,y:r.y+r.h-n,h:n,w:r.w};a.fillText(t,o.x,o.y,o.w)}drawPie(t,r){const{gl:o}=this,{canvas:s}=o,c=this.getContentFrame(o.canvas.width,o.canvas.height);r.showTitle&&r.title&&this.drawTitle(r.title,c);const m=t.map((t=>t.value)).reduce(((t,r)=>t+r),0),g=t.map((t=>Math.round(360*t.value/m))),d=s.width/2,M=s.height/2,p=new f,w=n(o,e,a);o.useProgram(w);const _=h(o,w);l(_,{u_matrix:p.getTransformationMatrix(o)}),i(o),o.useProgram(w);let x=0;g.forEach(((r,e)=>{const a=t[e].options.color;l(_,{u_color:[a.r/255,a.g/255,a.b/255,a.a/255]});const n=[];n.push(d,M);const i=x;x+=r;for(let t=i;t<=x;t+=1){const r=t*Math.PI/180;n.push(d+Math.sin(r)*Math.floor(d/2)),n.push(M+Math.cos(r)*Math.floor(d/2))}const s={a_position:new Float32Array(n)},c=u(o,w,s);o.enableVertexAttribArray(c.a_position.location),o.bindBuffer(o.ARRAY_BUFFER,c.a_position.buffer),o.vertexAttribPointer(c.a_position.location,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLE_FAN,0,n.length/2)}))}drawLines(t){const{gl:r}=this,o=Math.max(...t.map(Math.abs)),s=this.getTickInfo(o,8),c=r.canvas.width,m=r.canvas.height,g=Math.floor(Math.min(c,m)/100),d=(m-2*g)/7,M=[],p=g,w=c-g;for(let t=1;t<=s.tickCount;t++){const r=t*d;M.push(p,r,w,r)}const _={u_color:[.7,.7,.7,1],u_matrix:(new f).getTransformationMatrix(r)},x={a_position:new Int16Array(M)},A=n(r,e,a);r.useProgram(A),l(h(r,A),_);const b=u(r,A,x);i(r),r.useProgram(A),r.enableVertexAttribArray(b.a_position.location),r.bindBuffer(r.ARRAY_BUFFER,b.a_position.buffer),r.vertexAttribPointer(b.a_position.location,2,r.SHORT,!1,0,0),r.drawArrays(r.LINES,0,M.length/2)}drawBars(t){const{gl:r}=this,o=r.canvas.width,i=r.canvas.height,s=Math.floor(Math.min(o,i)/100),c=o-2*s,m=(i-2*s)/Math.max(...t),g=[],d=t.length,M=c/d;for(let r=0;r<d;r++){const e=s+t[r]*m,a=s+M*r+M/5,n=s+M*(r+1)-M/5;g.push(a,s,a,e,n,e),g.push(a,s,n,s,n,e)}const p=n(r,e,a);r.useProgram(p);const w=h(r,p),_=u(r,p,{a_position:new Float32Array(g)});l(w,{u_matrix:(new f).getTransformationMatrix(r)}),r.enableVertexAttribArray(_.a_position.location),r.bindBuffer(r.ARRAY_BUFFER,_.a_position.buffer);for(let t=0;t<d;t++)l(w,{u_color:[Math.random(),Math.random(),Math.random(),1]}),r.vertexAttribPointer(_.a_position.location,2,r.FLOAT,!1,0,12*t*Float32Array.BYTES_PER_ELEMENT),r.drawArrays(r.TRIANGLES,0,12)}getTickInfo(t,r){const e=t/r,a=Math.pow(10,Math.floor(Math.log10(e))),n=e/a,o=(n<10?[1,1.5,2,3,5,7,10].find((t=>t>n)):10)*a;return{tickHeight:o,tickCount:Math.ceil(t/o)}}}const g=class{static sliceOrFill(t,r,e){if(t.length===r)return t;if(t.length>r)return t.slice(0,r);if(t.length<r)for(;t.length!==r;)t.push(null!=e?e:0);return t}static mergeRight(t,r){const e=Object.keys(r);Object.entries(t).forEach((t=>{const a=t[0];if(e.includes(a)){const e=t[1];r[a]=e}}))}};class d{constructor(t){let r=t;if("string"==typeof r&&(r=document.getElementById(r.replace("/^#/",""))),r instanceof HTMLCanvasElement)this.context=r.getContext("webgl");else{if(!(r instanceof WebGLRenderingContext))throw Error("Argument must be valid ID, HTMLCanvasElement or WebGLRenderingContext");this.context=r}this.chartOptions={title:"Untitled",showTitle:!0,showLegend:!1},this.seriesData=[],this.chartDraftsman=new m(this.context)}setChartOptions(t){g.mergeRight(t,this.chartOptions)}setSerieOptions(t,r){r?r.forEach((r=>{const e=this.seriesData.find((t=>t.name==r));e?g.mergeRight(t,e.options):console.warn(`Serie with name ${r} not found.`)})):this.seriesData.forEach((r=>g.mergeRight(t,r.options)))}}class M extends d{constructor(t){super(t)}set X(t){this.dataLabels=t}set Y(t){const{length:r}=this.dataLabels;if(!r)throw Error('Values on "X" axis must be specified before setting "Y" values.');const e=t.map((t=>g.sliceOrFill(t,r)));this.seriesData=e.map(((t,r)=>this.getDefaultSerieObject(t,r)))}getDefaultSerieObject(t,r){return{values:t,name:`serie${r}`,options:{color:{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:255},showLabels:!1,showOnLegend:!1,edgeThickness:0}}}draw(){this.chartDraftsman.drawLines(this.seriesData[0].values),this.chartDraftsman.drawBars(this.seriesData[0].values)}}class p extends d{constructor(t){super(t)}set X(t){this.seriesData=t.map((t=>this.getDefaultSerieObject(t)))}set Y(t){const{length:r}=this.seriesData;if(!r)throw Error('Values on "X" axis must be specified before setting "Y" values.');const e=g.sliceOrFill(t,r);this.seriesData.map(((t,r)=>{t.value=e[r]}))}getDefaultSerieObject(t){return{value:0,name:t,options:{color:{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:255},showLabels:!1,showOnLegend:!1,edgeThickness:0}}}draw(){this.chartDraftsman.drawPie(this.seriesData,this.chartOptions)}}function w(t,r){switch(t.toLowerCase().trim()){case"pie":return new p(r);case"bar":return new M(r);default:throw new Error(`${t} chart is not defined.`)}}var _=r.Z;export{_ as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUdxQixTQ3hDakQsTUFBTUssVUFBaUJuQyxFQUkxQmpHLFlBQVluSCxHQUNSME8sTUFBTTFPLEdBR0MyTyxNQUFFQyxHQUNUdEksS0FBS3VILFdBQ0RlLEVBQU9wSSxLQUFLZ0osR0FBVWxKLEtBQUsySSxzQkFBc0JPLEtBRzlDVixNQUFFSSxHQUNULE1BQU0sT0FBRTFMLEdBQVc4QyxLQUFLdUgsV0FDeEIsSUFBS3JLLEVBQ0QsTUFBTTlELE1BQU0sbUVBQ2hCLE1BQU0rUCxFQUFlekIsRUFBV2dCLFlBQVlFLEVBQVExTCxHQUNwRDhDLEtBQUt1SCxXQUFXckgsS0FBSSxDQUFDa0osRUFBUW5HLEtBQ3pCbUcsRUFBTzlHLE1BQVE2RyxFQUFhbEcsTUFJNUIwRixzQkFBc0JPLEdBQzFCLE1BQU8sQ0FDSDVHLE1BQU8sRUFDUDNILEtBQU11TyxFQUNOL0YsUUFBUyxDQUNMRCxNQUFPLENBQ0hHLEVBQUczRSxLQUFLc0MsTUFBc0IsSUFBaEJ0QyxLQUFLOEcsVUFDbkJsQyxFQUFHNUUsS0FBS3NDLE1BQXNCLElBQWhCdEMsS0FBSzhHLFVBQ25CaEQsRUFBRzlELEtBQUtzQyxNQUFzQixJQUFoQnRDLEtBQUs4RyxVQUNuQmpELEVBQUcsS0FFUHNHLFlBQVksRUFDWkMsY0FBYyxFQUNkQyxjQUFlLElBS3BCQyxPQUNIaEosS0FBS3dILGVBQWV6RixRQUFRL0IsS0FBS3VILFdBQVl2SCxLQUFLaUMsZUN6QzNDLFNBQVNvSCxFQUFXNVAsRUFBY0MsR0FDN0MsT0FBUUQsRUFBSzZQLGNBQWNDLFFBQ3ZCLElBQUssTUFDRCxPQUFPLElBQUlOLEVBQVN2UCxHQUN4QixJQUFLLE1BQ0QsT0FBTyxJQUFJeU8sRUFBU3pPLEdBQ3hCLFFBQ0ksTUFBTSxJQUFJTixNQUFNLEdBQUdLLDRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL3ZzLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL2ZzLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9wbG90LWxvZ2ljL1Bsb3RVdGlscy50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3Bsb3QtbG9naWMvTWF0aFV0aWxzLnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvcGxvdC1sb2dpYy9DaGFydERyYWZ0c21hbi50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvQ2hhcnRVdGlscy50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9jb21wb25lbnRzL0JhckNoYXJ0LnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9QaWVDaGFydC50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvQ2hhcnRTZXJ2YW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGRlZmF1bHQgXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcclxcbnVuaWZvcm0gbWF0MyB1X21hdHJpeDtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgodV9tYXRyaXggKiB2ZWMzKGFfcG9zaXRpb24sIDEpKS54eSwgMCwgMSk7XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXHJcXG51bmlmb3JtIHZlYzQgdV9jb2xvcjtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XFxyXFxufVwiIiwiLypcclxuQmFzZWQgb24gJ3R3Z2xzLmpzJyBieSBHcmVnZyBUYXZhcmVzLlxyXG5SZWFzb24gYmVoaW5kIG5vdCB1c2luZyB0aGlzIGxpYnJhcnkgZGlyZWN0bHkgYXJlOlxyXG4tIGRlc2lyZSB0byByZWNyZWF0ZSBsaWIgdG8gdW5kZXJzdGFuZCB1bmRlcmx5aW5nIGZ1bmN0aW9uYWxpdHkgYmV0dGVyXHJcbi0gcHJvYmxlbXMgd2l0aCBpbmNsdWRpbmcgbTQgYW5kIHZlYzNcclxuLSBpdCB3ZWlnaHRzIHRvbyBtdWNoXHJcbiovXHJcblxyXG50eXBlIFVuaWZvcm1TZXR0ZXJGdW5jdGlvbiA9IChkYXRhOiBudW1iZXJbXSkgPT4gdm9pZDtcclxudHlwZSBVbmlmb3JtU2V0dGVyc09iamVjdCA9IFJlY29yZDxzdHJpbmcsIFVuaWZvcm1TZXR0ZXJGdW5jdGlvbj47XHJcbmludGVyZmFjZSBBdHRyaWJ1dGVCdWZmZXJPYmplY3Qge1xyXG4gICAgYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuICAgIGJ5dGVMZW5ndGg6IG51bWJlcjtcclxuICAgIGxvY2F0aW9uOiBudW1iZXI7XHJcbn1cclxudHlwZSBBdHRyaWJ1dGVCdWZmZXJPYmplY3RzID0gUmVjb3JkPHN0cmluZywgQXR0cmlidXRlQnVmZmVyT2JqZWN0PjtcclxuXHJcbi8qKlxyXG4gKiBSZXNpemUgY2FudmFzIHRvIGRpc3BsYXkgc2l6ZS5cclxuICogQHBhcmFtIGNhbnZhcyAtIGNhbnZhcyBvYmplY3QuXHJcbiAqIEByZXR1cm5zIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHJlc2l6ZSBvY2N1cmVkLlxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZShjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICBpZiAoY2FudmFzLndpZHRoICE9PSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9PSBoZWlnaHQpIHtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBwcm9ncmFtIHdpdGggYXR0YWNoZWQgc2hhZGVycy5cclxuICogQHBhcmFtIGdsIC0gY29udGV4dC5cclxuICogQHBhcmFtIHZzIC0gdmVydGV4IHNoYWRlciBzdHJpbmcgc291cmNlLlxyXG4gKiBAcGFyYW0gZnMgLSBmcmFnbWVudCBzaGFkZXIgc3RyaW5nIHNvdXJjZS5cclxuICogQHJldHVybnMgbGlua2VkIHByb2dyYW0gd2l0aCBhdHRhY2hlZCBzaGFkZXJzLlxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2czogc3RyaW5nLCBmczogc3RyaW5nKTogV2ViR0xQcm9ncmFtIHtcclxuICAgIGNvbnN0IHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdnMpO1xyXG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnMpO1xyXG4gICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2hhZGVycyhnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICByZXR1cm4gcHJvZ3JhbTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgc2hhZGVyLlxyXG4gKiBAcGFyYW0gZ2wgLSBjb250ZXh0LlxyXG4gKiBAcGFyYW0gdHlwZSAtIHR5cGUgb2Ygc2hhZGVyIChnbC5WRVJURVhfU0hBREVSLCBnbC5GUkFHTUVOVF9TSEFERVIpLlxyXG4gKiBAcGFyYW0gc291cmNlIC0gc2hhZGVyIHN0cmluZyBzb3VyY2UuXHJcbiAqIEByZXR1cm5zIGNvbXBpbGVkIHNoYWRlci5cclxuKi9cclxuZnVuY3Rpb24gY3JlYXRlU2hhZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGU6IG51bWJlciwgc291cmNlOiBzdHJpbmcpOiBXZWJHTFNoYWRlciB7XHJcbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG5cclxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2VzcykgcmV0dXJuIHNoYWRlcjtcclxuXHJcbiAgICBjb25zdCBsb2cgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxuICAgIHRocm93IEVycm9yKGxvZyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHByb2dyYW0gaGF2aW5nIHNoYWRlcnMgY29tcGlsZWQuXHJcbiAqIEBwYXJhbSBnbCAtIGNvbnRleHQuXHJcbiAqIEBwYXJhbSB2c08gLSB2ZXJ0ZXggc2hhZGVyLlxyXG4gKiBAcGFyYW0gZnNPIC0gZnJhZ21lbnQgc2hhZGVyLlxyXG4gKiBAcmV0dXJucyBsaW5rZWQgcHJvZ3JhbS5cclxuKi9cclxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbUZyb21TaGFkZXJzKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZzTzogV2ViR0xTaGFkZXIsIGZzTzogV2ViR0xTaGFkZXIpOiBXZWJHTFByb2dyYW0ge1xyXG4gICAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2c08pO1xyXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzTyk7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICBjb25zdCBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2VzcykgcmV0dXJuIHByb2dyYW07XHJcblxyXG4gICAgY29uc3QgbG9nID0gZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7XHJcbiAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgdGhyb3cgRXJyb3IobG9nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB2aWV3cG9ydCBhbmQgcHJlcGFyZSBjYW52YXMuXHJcbiAqIEBwYXJhbSBnbCAtIGNvbnRleHQuXHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlVmlldyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogdm9pZCB7XHJcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKTtcclxuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG59XHJcblxyXG4vKipcclxuICogQHJldHVybiBmbGFnIGluZGljYXRpbmcgd2hldGhlciBhdHRyaWJ1dGUgb3IgdW5pZm9ybSBpcyBidWlsdC1pbi5cclxuKi9cclxuZnVuY3Rpb24gaXNCdWlsdEluKG5hbWU6IFdlYkdMQWN0aXZlSW5mb1snbmFtZSddKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbmFtZS5zdGFydHNXaXRoKFwiZ2xfXCIpIHx8IG5hbWUuc3RhcnRzV2l0aChcIndlYmdsX1wiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBnbCAtIGNvbnRleHQuXHJcbiAqIEBwYXJhbSB0eXBlIC0gdHlwZSBvZiB1bmlmb3JtLlxyXG4gKiBAcGFyYW0gbG9jIC0gbG9jYXRpb24gb2YgdW5pZm9ybSBpbiBwcm9ncmFtLlxyXG4gKiBAcmV0dXJuIHNldHRlciBmb3IgdW5pZm9ybS5cclxuKi9cclxuZnVuY3Rpb24gZ2V0VW5pZm9ybVNldHRlckJ5VHlwZShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0eXBlOiBXZWJHTEFjdGl2ZUluZm9bJ3R5cGUnXSwgbG9jOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbik6IFVuaWZvcm1TZXR0ZXJGdW5jdGlvbiB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIGdsLkZMT0FUOlxyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEpOiB2b2lkID0+IGdsLnVuaWZvcm0xZnYobG9jLCBkYXRhKTtcclxuICAgICAgICBjYXNlIGdsLkZMT0FUX1ZFQzI6XHJcbiAgICAgICAgICAgIHJldHVybiAoZGF0YSk6IHZvaWQgPT4gZ2wudW5pZm9ybTJmdihsb2MsIGRhdGEpO1xyXG4gICAgICAgIGNhc2UgZ2wuRkxPQVRfVkVDMzpcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhKTogdm9pZCA9PiBnbC51bmlmb3JtM2Z2KGxvYywgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5GTE9BVF9WRUM0OlxyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEpOiB2b2lkID0+IGdsLnVuaWZvcm00ZnYobG9jLCBkYXRhKTtcclxuICAgICAgICBjYXNlIGdsLklOVDpcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhKTogdm9pZCA9PiBnbC51bmlmb3JtMWl2KGxvYywgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5JTlRfVkVDMjpcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhKTogdm9pZCA9PiBnbC51bmlmb3JtMml2KGxvYywgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5JTlRfVkVDMzpcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhKTogdm9pZCA9PiBnbC51bmlmb3JtM2l2KGxvYywgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5JTlRfVkVDNDpcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhKTogdm9pZCA9PiBnbC51bmlmb3JtNGl2KGxvYywgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5GTE9BVF9NQVQyOlxyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEpOiB2b2lkID0+IGdsLnVuaWZvcm1NYXRyaXgyZnYobG9jLCBmYWxzZSwgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5GTE9BVF9NQVQzOlxyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEpOiB2b2lkID0+IGdsLnVuaWZvcm1NYXRyaXgzZnYobG9jLCBmYWxzZSwgZGF0YSk7XHJcbiAgICAgICAgY2FzZSBnbC5GTE9BVF9NQVQ0OlxyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEpOiB2b2lkID0+IGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jLCBmYWxzZSwgZGF0YSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFR5cGUgMHgke3R5cGV9IGlzIGludmFsaWQuYCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHVuaWZvcm0gc2V0dGVycyB0byBlYXNpbHkgc2V0IHVuaWZvcm1zIGxvY2F0ZWQgaW4gcHJvZ3JhbS5cclxuICogQHBhcmFtIGdsIC0gY29udGV4dC5cclxuICogQHBhcmFtIHByb2dyYW0gLSBwcm9ncmFtIGluIHdoaWNoIHVuaWZvcm1zIGFyZSBsb2NhdGVkLlxyXG4gKiBAcmV0dXJuIDx1bmlmb3JtIG5hbWUsIHNldHRlciBmb3IgdW5pZm9ybT4gcGFpcnMuXHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVbmlmb3JtU2V0dGVycyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBwcm9ncmFtOiBXZWJHTFByb2dyYW0pOiBVbmlmb3JtU2V0dGVyc09iamVjdCB7XHJcbiAgICBjb25zdCBudW1Vbmlmb3JtcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX1VOSUZPUk1TKTtcclxuICAgIGNvbnN0IHVuaWZvcm1TZXR0ZXJzOiBVbmlmb3JtU2V0dGVyc09iamVjdCA9IHt9O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVW5pZm9ybXM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1JbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpKTtcclxuICAgICAgICBjb25zdCB7IG5hbWUgfSA9IHVuaWZvcm1JbmZvO1xyXG4gICAgICAgIGlmICghaXNCdWlsdEluKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGVyID0gZ2V0VW5pZm9ybVNldHRlckJ5VHlwZShnbCwgdW5pZm9ybUluZm8udHlwZSwgbG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViTmFtZSA9IG5hbWUuZW5kc1dpdGgoJ1swXScpID8gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSAzKSA6IG5hbWU7XHJcbiAgICAgICAgICAgICAgICB1bmlmb3JtU2V0dGVyc1tzdWJOYW1lXSA9IHNldHRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bmlmb3JtU2V0dGVycztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgdW5pZm9ybXMgdXNpbmcgJ2RhdGEnIGFuZCBzZXR0ZXJzIHNwZWNpZmllZCBpbiAnc2V0dGVycycuIFxyXG4gKiBAcGFyYW0gc2V0dGVycyAtIHNldHRlcnMgY3JlYXRlZCB2aWEge0BsaW5rIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzfS5cclxuICogQHBhcmFtIGRhdGEgLSBkYXRhIGZvciBzZXR0ZXJzLCBrZXlzIHNob3VsZCBtYXRjaCBzZXR0ZXIga2V5cy5cclxuICogQHJldHVybiA8dW5pZm9ybSBuYW1lLCBzZXR0ZXIgZm9yIHVuaWZvcm0+IHBhaXJzLlxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0VW5pZm9ybXMoc2V0dGVyczogVW5pZm9ybVNldHRlcnNPYmplY3QsIGRhdGE6IFJlY29yZDxzdHJpbmcsIG51bWJlcltdPik6IHZvaWQge1xyXG4gICAgZm9yIChjb25zdCBpdGVtIGluIGRhdGEpIHtcclxuICAgICAgICBzZXR0ZXJzW2l0ZW1dKGRhdGFbaXRlbV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB1bmlmb3JtIGZvciBlYWNoIGF0dHJpYnV0ZSAoYXMga2V5KSBpbiBkYXRhXHJcbiAqIGFuZCBzdG9yZXMgZGF0YSAoYXMgdmFsdWUgZm9yIGtleSkgaW4gdGhpcyBidWZmZXIuXHJcbiAqIEBwYXJhbSBnbCAtIGNvbnRleHQuXHJcbiAqIEBwYXJhbSBwcm9ncmFtIC0gcHJvZ3JhbS5cclxuICogQHBhcmFtIGRhdGEgLSA8YXR0cmlidXRlLCBCdWZmZXJTb3VyY2U+IHBhaXJzLlxyXG4gKiBAcmV0dXJuIGJ1ZmZlciB3aXRoIGRhdGEsIGxlbmdodCBpbiBieXRlcyBvZiBidWZmZXIgZWxlbWVudCwgbG9jYXRpb24gb2YgYXR0cmlidXRlLlxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQnVmZmVyc0ZvckF0dHJpYnV0ZXMoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgcHJvZ3JhbTogV2ViR0xQcm9ncmFtLCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBCdWZmZXJTb3VyY2U+KTogQXR0cmlidXRlQnVmZmVyT2JqZWN0cyB7XHJcbiAgICBjb25zdCBidWZmZXJJbmZvOiBBdHRyaWJ1dGVCdWZmZXJPYmplY3RzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGF0dHJpYiBpbiBkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWIpO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhW2F0dHJpYl0sIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICBidWZmZXJJbmZvW2F0dHJpYl0gPSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcixcclxuICAgICAgICAgICAgYnl0ZUxlbmd0aDogZGF0YVthdHRyaWJdLmJ5dGVMZW5ndGgsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBidWZmZXJJbmZvO1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF0aFV0aWxzIHtcclxuICAgIGlkZW50aXR5TWF0cml4KCk6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAxLCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICAvLyBSeXNvd2FuaWUgb2QgZG9sbmVnbyBsZXdlZ28gcm9ndS5cclxuICAgIC8vIENoY8SFYyByeXNvd2HEhyBvZCBnw7NybmVnbyBsZXdlZ28sXHJcbiAgICAvLyB6bWllbmnEhyBuYSAtMi9oZWlnaHQgb3JheiArMVxyXG4gICAgcHJvamVjdGlvbk1hdHJpeCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAyIC8gd2lkdGgsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIDIgLyBoZWlnaHQsIDAsXHJcbiAgICAgICAgICAgIC0xLCAtMSwgMVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICB0cmFuc2xhdGlvbk1hdHJpeCh0eDogbnVtYmVyLCB0eTogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIDEsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIDEsIDAsXHJcbiAgICAgICAgICAgIHR4LCB0eSwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgcm90YXRpb25NYXRyaXgoZGVncmVlczogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGNvbnN0IHJhZGlhbnMgPSBkZWdyZWVzIC8gMTgwICogTWF0aC5QSTtcclxuICAgICAgICBjb25zdCBzID0gTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICAgICAgY29uc3QgYyA9IE1hdGguY29zKHJhZGlhbnMpO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGMsIC1zLCAwLFxyXG4gICAgICAgICAgICBzLCBjLCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICBzY2FsZU1hdHJpeChzeDogbnVtYmVyLCBzeTogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHN4LCAwLCAwLFxyXG4gICAgICAgICAgICAwLCBzeSwgMCxcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXJyYXlUb01hdHJpeChhcnI6IG51bWJlcltdLCBzaXplOiBudW1iZXIpOiBudW1iZXJbXVtdIHtcclxuICAgICAgICBjb25zdCByZXM6IG51bWJlcltdW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gc2l6ZSlcclxuICAgICAgICAgICAgcmVzLnB1c2goYXJyLnNsaWNlKGksIGkgKyBzaXplKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyB1c2UgbWF0aC5qcyBpZiBuZWVkZWQgLSBjb2RlIGJ5IEphbiBUdXJvxYhcclxuICAgIG11bHRpcGx5TWF0cmljZXMoRjogbnVtYmVyW10sIFM6IG51bWJlcltdKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGlmIChGLmxlbmd0aCA9PT0gUy5sZW5ndGggJiYgWzEsIDQsIDksIDE2XS5pbmNsdWRlcyhGLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcG93ID0gTWF0aC5zcXJ0KEYubGVuZ3RoKTtcclxuICAgICAgICAgICAgY29uc3QgQSA9IHRoaXMuYXJyYXlUb01hdHJpeChGLCBwb3cpO1xyXG4gICAgICAgICAgICBjb25zdCBCID0gdGhpcy5hcnJheVRvTWF0cml4KFMsIHBvdyk7XHJcbiAgICAgICAgICAgIHJldHVybiBBLm1hcCgocm93LCBpKSA9PlxyXG4gICAgICAgICAgICAgICAgQlswXS5tYXAoKF8sIGopID0+XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LnJlZHVjZSgoYWNjLCBfLCBuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2MgKyBBW2ldW25dICogQltuXVtqXSwgMFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKS5mbGF0KDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogbnVtYmVyW10ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uWCA9IDA7XHJcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25ZID0gMDtcclxuICAgICAgICBjb25zdCByb3RhdGlvbkluRGVncmVlcyA9IDA7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gMTtcclxuICAgICAgICBjb25zdCBzY2FsZVkgPSAxO1xyXG5cclxuICAgICAgICBjb25zdCBpZGVudGl0eU1hdHJpeCA9IHRoaXMuaWRlbnRpdHlNYXRyaXgoKTtcclxuICAgICAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gdGhpcy5wcm9qZWN0aW9uTWF0cml4KGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25NYXRyaXggPSB0aGlzLnRyYW5zbGF0aW9uTWF0cml4KHRyYW5zbGF0aW9uWCwgdHJhbnNsYXRpb25ZKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IHRoaXMucm90YXRpb25NYXRyaXgocm90YXRpb25JbkRlZ3JlZXMpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gdGhpcy5zY2FsZU1hdHJpeChzY2FsZVgsIHNjYWxlWSk7XHJcblxyXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLm11bHRpcGx5TWF0cmljZXMoaWRlbnRpdHlNYXRyaXgsIHByb2plY3Rpb25NYXRyaXgpO1xyXG4gICAgICAgIG1hdHJpeCA9IHRoaXMubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsIHRyYW5zbGF0aW9uTWF0cml4KTtcclxuICAgICAgICBtYXRyaXggPSB0aGlzLm11bHRpcGx5TWF0cmljZXMobWF0cml4LCByb3RhdGlvbk1hdHJpeCk7XHJcbiAgICAgICAgbWF0cml4ID0gdGhpcy5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgc2NhbGVNYXRyaXgpO1xyXG4gICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdnNMaW5lcyBmcm9tICcuLi9zaGFkZXJzL3ZzLmdsc2wnO1xyXG5pbXBvcnQgZnNMaW5lcyBmcm9tICcuLi9zaGFkZXJzL2ZzLmdsc2wnO1xyXG5pbXBvcnQgeyBDaGFydE9wdGlvbnMsIFNpbmdsZVNlcmllRGF0YSwgVGlja0luZm8gfSBmcm9tICcuLi9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVCdWZmZXJzRm9yQXR0cmlidXRlcywgY3JlYXRlUHJvZ3JhbSwgY3JlYXRlVW5pZm9ybVNldHRlcnMsIHByZXBhcmVWaWV3LCBzZXRVbmlmb3JtcyB9IGZyb20gJy4vUGxvdFV0aWxzJztcclxuaW1wb3J0IE1hdGhVdGlscyBmcm9tICcuL01hdGhVdGlscyc7XHJcblxyXG5pbnRlcmZhY2UgRnJhbWVSZWN0IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYXJ0RHJhZnRzbWFuIHtcclxuXHJcbiAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmdsID0gZ2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDb250ZW50RnJhbWUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBGcmFtZVJlY3Qge1xyXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLmZsb29yKE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMTAwKTtcclxuICAgICAgICBjb25zdCBjb250ZW50RnJhbWU6IEZyYW1lUmVjdCA9IHtcclxuICAgICAgICAgICAgeDogcGFkZGluZyxcclxuICAgICAgICAgICAgeTogcGFkZGluZyxcclxuICAgICAgICAgICAgdzogd2lkdGggLSAyICogcGFkZGluZyxcclxuICAgICAgICAgICAgaDogaGVpZ2h0IC0gMiAqIHBhZGRpbmcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY29udGVudEZyYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd1RpdGxlKHRpdGxlOiBzdHJpbmcsIGZyYW1lOiBGcmFtZVJlY3QpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNhbnZhcyB9ID0gdGhpcy5nbDtcclxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAvLyBtaWdodCBiZSBwcm9ibGVtYXRpYyB3aGVuIGRyYXdpbmcgbXVsdGlwbGUgdGV4dHNcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgRlJBTUVfSEVJR0hUX0RJVklERVIgPSAxMDtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3SCA9IE1hdGguZmxvb3IoZnJhbWUuaCAvIEZSQU1FX0hFSUdIVF9ESVZJREVSKTtcclxuICAgICAgICBjb25zdCB0aXRsZUZyYW1lOiBGcmFtZVJlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IGZyYW1lLngsXHJcbiAgICAgICAgICAgIHk6IGZyYW1lLnkgKyBmcmFtZS5oIC0gbmV3SCxcclxuICAgICAgICAgICAgaDogbmV3SCxcclxuICAgICAgICAgICAgdzogZnJhbWUud1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KHRpdGxlLCB0aXRsZUZyYW1lLngsIHRpdGxlRnJhbWUueSwgdGl0bGVGcmFtZS53KTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3UGllKHNlcmllczogU2luZ2xlU2VyaWVEYXRhW10sIGNoYXJ0T3B0aW9uczogQ2hhcnRPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBnbCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7IGNhbnZhcyB9ID0gZ2w7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRGcmFtZSA9IHRoaXMuZ2V0Q29udGVudEZyYW1lKGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgaWYgKGNoYXJ0T3B0aW9ucy5zaG93VGl0bGUgJiYgY2hhcnRPcHRpb25zLnRpdGxlKVxyXG4gICAgICAgICAgICB0aGlzLmRyYXdUaXRsZShjaGFydE9wdGlvbnMudGl0bGUsIGNvbnRlbnRGcmFtZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvdGFsID0gc2VyaWVzLm1hcChzZXJpZSA9PiBzZXJpZS52YWx1ZSkucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XHJcbiAgICAgICAgY29uc3QgZnJhY3Rpb25zID0gc2VyaWVzLm1hcChzZXJpZSA9PiBNYXRoLnJvdW5kKHNlcmllLnZhbHVlICogMzYwIC8gdG90YWwpKTtcclxuICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBoID0gY2FudmFzLmhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgIGNvbnN0IHUgPSBuZXcgTWF0aFV0aWxzKCk7XHJcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0oZ2wsIHZzTGluZXMsIGZzTGluZXMpO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRlcnMgPSBjcmVhdGVVbmlmb3JtU2V0dGVycyhnbCwgcHJvZ3JhbSk7XHJcbiAgICAgICAgc2V0VW5pZm9ybXMoc2V0dGVycywge1xyXG4gICAgICAgICAgICB1X21hdHJpeDogdS5nZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJlcGFyZVZpZXcoZ2wpO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgZnJhY3Rpb25zLmZvckVhY2goKGZyYWN0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IHNlcmllc1tpbmRleF0ub3B0aW9ucy5jb2xvcjtcclxuICAgICAgICAgICAgc2V0VW5pZm9ybXMoc2V0dGVycywge1xyXG4gICAgICAgICAgICAgICAgdV9jb2xvcjogW2NvbG9yLnIgLyAyNTUsIGNvbG9yLmcgLyAyNTUsIGNvbG9yLmIgLyAyNTUsIGNvbG9yLmEgLyAyNTVdXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gW107XHJcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHcsIGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBjb3VudDtcclxuICAgICAgICAgICAgY291bnQgKz0gZnJhY3Rpb247XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBjb3VudDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqID0gaSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMucHVzaCh3ICsgTWF0aC5zaW4oaikgKiBNYXRoLmZsb29yKHcgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMucHVzaChoICsgTWF0aC5jb3MoaikgKiBNYXRoLmZsb29yKHcgLyAyKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFycmF5cyA9IHtcclxuICAgICAgICAgICAgICAgIGFfcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkocG9pbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBidWZmZXJzID0gY3JlYXRlQnVmZmVyc0ZvckF0dHJpYnV0ZXMoZ2wsIHByb2dyYW0sIGFycmF5cyk7XHJcbiAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGJ1ZmZlcnMuYV9wb3NpdGlvbi5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJzLmFfcG9zaXRpb24uYnVmZmVyKTtcclxuICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihidWZmZXJzLmFfcG9zaXRpb24ubG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfRkFOLCAwLCBwb2ludHMubGVuZ3RoIC8gMik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0xpbmVzKHNlcmllczogbnVtYmVyW10pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGdsIH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heCguLi5zZXJpZXMubWFwKE1hdGguYWJzKSk7XHJcbiAgICAgICAgY29uc3QgdGlja0luZm8gPSB0aGlzLmdldFRpY2tJbmZvKG1heCwgOCk7XHJcbiAgICAgICAgY29uc3QgdyA9IGdsLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoID0gZ2wuY2FudmFzLmhlaWdodDtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5mbG9vcihNYXRoLm1pbih3LCBoKSAvIDEwMCk7XHJcbiAgICAgICAgY29uc3QgdW5kZXJMaW5lQXJlYUhlaWdodCA9IChoIC0gMiAqIHBhZGRpbmcpIC8gNztcclxuICAgICAgICBjb25zdCBsaW5lc1BvaW50cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFkZGluZztcclxuICAgICAgICBjb25zdCBlbmQgPSB3IC0gcGFkZGluZztcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aWNrSW5mby50aWNrQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSCA9IGkgKiB1bmRlckxpbmVBcmVhSGVpZ2h0O1xyXG4gICAgICAgICAgICBsaW5lc1BvaW50cy5wdXNoKHN0YXJ0LCBsaW5lSCwgZW5kLCBsaW5lSCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1ID0gbmV3IE1hdGhVdGlscygpO1xyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0ge1xyXG4gICAgICAgICAgICB1X2NvbG9yOiBbMC43LCAwLjcsIDAuNywgMV0sXHJcbiAgICAgICAgICAgIHVfbWF0cml4OiB1LmdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgYXJyYXlzID0ge1xyXG4gICAgICAgICAgICBhX3Bvc2l0aW9uOiBuZXcgSW50MTZBcnJheShsaW5lc1BvaW50cylcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2c0xpbmVzLCBmc0xpbmVzKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIGNvbnN0IHNldHRlcnMgPSBjcmVhdGVVbmlmb3JtU2V0dGVycyhnbCwgcHJvZ3JhbSk7XHJcbiAgICAgICAgc2V0VW5pZm9ybXMoc2V0dGVycywgdW5pZm9ybXMpO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBjcmVhdGVCdWZmZXJzRm9yQXR0cmlidXRlcyhnbCwgcHJvZ3JhbSwgYXJyYXlzKTtcclxuICAgICAgICBwcmVwYXJlVmlldyhnbCk7XHJcblxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYnVmZmVycy5hX3Bvc2l0aW9uLmxvY2F0aW9uKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVycy5hX3Bvc2l0aW9uLmJ1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihidWZmZXJzLmFfcG9zaXRpb24ubG9jYXRpb24sIDIsIGdsLlNIT1JULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5MSU5FUywgMCwgbGluZXNQb2ludHMubGVuZ3RoIC8gMik7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0JhcnMoc2VyaWVzOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZ2wgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHcgPSBnbC5jYW52YXMud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaCA9IGdsLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IE1hdGguZmxvb3IoTWF0aC5taW4odywgaCkgLyAxMDApOyAvL25wIDYgLSB3dGVkeSBIID0gNTg4LlxyXG4gICAgICAgIGNvbnN0IEggPSBoIC0gMiAqIHBhZGRpbmc7XHJcbiAgICAgICAgY29uc3QgVyA9IHcgLSAyICogcGFkZGluZztcclxuICAgICAgICBjb25zdCBtdWx0aXBpZXIgPSBIIC8gTWF0aC5tYXgoLi4uc2VyaWVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sUG9pbnRzID0gW107XHJcbiAgICAgICAgY29uc3QgQ09MX05VTVMgPSBzZXJpZXMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGNvbEFyZWFXaWR0aCA9IFcgLyBDT0xfTlVNUztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDT0xfTlVNUzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEhlaWdodCA9IHBhZGRpbmcgKyBzZXJpZXNbaV0gKiBtdWx0aXBpZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50TGVmdFggPSBwYWRkaW5nICsgKGNvbEFyZWFXaWR0aCAqIGkpICsgKGNvbEFyZWFXaWR0aCAvIDUpO1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludExlZnRZID0gcGFkZGluZyArIChjb2xBcmVhV2lkdGggKiAoaSArIDEpKSAtIChjb2xBcmVhV2lkdGggLyA1KTtcclxuICAgICAgICAgICAgY29sUG9pbnRzLnB1c2gocG9pbnRMZWZ0WCwgcGFkZGluZywgcG9pbnRMZWZ0WCwgY29sSGVpZ2h0LCBwb2ludExlZnRZLCBjb2xIZWlnaHQpO1xyXG4gICAgICAgICAgICBjb2xQb2ludHMucHVzaChwb2ludExlZnRYLCBwYWRkaW5nLCBwb2ludExlZnRZLCBwYWRkaW5nLCBwb2ludExlZnRZLCBjb2xIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0oZ2wsIHZzTGluZXMsIGZzTGluZXMpO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgY29uc3Qgc2V0dGVycyA9IGNyZWF0ZVVuaWZvcm1TZXR0ZXJzKGdsLCBwcm9ncmFtKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyYXlzID0ge1xyXG4gICAgICAgICAgICBhX3Bvc2l0aW9uOiBuZXcgRmxvYXQzMkFycmF5KGNvbFBvaW50cylcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlckluZm8gPSBjcmVhdGVCdWZmZXJzRm9yQXR0cmlidXRlcyhnbCwgcHJvZ3JhbSwgYXJyYXlzKTtcclxuICAgICAgICBzZXRVbmlmb3JtcyhzZXR0ZXJzLCB7XHJcbiAgICAgICAgICAgIHVfbWF0cml4OiBuZXcgTWF0aFV0aWxzKCkuZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZ2wpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYnVmZmVySW5mby5hX3Bvc2l0aW9uLmxvY2F0aW9uKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVySW5mby5hX3Bvc2l0aW9uLmJ1ZmZlcik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDT0xfTlVNUzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNldFVuaWZvcm1zKHNldHRlcnMsIHtcclxuICAgICAgICAgICAgICAgIHVfY29sb3I6IFtNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpLCAxXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihidWZmZXJJbmZvLmFfcG9zaXRpb24ubG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgaSAqIDEyICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuICAgICAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDEyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldFRpY2tJbmZvKGxhcmdlc3Q6IG51bWJlciwgbW9zdFRpY2tzOiBudW1iZXIpOiBUaWNrSW5mbyB7XHJcbiAgICAgICAgY29uc3QgbWluaW11bSA9IGxhcmdlc3QgLyBtb3N0VGlja3M7XHJcbiAgICAgICAgY29uc3QgbWFnbml0dWRlID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2cxMChtaW5pbXVtKSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc2lkdWFsID0gbWluaW11bSAvIG1hZ25pdHVkZTtcclxuICAgICAgICBjb25zdCB0YWJsZSA9IFsxLCAxLjUsIDIsIDMsIDUsIDcsIDEwXTtcclxuICAgICAgICBjb25zdCB0aWNrID0gcmVzaWR1YWwgPCAxMCA/IHRhYmxlLmZpbmQoKGUpID0+IChlID4gcmVzaWR1YWwpKSA6IDEwO1xyXG4gICAgICAgIGNvbnN0IHRpY2tIZWlnaHQgPSB0aWNrICogbWFnbml0dWRlO1xyXG4gICAgICAgIGNvbnN0IHRpY2tDb3VudCA9IE1hdGguY2VpbChsYXJnZXN0IC8gdGlja0hlaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIHsgdGlja0hlaWdodCwgdGlja0NvdW50IH07XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIC8qKlxyXG4gICAgICogSWYgbmVlZGVkLCBzbGljZSAnYXJyYXknIHRvICdsZW4nIGl0ZW1zIG9yIGZpbGwgdG8gJ2xlbicgaXRlbXMgdXNpbmcgJ2ZpbGxXaXRoJy5cclxuICAgICAqIEBwYXJhbSBhcnJheSAtIGFycmF5IHRvIHNsaWNlIG9yIGZpbGwuXHJcbiAgICAgKiBAcGFyYW0gbGVuIC0gdGhlIHJlc3VsdGluZyBsZW5ndGggb2YgYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gZmlsbFdpdGggLSBudW1iZXIgd2l0aCB3aGljaCBhcnJheSBzaG91bGQgYmUgZmlsbGVkLlxyXG4gICAgICogQHJldHVybnMgc2xpY2VkIG9yIGZpbGxlZCBhcnJheS5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNsaWNlT3JGaWxsKGFycmF5OiBudW1iZXJbXSwgbGVuOiBudW1iZXIsIGZpbGxXaXRoPzogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IGxlbikgcmV0dXJuIGFycmF5O1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPiBsZW4pIHJldHVybiBhcnJheS5zbGljZSgwLCBsZW4pO1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPCBsZW4pXHJcbiAgICAgICAgICAgIHdoaWxlIChhcnJheS5sZW5ndGggIT09IGxlbilcclxuICAgICAgICAgICAgICAgIGFycmF5LnB1c2goZmlsbFdpdGggPz8gMCk7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWVyZ2UgcHJvcGVydGllcyBmcm9tICduZXdPcHRpb25zJyB0byAnYWN0dWFsT3B0aW9ucycgKHJpZ2h0LWpvaW4gbGlrZSkuXHJcbiAgICAgKiBAcGFyYW0gbmV3T3B0aW9ucyAtIHNvbWUgb3B0aW9uIHByb3BlcnRpZXMgZm9yIHR5cGUgVC5cclxuICAgICAqIEBwYXJhbSBhY3R1YWxPcHRpb25zIC0gYWxsIG9wdGlvbiBwcm9wZXJ0aWVzIGZvciB0eXBlIFQuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBtZXJnZVJpZ2h0PFQ+KG5ld09wdGlvbnM6IFBhcnRpYWw8VD4sIGFjdHVhbE9wdGlvbnM6IFQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYWN0dWFsT3B0aW9ucyk7XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobmV3T3B0aW9ucykuZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpclswXTtcclxuICAgICAgICAgICAgaWYgKGtleXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyWzFdO1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCBcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGFjdHVhbE9wdGlvbnNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTZXJpZURhdGFDb21tb24sIENoYXJ0T3B0aW9ucywgQ29udGV4dFNvdXJjZSwgU2VyaWVPcHRpb25zIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgQ2hhcnREcmFmdHNtYW4gZnJvbSBcIi4uL3Bsb3QtbG9naWMvQ2hhcnREcmFmdHNtYW5cIjtcclxuaW1wb3J0IENoYXJ0VXRpbHMgZnJvbSBcIi4vQ2hhcnRVdGlsc1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENoYXJ0IHtcclxuXHJcbiAgICBjb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICBzZXJpZXNEYXRhOiBTZXJpZURhdGFDb21tb25bXTtcclxuICAgIGNoYXJ0T3B0aW9uczogQ2hhcnRPcHRpb25zO1xyXG4gICAgY2hhcnREcmFmdHNtYW46IENoYXJ0RHJhZnRzbWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogQ29udGV4dFNvdXJjZSkge1xyXG4gICAgICAgIGxldCBhbmFseXplZEVsZW1lbnQgPSBzb3VyY2U7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhbmFseXplZEVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGFuYWx5emVkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuYWx5emVkRWxlbWVudC5yZXBsYWNlKCcvXiMvJywgJycpKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFuYWx5emVkRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGFuYWx5emVkRWxlbWVudC5nZXRDb250ZXh0KCd3ZWJnbCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhbmFseXplZEVsZW1lbnQgaW5zdGFuY2VvZiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gYW5hbHl6ZWRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHRocm93IEVycm9yKCdBcmd1bWVudCBtdXN0IGJlIHZhbGlkIElELCBIVE1MQ2FudmFzRWxlbWVudCBvciBXZWJHTFJlbmRlcmluZ0NvbnRleHQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGFydE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnVW50aXRsZWQnLFxyXG4gICAgICAgICAgICBzaG93VGl0bGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNob3dMZWdlbmQ6IGZhbHNlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXJpZXNEYXRhID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuY2hhcnREcmFmdHNtYW4gPSBuZXcgQ2hhcnREcmFmdHNtYW4odGhpcy5jb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q2hhcnRPcHRpb25zKG9wdGlvbnM6IFBhcnRpYWw8Q2hhcnRPcHRpb25zPik6IHZvaWQge1xyXG4gICAgICAgIENoYXJ0VXRpbHMubWVyZ2VSaWdodChvcHRpb25zLCB0aGlzLmNoYXJ0T3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFNlcmllT3B0aW9ucyhuZXdPcHRpb25zOiBQYXJ0aWFsPFNlcmllT3B0aW9ucz4sIHdoaWNoU2VyaWVzPzogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgICAgICBpZiAod2hpY2hTZXJpZXMpIHdoaWNoU2VyaWVzLmZvckVhY2goKHNlcmllTmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3R1YWxTZXJpZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmllc0RhdGEuZmluZCgoZXhpc3RpbmdTZXJpZSkgPT4gZXhpc3RpbmdTZXJpZS5uYW1lID09IHNlcmllTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChhY3R1YWxTZXJpZSkge1xyXG4gICAgICAgICAgICAgICAgQ2hhcnRVdGlscy5tZXJnZVJpZ2h0KG5ld09wdGlvbnMsIGFjdHVhbFNlcmllLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBTZXJpZSB3aXRoIG5hbWUgJHtzZXJpZU5hbWV9IG5vdCBmb3VuZC5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zZXJpZXNEYXRhLmZvckVhY2goKHNlcmllKSA9PiBDaGFydFV0aWxzLm1lcmdlUmlnaHQobmV3T3B0aW9ucywgc2VyaWUub3B0aW9ucykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXQgWCh2YWx1ZTogc3RyaW5nW10gfCBudW1iZXJbXSB8IG51bWJlcltdW10pO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCBZKHZhbHVlOiBudW1iZXJbXSB8IG51bWJlcltdW10pO1xyXG4gICAgcHVibGljIGFic3RyYWN0IGRyYXcoKTogdm9pZDtcclxufSIsImltcG9ydCB7IE11bHRpU2VyaWVEYXRhLCBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBDaGFydCB9IGZyb20gXCIuL0NoYXJ0XCI7XHJcbmltcG9ydCBDaGFydFV0aWxzIGZyb20gXCIuL0NoYXJ0VXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXJDaGFydCBleHRlbmRzIENoYXJ0IHtcclxuICAgIGRhdGFMYWJlbHM6IHN0cmluZ1tdO1xyXG4gICAgc2VyaWVzRGF0YTogTXVsdGlTZXJpZURhdGFbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IENvbnRleHRTb3VyY2UpIHtcclxuICAgICAgICBzdXBlcihzb3VyY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWChsYWJlbHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhTGFiZWxzID0gbGFiZWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWShzZXJpZXM6IG51bWJlcltdW10pIHtcclxuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5kYXRhTGFiZWxzO1xyXG4gICAgICAgIGlmICghbGVuZ3RoKVxyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignVmFsdWVzIG9uIFwiWFwiIGF4aXMgbXVzdCBiZSBzcGVjaWZpZWQgYmVmb3JlIHNldHRpbmcgXCJZXCIgdmFsdWVzLicpO1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFNlcmllcyA9IHNlcmllcy5tYXAoc2VyaWUgPT4gQ2hhcnRVdGlscy5zbGljZU9yRmlsbChzZXJpZSwgbGVuZ3RoKSk7XHJcbiAgICAgICAgdGhpcy5zZXJpZXNEYXRhID0gbWFwcGVkU2VyaWVzLm1hcCgoc2VyaWUsIGluZGV4KSA9PiB0aGlzLmdldERlZmF1bHRTZXJpZU9iamVjdChzZXJpZSwgaW5kZXgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRTZXJpZU9iamVjdChzZXJpZTogbnVtYmVyW10sIGluZGV4OiBudW1iZXIpOiBNdWx0aVNlcmllRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsdWVzOiBzZXJpZSxcclxuICAgICAgICAgICAgbmFtZTogYHNlcmllJHtpbmRleH1gLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSksXHJcbiAgICAgICAgICAgICAgICAgICAgZzogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgICAgICBiOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGE6IDI1NVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNob3dMYWJlbHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2hvd09uTGVnZW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVkZ2VUaGlja25lc3M6IDAsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2hhcnREcmFmdHNtYW4uZHJhd0xpbmVzKHRoaXMuc2VyaWVzRGF0YVswXS52YWx1ZXMpO1xyXG4gICAgICAgIHRoaXMuY2hhcnREcmFmdHNtYW4uZHJhd0JhcnModGhpcy5zZXJpZXNEYXRhWzBdLnZhbHVlcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTaW5nbGVTZXJpZURhdGEsIENvbnRleHRTb3VyY2UgfSBmcm9tIFwiLi4vbW9kZWxzXCI7XHJcbmltcG9ydCB7IENoYXJ0IH0gZnJvbSBcIi4vQ2hhcnRcIjtcclxuaW1wb3J0IENoYXJ0VXRpbHMgZnJvbSBcIi4vQ2hhcnRVdGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBpZUNoYXJ0IGV4dGVuZHMgQ2hhcnQge1xyXG5cclxuICAgIHNlcmllc0RhdGE6IFNpbmdsZVNlcmllRGF0YVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogQ29udGV4dFNvdXJjZSkge1xyXG4gICAgICAgIHN1cGVyKHNvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBYKGxhYmVsczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnNlcmllc0RhdGEgPVxyXG4gICAgICAgICAgICBsYWJlbHMubWFwKChsYWJlbCkgPT4gdGhpcy5nZXREZWZhdWx0U2VyaWVPYmplY3QobGFiZWwpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFkodmFsdWVzOiBudW1iZXJbXSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzLnNlcmllc0RhdGE7XHJcbiAgICAgICAgaWYgKCFsZW5ndGgpXHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWYWx1ZXMgb24gXCJYXCIgYXhpcyBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgc2V0dGluZyBcIllcIiB2YWx1ZXMuJyk7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkVmFsdWVzID0gQ2hhcnRVdGlscy5zbGljZU9yRmlsbCh2YWx1ZXMsIGxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5zZXJpZXNEYXRhLm1hcCgob3B0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBtYXBwZWRWYWx1ZXNbaW5kZXhdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdFNlcmllT2JqZWN0KGxhYmVsOiBzdHJpbmcpOiBTaW5nbGVTZXJpZURhdGEge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICBuYW1lOiBsYWJlbCxcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgICAgICByOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGc6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSksXHJcbiAgICAgICAgICAgICAgICAgICAgYjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgICAgICBhOiAyNTVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaG93TGFiZWxzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNob3dPbkxlZ2VuZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlZGdlVGhpY2tuZXNzOiAwLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNoYXJ0RHJhZnRzbWFuLmRyYXdQaWUodGhpcy5zZXJpZXNEYXRhLCB0aGlzLmNoYXJ0T3B0aW9ucyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBCYXJDaGFydCB9IGZyb20gXCIuL0JhckNoYXJ0XCI7XHJcbmltcG9ydCB7IENoYXJ0IH0gZnJvbSBcIi4vQ2hhcnRcIjtcclxuaW1wb3J0IHsgUGllQ2hhcnQgfSBmcm9tIFwiLi9QaWVDaGFydFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VydmVDaGFydCh0eXBlOiBzdHJpbmcsIHNvdXJjZTogQ29udGV4dFNvdXJjZSk6IENoYXJ0IHtcclxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSkge1xyXG4gICAgICAgIGNhc2UgXCJwaWVcIjpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQaWVDaGFydChzb3VyY2UpO1xyXG4gICAgICAgIGNhc2UgXCJiYXJcIjpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCYXJDaGFydChzb3VyY2UpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0eXBlfSBjaGFydCBpcyBub3QgZGVmaW5lZC5gKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNyZWF0ZVByb2dyYW0iLCJnbCIsInZzIiwiZnMiLCJwcm9ncmFtIiwidnNPIiwiZnNPIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJsb2ciLCJnZXRQcm9ncmFtSW5mb0xvZyIsImRlbGV0ZVByb2dyYW0iLCJFcnJvciIsImNyZWF0ZVByb2dyYW1Gcm9tU2hhZGVycyIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJ0eXBlIiwic291cmNlIiwic2hhZGVyIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsInByZXBhcmVWaWV3Iiwidmlld3BvcnQiLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyQ29sb3IiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJpc0J1aWx0SW4iLCJuYW1lIiwic3RhcnRzV2l0aCIsImdldFVuaWZvcm1TZXR0ZXJCeVR5cGUiLCJsb2MiLCJGTE9BVCIsImRhdGEiLCJ1bmlmb3JtMWZ2IiwiRkxPQVRfVkVDMiIsInVuaWZvcm0yZnYiLCJGTE9BVF9WRUMzIiwidW5pZm9ybTNmdiIsIkZMT0FUX1ZFQzQiLCJ1bmlmb3JtNGZ2IiwiSU5UIiwidW5pZm9ybTFpdiIsIklOVF9WRUMyIiwidW5pZm9ybTJpdiIsIklOVF9WRUMzIiwidW5pZm9ybTNpdiIsIklOVF9WRUM0IiwidW5pZm9ybTRpdiIsIkZMT0FUX01BVDIiLCJ1bmlmb3JtTWF0cml4MmZ2IiwiRkxPQVRfTUFUMyIsInVuaWZvcm1NYXRyaXgzZnYiLCJGTE9BVF9NQVQ0IiwidW5pZm9ybU1hdHJpeDRmdiIsImNyZWF0ZVVuaWZvcm1TZXR0ZXJzIiwibnVtVW5pZm9ybXMiLCJBQ1RJVkVfVU5JRk9STVMiLCJ1bmlmb3JtU2V0dGVycyIsImkiLCJ1bmlmb3JtSW5mbyIsImdldEFjdGl2ZVVuaWZvcm0iLCJsb2NhdGlvbiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInNldHRlciIsImVuZHNXaXRoIiwic3Vic3RyIiwibGVuZ3RoIiwic2V0VW5pZm9ybXMiLCJzZXR0ZXJzIiwiaXRlbSIsImNyZWF0ZUJ1ZmZlcnNGb3JBdHRyaWJ1dGVzIiwiYnVmZmVySW5mbyIsImF0dHJpYiIsImdldEF0dHJpYkxvY2F0aW9uIiwiYnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsImJ5dGVMZW5ndGgiLCJNYXRoVXRpbHMiLCJpZGVudGl0eU1hdHJpeCIsInByb2plY3Rpb25NYXRyaXgiLCJ0cmFuc2xhdGlvbk1hdHJpeCIsInR4IiwidHkiLCJyb3RhdGlvbk1hdHJpeCIsImRlZ3JlZXMiLCJyYWRpYW5zIiwiTWF0aCIsIlBJIiwicyIsInNpbiIsImMiLCJjb3MiLCJzY2FsZU1hdHJpeCIsInN4Iiwic3kiLCJhcnJheVRvTWF0cml4IiwiYXJyIiwic2l6ZSIsInJlcyIsInB1c2giLCJzbGljZSIsIm11bHRpcGx5TWF0cmljZXMiLCJGIiwiUyIsImluY2x1ZGVzIiwicG93Iiwic3FydCIsIkEiLCJ0aGlzIiwiQiIsIm1hcCIsInJvdyIsIl8iLCJqIiwicmVkdWNlIiwiYWNjIiwibiIsImZsYXQiLCJnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCIsIm1hdHJpeCIsIkNoYXJ0RHJhZnRzbWFuIiwiY29uc3RydWN0b3IiLCJnZXRDb250ZW50RnJhbWUiLCJwYWRkaW5nIiwiZmxvb3IiLCJtaW4iLCJ4IiwieSIsInciLCJoIiwiZHJhd1RpdGxlIiwidGl0bGUiLCJmcmFtZSIsImN0eCIsImdldENvbnRleHQiLCJjbGVhclJlY3QiLCJuZXdIIiwidGl0bGVGcmFtZSIsImZpbGxUZXh0IiwiZHJhd1BpZSIsInNlcmllcyIsImNoYXJ0T3B0aW9ucyIsImNvbnRlbnRGcmFtZSIsInNob3dUaXRsZSIsInRvdGFsIiwic2VyaWUiLCJ2YWx1ZSIsImEiLCJiIiwiZnJhY3Rpb25zIiwicm91bmQiLCJ1IiwidXNlUHJvZ3JhbSIsInVfbWF0cml4IiwiY291bnQiLCJmb3JFYWNoIiwiZnJhY3Rpb24iLCJpbmRleCIsImNvbG9yIiwib3B0aW9ucyIsInVfY29sb3IiLCJyIiwiZyIsInBvaW50cyIsInN0YXJ0IiwiYXJyYXlzIiwiYV9wb3NpdGlvbiIsIkZsb2F0MzJBcnJheSIsImJ1ZmZlcnMiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVfRkFOIiwiZHJhd0xpbmVzIiwibWF4IiwiYWJzIiwidGlja0luZm8iLCJnZXRUaWNrSW5mbyIsInVuZGVyTGluZUFyZWFIZWlnaHQiLCJsaW5lc1BvaW50cyIsImVuZCIsInRpY2tDb3VudCIsImxpbmVIIiwidW5pZm9ybXMiLCJJbnQxNkFycmF5IiwiU0hPUlQiLCJMSU5FUyIsImRyYXdCYXJzIiwiVyIsIm11bHRpcGllciIsImNvbFBvaW50cyIsIkNPTF9OVU1TIiwiY29sQXJlYVdpZHRoIiwiY29sSGVpZ2h0IiwicG9pbnRMZWZ0WCIsInBvaW50TGVmdFkiLCJyYW5kb20iLCJCWVRFU19QRVJfRUxFTUVOVCIsIlRSSUFOR0xFUyIsImxhcmdlc3QiLCJtb3N0VGlja3MiLCJtaW5pbXVtIiwibWFnbml0dWRlIiwibG9nMTAiLCJyZXNpZHVhbCIsInRpY2tIZWlnaHQiLCJmaW5kIiwiZSIsImNlaWwiLCJzdGF0aWMiLCJhcnJheSIsImxlbiIsImZpbGxXaXRoIiwibmV3T3B0aW9ucyIsImFjdHVhbE9wdGlvbnMiLCJrZXlzIiwiZW50cmllcyIsInBhaXIiLCJDaGFydCIsImFuYWx5emVkRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXBsYWNlIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJjb250ZXh0IiwiV2ViR0xSZW5kZXJpbmdDb250ZXh0Iiwic2hvd0xlZ2VuZCIsInNlcmllc0RhdGEiLCJjaGFydERyYWZ0c21hbiIsInNldENoYXJ0T3B0aW9ucyIsIkNoYXJ0VXRpbHMiLCJtZXJnZVJpZ2h0Iiwic2V0U2VyaWVPcHRpb25zIiwid2hpY2hTZXJpZXMiLCJzZXJpZU5hbWUiLCJhY3R1YWxTZXJpZSIsImV4aXN0aW5nU2VyaWUiLCJjb25zb2xlIiwid2FybiIsIkJhckNoYXJ0Iiwic3VwZXIiLCJYIiwibGFiZWxzIiwiZGF0YUxhYmVscyIsIlkiLCJtYXBwZWRTZXJpZXMiLCJzbGljZU9yRmlsbCIsImdldERlZmF1bHRTZXJpZU9iamVjdCIsInZhbHVlcyIsInNob3dMYWJlbHMiLCJzaG93T25MZWdlbmQiLCJlZGdlVGhpY2tuZXNzIiwiZHJhdyIsIlBpZUNoYXJ0IiwibGFiZWwiLCJtYXBwZWRWYWx1ZXMiLCJvcHRpb24iLCJzZXJ2ZUNoYXJ0IiwidG9Mb3dlckNhc2UiLCJ0cmltIl0sInNvdXJjZVJvb3QiOiIifQ==