var t={d:(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)},r={};t.d(r,{Z:()=>i});class e{identityMatrix(){return[1,0,0,0,1,0,0,0,1]}projectionMatrix(t,r){return[2/t,0,0,0,-2/r,0,-1,1,1]}translationMatrix(t,r){return[1,0,0,0,1,0,t,r,1]}rotationMatrix(t){const r=t/180*Math.PI,e=Math.sin(r),a=Math.cos(r);return[a,-e,0,e,a,0,0,0,1]}scaleMatrix(t,r){return[t,0,0,0,r,0,0,0,1]}arrayToMatrix(t,r){const e=[];for(let a=0;a<t.length;a+=r)e.push(t.slice(a,a+r));return e}multiplyMatrices(t,r){if(t.length===r.length&&[1,4,9,16].includes(t.length)){const e=Math.sqrt(t.length),a=this.arrayToMatrix(t,e),o=this.arrayToMatrix(r,e);return a.map(((t,r)=>o[0].map(((e,n)=>t.reduce(((t,e,i)=>t+a[r][i]*o[i][n]),0))))).flat(1)}}}function a(t,r,e){const a=t.createShader(r);if(t.shaderSource(a,e),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))return a;console.log(t.getShaderInfoLog(a)),t.deleteShader(a)}class o{drawF(t){const r=function(t){const r=function(t,r,e){const a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,e),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;console.log(t.getProgramInfoLog(a)),t.deleteProgram(a)}(t,a(t,t.VERTEX_SHADER,"attribute vec2 a_position;\r\nvarying vec4 v_color;\r\nuniform mat3 u_matrix;\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n    v_color = gl_Position;\r\n}"),a(t,t.FRAGMENT_SHADER,"precision mediump float;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}"));return r}(t);t.useProgram(r);const o=t.getAttribLocation(r,"a_position"),n=t.getUniformLocation(r,"u_matrix");!function(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}(t);const i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),this.setGeometry(t),t.enableVertexAttribArray(o);const s=t.FLOAT;t.vertexAttribPointer(o,2,s,!1,0,0);const l=function(t){const r=new e,a=r.identityMatrix(),o=r.projectionMatrix(t.canvas.width,t.canvas.height),n=r.translationMatrix(0,0),i=r.rotationMatrix(0),s=r.scaleMatrix(1,1);let l=r.multiplyMatrices(a,o);return l=r.multiplyMatrices(l,n),l=r.multiplyMatrices(l,i),l=r.multiplyMatrices(l,s),l}(t);t.uniformMatrix3fv(n,!1,l);const c=t.TRIANGLES;t.drawArrays(c,0,18)}setGeometry(t){t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,30,0,0,150,0,150,30,0,30,150,30,0,100,0,30,30,30,30,100,0,100,30,30,60,67,60,30,90,30,90,67,60,67,90]),t.STATIC_DRAW)}}class n extends class{constructor(t){let r=t;if("string"==typeof r&&(r=document.getElementById(r.replace("/^#/",""))),r instanceof HTMLCanvasElement)this.context=r.getContext("webgl");else{if(!(r instanceof WebGLRenderingContext))throw Error("Argument must be valid ID, HTMLCanvasElement or WebGLRenderingContext");this.context=r}}}{constructor(t){super(t),this.options={boldEdges:!1,showValues:!0,valueType:"fixed",showLegend:!0,legendPlaement:"bottom"},this.data=[],this.deleteMe=new o}draw(){this.data.length||(this.fillWithExampleData(),console.warn("No data for chart set. Drawing with example data."))}fillWithExampleData(){this.data=Array(5).map(((t,r)=>({key:`element${r}`,value:Math.floor(10*Math.random()),color:{r:Math.floor(256*Math.random()),g:Math.floor(256*Math.random()),b:Math.floor(256*Math.random()),a:255}})))}set X(t){this.data=this.mapArrayToEntries(t)}set Y(t){if(!this.data)throw Error('Values on "X" axis must be specified before setting "Y" values.');if(this.data.length!==t.length)throw Error('Passed array differs in length from values on "X" axis count.');this.data.forEach(((r,e)=>r.value=t[e]))}set configuration(t){Object.entries(t).forEach((t=>{Object.assign(this.options,{[t[0]]:t[1]})}))}set colors(t){if(!this.data)throw Error('Values on "X" axis must be specified before setting "color" values.');if(this.data.length!==t.length)throw Error('Passed array differs in length from values on "X" axis count.');this.data.forEach(((r,e)=>r.color=t[e]))}setSerieColor(t,r){const e=this.data.find((r=>r.key===t));if(null==e)throw new Error(`Serie with name ${t} doesnt exist.`);e.color=r}mapArrayToEntries(t){return t.map((t=>({key:t,value:0})))}}function i(t,r){if("pie"===t.toLowerCase().trim())return new n(r);throw new Error(`${t} chart is not defined.`)}var s=r.Z;export{s as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxFQUFjQyxHQUM3QyxHQUNTLFFBRERELEVBQUsyRyxjQUFjQyxPQUVuQixPQUFPLElBQUlyRCxFQUFTdEQsR0FFcEIsTUFBTSxJQUFJZ0UsTUFBTSxHQUFHakUsMkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3Bsb3QtbG9naWMvTWF0aFV0aWxzLnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvcGxvdC1sb2dpYy9QbG90VXRpbHMudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9wbG90LWxvZ2ljL0RyYXcudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvc2hhZGVycy9mcmFnbWVudFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9QaWVDaGFydC50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9jb21wb25lbnRzL0NoYXJ0U2VydmFudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hdGhVdGlscyB7XHJcbiAgICBpZGVudGl0eU1hdHJpeCgpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgMSwgMCwgMCxcclxuICAgICAgICAgICAgMCwgMSwgMCxcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgcHJvamVjdGlvbk1hdHJpeCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAyIC8gd2lkdGgsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIC0yIC8gaGVpZ2h0LCAwLFxyXG4gICAgICAgICAgICAtMSwgMSwgMVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICB0cmFuc2xhdGlvbk1hdHJpeCh0eDogbnVtYmVyLCB0eTogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIDEsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIDEsIDAsXHJcbiAgICAgICAgICAgIHR4LCB0eSwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgcm90YXRpb25NYXRyaXgoZGVncmVlczogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGNvbnN0IHJhZGlhbnMgPSBkZWdyZWVzIC8gMTgwICogTWF0aC5QSTtcclxuICAgICAgICBjb25zdCBzID0gTWF0aC5zaW4ocmFkaWFucyk7XHJcbiAgICAgICAgY29uc3QgYyA9IE1hdGguY29zKHJhZGlhbnMpO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGMsIC1zLCAwLFxyXG4gICAgICAgICAgICBzLCBjLCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICBzY2FsZU1hdHJpeChzeDogbnVtYmVyLCBzeTogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHN4LCAwLCAwLFxyXG4gICAgICAgICAgICAwLCBzeSwgMCxcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXJyYXlUb01hdHJpeChhcnI6IG51bWJlcltdLCBzaXplOiBudW1iZXIpOiBudW1iZXJbXVtdIHtcclxuICAgICAgICBjb25zdCByZXM6IG51bWJlcltdW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gc2l6ZSlcclxuICAgICAgICAgICAgcmVzLnB1c2goYXJyLnNsaWNlKGksIGkgKyBzaXplKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyB1c2UgbWF0aC5qcyBpZiBuZWVkZWQgLSBjb2RlIGJ5IEphbiBUdXJvxYhcclxuICAgIG11bHRpcGx5TWF0cmljZXMoRjogbnVtYmVyW10sIFM6IG51bWJlcltdKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGlmIChGLmxlbmd0aCA9PT0gUy5sZW5ndGggJiYgWzEsIDQsIDksIDE2XS5pbmNsdWRlcyhGLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcG93ID0gTWF0aC5zcXJ0KEYubGVuZ3RoKTtcclxuICAgICAgICAgICAgY29uc3QgQSA9IHRoaXMuYXJyYXlUb01hdHJpeChGLCBwb3cpO1xyXG4gICAgICAgICAgICBjb25zdCBCID0gdGhpcy5hcnJheVRvTWF0cml4KFMsIHBvdyk7XHJcbiAgICAgICAgICAgIHJldHVybiBBLm1hcCgocm93LCBpKSA9PlxyXG4gICAgICAgICAgICAgICAgQlswXS5tYXAoKF8sIGopID0+XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LnJlZHVjZSgoYWNjLCBfLCBuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2MgKyBBW2ldW25dICogQltuXVtqXSwgMFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKS5mbGF0KDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB2ZXJ0ZXhTaGFkZXJTdHJpbmcgZnJvbSAnLi4vc2hhZGVycy92ZXJ0ZXhTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCBmcmFnbWVudFNoYWRlclN0cmluZyBmcm9tICcuLi9zaGFkZXJzL2ZyYWdtZW50U2hhZGVyLmdsc2wnO1xyXG5pbXBvcnQgTWF0aFV0aWxzIGZyb20gJy4vTWF0aFV0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgY29uc3QgdmVydGV4U2hhZGVyU291cmNlID0gdmVydGV4U2hhZGVyU3RyaW5nO1xyXG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBmcmFnbWVudFNoYWRlclN0cmluZztcclxuICAgIGNvbnN0IHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdmVydGV4U2hhZGVyU291cmNlKTtcclxuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50U2hhZGVyU291cmNlKTtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcclxuICAgIHJldHVybiBwcm9ncmFtO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVZpZXcoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuICAgIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMCk7XHJcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBudW1iZXJbXSB7XHJcbiAgICBjb25zdCBkcmF3VXRpbHM6IE1hdGhVdGlscyA9IG5ldyBNYXRoVXRpbHMoKTtcclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uWCA9IDA7XHJcbiAgICBjb25zdCB0cmFuc2xhdGlvblkgPSAwO1xyXG4gICAgY29uc3Qgcm90YXRpb25JbkRlZ3JlZXMgPSAwO1xyXG4gICAgY29uc3Qgc2NhbGVYID0gMTtcclxuICAgIGNvbnN0IHNjYWxlWSA9IDE7XHJcblxyXG4gICAgY29uc3QgaWRlbnRpdHlNYXRyaXggPSBkcmF3VXRpbHMuaWRlbnRpdHlNYXRyaXgoKTtcclxuICAgIGNvbnN0IHByb2plY3Rpb25NYXRyaXggPSBkcmF3VXRpbHMucHJvamVjdGlvbk1hdHJpeChnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgY29uc3QgdHJhbnNsYXRpb25NYXRyaXggPSBkcmF3VXRpbHMudHJhbnNsYXRpb25NYXRyaXgodHJhbnNsYXRpb25YLCB0cmFuc2xhdGlvblkpO1xyXG4gICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBkcmF3VXRpbHMucm90YXRpb25NYXRyaXgocm90YXRpb25JbkRlZ3JlZXMpO1xyXG4gICAgY29uc3Qgc2NhbGVNYXRyaXggPSBkcmF3VXRpbHMuc2NhbGVNYXRyaXgoc2NhbGVYLCBzY2FsZVkpO1xyXG5cclxuICAgIGxldCBtYXRyaXggPSBkcmF3VXRpbHMubXVsdGlwbHlNYXRyaWNlcyhpZGVudGl0eU1hdHJpeCwgcHJvamVjdGlvbk1hdHJpeCk7XHJcbiAgICBtYXRyaXggPSBkcmF3VXRpbHMubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsIHRyYW5zbGF0aW9uTWF0cml4KTtcclxuICAgIG1hdHJpeCA9IGRyYXdVdGlscy5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgcm90YXRpb25NYXRyaXgpO1xyXG4gICAgbWF0cml4ID0gZHJhd1V0aWxzLm11bHRpcGx5TWF0cmljZXMobWF0cml4LCBzY2FsZU1hdHJpeCk7XHJcbiAgICByZXR1cm4gbWF0cml4O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdHlwZTogbnVtYmVyLCBzb3VyY2U6IHN0cmluZyk6IFdlYkdMU2hhZGVyIHtcclxuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcclxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XHJcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgY29uc3Qgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcclxuICAgIGlmIChzdWNjZXNzKSByZXR1cm4gc2hhZGVyO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLCBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXIpOiBXZWJHTFByb2dyYW0gfCBudWxsIHtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICBjb25zdCBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2VzcykgcmV0dXJuIHByb2dyYW07XHJcblxyXG4gICAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcclxufSIsImltcG9ydCB7IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cywgZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgsIHByZXBhcmVWaWV3IH0gZnJvbSBcIi4vUGxvdFV0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3IHtcclxuICAgIGRyYXdGKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfcG9zaXRpb24nKTtcclxuICAgICAgICBjb25zdCBtYXRyaXhVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfbWF0cml4JylcclxuXHJcbiAgICAgICAgcHJlcGFyZVZpZXcoZ2wpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NpdGlvbkJ1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5zZXRHZW9tZXRyeShnbCk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpemUgPSAyOyAgICAgICAgICAgICAvLyAyIGNvbXBvbmVudHMgcGVyIGl0ZXJhdGlvblxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBnbC5GTE9BVDsgICAgICAvLyB0eXBlIG9mIGNvbXBvbmVudCAoMzJiaXQgZmxvYXQpXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gZmFsc2U7ICAgIC8vIGRvbid0IG5vcm1hbGl6ZSBkYXRhXHJcbiAgICAgICAgY29uc3Qgc3RyaWRlID0gMCAgICAgICAgICAgIC8vIG1vdmUgc2l6ZSAqIHNpemVvZih0eXBlKSBiaXRzIHRvIGdldCBuZXh0IHBvc2l0aW9uXHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gMCAgICAgICAgICAgIC8vIHN0YXJ0cyBhdCB0aGF0IGJpdFxyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplLCBzdHJpZGUsIG9mZnNldCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IGdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsKTtcclxuICAgICAgICBnbC51bmlmb3JtTWF0cml4M2Z2KG1hdHJpeFVuaWZvcm1Mb2NhdGlvbiwgZmFsc2UsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZVR5cGUgPSBnbC5UUklBTkdMRVM7XHJcbiAgICAgICAgY29uc3QgY291bnQgPSAxODtcclxuICAgICAgICBnbC5kcmF3QXJyYXlzKHByaW1pdGl2ZVR5cGUsIG9mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldEdlb21ldHJ5KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKFxyXG4gICAgICAgICAgICBnbC5BUlJBWV9CVUZGRVIsXHJcbiAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgICAgICAgICAgICAgLy8gbGVmdCBjb2x1bW5cclxuICAgICAgICAgICAgICAgIDAsIDAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMCxcclxuICAgICAgICAgICAgICAgIDAsIDE1MCxcclxuICAgICAgICAgICAgICAgIDAsIDE1MCxcclxuICAgICAgICAgICAgICAgIDMwLCAwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDE1MCxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0b3AgcnVuZ1xyXG4gICAgICAgICAgICAgICAgMzAsIDAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMzAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMzAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDMwLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIG1pZGRsZSBydW5nXHJcbiAgICAgICAgICAgICAgICAzMCwgNjAsXHJcbiAgICAgICAgICAgICAgICA2NywgNjAsXHJcbiAgICAgICAgICAgICAgICAzMCwgOTAsXHJcbiAgICAgICAgICAgICAgICAzMCwgOTAsXHJcbiAgICAgICAgICAgICAgICA2NywgNjAsXHJcbiAgICAgICAgICAgICAgICA2NywgOTAsXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247XFxyXFxudmFyeWluZyB2ZWM0IHZfY29sb3I7XFxyXFxudW5pZm9ybSBtYXQzIHVfbWF0cml4O1xcclxcbnZvaWQgbWFpbigpIHtcXHJcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxKTtcXHJcXG4gICAgdl9jb2xvciA9IGdsX1Bvc2l0aW9uO1xcclxcbn1cIiIsImV4cG9ydCBkZWZhdWx0IFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxyXFxudmFyeWluZyB2ZWM0IHZfY29sb3I7XFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9GcmFnQ29sb3IgPSB2X2NvbG9yO1xcclxcbn1cIiIsImltcG9ydCB7IENoYXJ0IH0gZnJvbSBcIi4vQ2hhcnRcIjtcclxuaW1wb3J0IERyYXcgZnJvbSBcIi4uL3Bsb3QtbG9naWMvRHJhd1wiO1xyXG5pbXBvcnQgeyBDb2xvciwgQ29udGV4dFNvdXJjZSB9IGZyb20gXCIuLi9tb2RlbHNcIjtcclxuXHJcbmludGVyZmFjZSBFbnRyeSB7XHJcbiAgICBrZXk6IHN0cmluZztcclxuICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICBjb2xvcj86IENvbG9yO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ2hhcnRPcHRpb25zIHtcclxuICAgIGJvbGRFZGdlczogYm9vbGVhbjtcclxuICAgIHNob3dWYWx1ZXM6IGJvb2xlYW47XHJcbiAgICB2YWx1ZVR5cGU6ICdmaXhlZCcgfCAncHJlY2VudGFnZSc7XHJcbiAgICBzaG93TGVnZW5kOiBib29sZWFuO1xyXG4gICAgbGVnZW5kUGxhZW1lbnQ6ICd0b3AnIHwgJ2JvdHRvbScgfCAnbGVmdCcgfCAncmlnaHQnO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGllQ2hhcnQgZXh0ZW5kcyBDaGFydCB7XHJcblxyXG4gICAgcHVibGljIGRlbGV0ZU1lO1xyXG5cclxuICAgIHByaXZhdGUgZGF0YTogRW50cnlbXTtcclxuXHJcbiAgICBwcml2YXRlIG9wdGlvbnM6IENoYXJ0T3B0aW9ucztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IENvbnRleHRTb3VyY2UpIHtcclxuICAgICAgICBzdXBlcihzb3VyY2UpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYm9sZEVkZ2VzOiBmYWxzZSxcclxuICAgICAgICAgICAgc2hvd1ZhbHVlczogdHJ1ZSxcclxuICAgICAgICAgICAgdmFsdWVUeXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICBzaG93TGVnZW5kOiB0cnVlLFxyXG4gICAgICAgICAgICBsZWdlbmRQbGFlbWVudDogJ2JvdHRvbSdcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5kZWxldGVNZSA9IG5ldyBEcmF3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbFdpdGhFeGFtcGxlRGF0YSgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGRhdGEgZm9yIGNoYXJ0IHNldC4gRHJhd2luZyB3aXRoIGV4YW1wbGUgZGF0YS4nKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbGxXaXRoRXhhbXBsZURhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gQXJyYXkoNSkubWFwKChlLCBpKSA9PiAoe1xyXG4gICAgICAgICAgICBrZXk6IGBlbGVtZW50JHtpfWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCksXHJcbiAgICAgICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgICAgICByOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpLFxyXG4gICAgICAgICAgICAgICAgZzogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KSxcclxuICAgICAgICAgICAgICAgIGI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NiksXHJcbiAgICAgICAgICAgICAgICBhOiAyNTVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFgodmFsdWVzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHRoaXMubWFwQXJyYXlUb0VudHJpZXModmFsdWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFkodmFsdWVzOiBudW1iZXJbXSkge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhKSB0aHJvdyBFcnJvcignVmFsdWVzIG9uIFwiWFwiIGF4aXMgbXVzdCBiZSBzcGVjaWZpZWQgYmVmb3JlIHNldHRpbmcgXCJZXCIgdmFsdWVzLicpXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggIT09IHZhbHVlcy5sZW5ndGgpIHRocm93IEVycm9yKCdQYXNzZWQgYXJyYXkgZGlmZmVycyBpbiBsZW5ndGggZnJvbSB2YWx1ZXMgb24gXCJYXCIgYXhpcyBjb3VudC4nKVxyXG4gICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IGVudHJ5LnZhbHVlID0gdmFsdWVzW2luZGV4XSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGNvbmZpZ3VyYXRpb24oY29uZmlnOiBQYXJ0aWFsPENoYXJ0T3B0aW9ucz4pIHtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhjb25maWcpLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCB7IFtwYWlyWzBdXTogcGFpclsxXSB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgY29sb3JzKGNvbG9yczogQ29sb3JbXSkge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhKSB0aHJvdyBFcnJvcignVmFsdWVzIG9uIFwiWFwiIGF4aXMgbXVzdCBiZSBzcGVjaWZpZWQgYmVmb3JlIHNldHRpbmcgXCJjb2xvclwiIHZhbHVlcy4nKVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoICE9PSBjb2xvcnMubGVuZ3RoKSB0aHJvdyBFcnJvcignUGFzc2VkIGFycmF5IGRpZmZlcnMgaW4gbGVuZ3RoIGZyb20gdmFsdWVzIG9uIFwiWFwiIGF4aXMgY291bnQuJylcclxuICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiBlbnRyeS5jb2xvciA9IGNvbG9yc1tpbmRleF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTZXJpZUNvbG9yKHNlcmllOiBzdHJpbmcsIGNvbG9yOiBDb2xvcikge1xyXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5kYXRhLmZpbmQoZW50cnkgPT4gZW50cnkua2V5ID09PSBzZXJpZSk7XHJcbiAgICAgICAgaWYgKGVudHJ5ID09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKGBTZXJpZSB3aXRoIG5hbWUgJHtzZXJpZX0gZG9lc250IGV4aXN0LmApO1xyXG4gICAgICAgIGVudHJ5LmNvbG9yID0gY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYXBBcnJheVRvRW50cmllcyhhcnJheTogc3RyaW5nW10pOiBFbnRyeVtdIHtcclxuICAgICAgICByZXR1cm4gYXJyYXkubWFwKChrZXkpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleToga2V5LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENoYXJ0IHtcclxuXHJcbiAgICBjb250ZXh0OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBDb250ZXh0U291cmNlKSB7XHJcbiAgICAgICAgbGV0IGFuYWx5emVkRWxlbWVudCA9IHNvdXJjZTtcclxuICAgICAgICBpZiAodHlwZW9mIGFuYWx5emVkRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgYW5hbHl6ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5hbHl6ZWRFbGVtZW50LnJlcGxhY2UoJy9eIy8nLCAnJykpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYW5hbHl6ZWRFbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gYW5hbHl6ZWRFbGVtZW50LmdldENvbnRleHQoJ3dlYmdsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFuYWx5emVkRWxlbWVudCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBhbmFseXplZEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhyb3cgRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgdmFsaWQgSUQsIEhUTUxDYW52YXNFbGVtZW50IG9yIFdlYkdMUmVuZGVyaW5nQ29udGV4dCcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCBYKHZhbHVlOiBzdHJpbmdbXSB8IG51bWJlcltdKTtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXQgWSh2YWx1ZTogbnVtYmVyW10pO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHNldCBjb25maWd1cmF0aW9uKGNvbmZpZzogdW5rbm93bik7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZHJhdygpOiB2b2lkO1xyXG59IiwiaW1wb3J0IHsgQ29udGV4dFNvdXJjZSB9IGZyb20gXCIuLi9tb2RlbHNcIjtcclxuaW1wb3J0IHsgUGllQ2hhcnQgfSBmcm9tIFwiLi9QaWVDaGFydFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VydmVDaGFydCh0eXBlOiBzdHJpbmcsIHNvdXJjZTogQ29udGV4dFNvdXJjZSkge1xyXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkudHJpbSgpKSB7XHJcbiAgICAgICAgY2FzZSBcInBpZVwiOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBpZUNoYXJ0KHNvdXJjZSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3R5cGV9IGNoYXJ0IGlzIG5vdCBkZWZpbmVkLmApXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJNYXRoVXRpbHMiLCJpZGVudGl0eU1hdHJpeCIsInByb2plY3Rpb25NYXRyaXgiLCJ3aWR0aCIsImhlaWdodCIsInRyYW5zbGF0aW9uTWF0cml4IiwidHgiLCJ0eSIsInJvdGF0aW9uTWF0cml4IiwiZGVncmVlcyIsInJhZGlhbnMiLCJNYXRoIiwiUEkiLCJzIiwic2luIiwiYyIsImNvcyIsInNjYWxlTWF0cml4Iiwic3giLCJzeSIsImFycmF5VG9NYXRyaXgiLCJhcnIiLCJzaXplIiwicmVzIiwiaSIsImxlbmd0aCIsInB1c2giLCJzbGljZSIsIm11bHRpcGx5TWF0cmljZXMiLCJGIiwiUyIsImluY2x1ZGVzIiwicG93Iiwic3FydCIsIkEiLCJ0aGlzIiwiQiIsIm1hcCIsInJvdyIsIl8iLCJqIiwicmVkdWNlIiwiYWNjIiwibiIsImZsYXQiLCJjcmVhdGVTaGFkZXIiLCJnbCIsInR5cGUiLCJzb3VyY2UiLCJzaGFkZXIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsIkRyYXciLCJkcmF3RiIsInByb2dyYW0iLCJ2ZXJ0ZXhTaGFkZXIiLCJmcmFnbWVudFNoYWRlciIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMiLCJ1c2VQcm9ncmFtIiwicG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwibWF0cml4VW5pZm9ybUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidmlld3BvcnQiLCJjYW52YXMiLCJjbGVhckNvbG9yIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwicHJlcGFyZVZpZXciLCJwb3NpdGlvbkJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJzZXRHZW9tZXRyeSIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiRkxPQVQiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwibWF0cml4IiwiZHJhd1V0aWxzIiwiZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgiLCJ1bmlmb3JtTWF0cml4M2Z2IiwicHJpbWl0aXZlVHlwZSIsIlRSSUFOR0xFUyIsImRyYXdBcnJheXMiLCJidWZmZXJEYXRhIiwiRmxvYXQzMkFycmF5IiwiU1RBVElDX0RSQVciLCJQaWVDaGFydCIsImNvbnN0cnVjdG9yIiwiYW5hbHl6ZWRFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJlcGxhY2UiLCJIVE1MQ2FudmFzRWxlbWVudCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiV2ViR0xSZW5kZXJpbmdDb250ZXh0IiwiRXJyb3IiLCJzdXBlciIsIm9wdGlvbnMiLCJib2xkRWRnZXMiLCJzaG93VmFsdWVzIiwidmFsdWVUeXBlIiwic2hvd0xlZ2VuZCIsImxlZ2VuZFBsYWVtZW50IiwiZGF0YSIsImRlbGV0ZU1lIiwiZHJhdyIsImZpbGxXaXRoRXhhbXBsZURhdGEiLCJ3YXJuIiwiQXJyYXkiLCJlIiwidmFsdWUiLCJmbG9vciIsInJhbmRvbSIsImNvbG9yIiwiciIsImciLCJiIiwiYSIsIlgiLCJ2YWx1ZXMiLCJtYXBBcnJheVRvRW50cmllcyIsIlkiLCJmb3JFYWNoIiwiZW50cnkiLCJpbmRleCIsImNvbmZpZ3VyYXRpb24iLCJjb25maWciLCJlbnRyaWVzIiwicGFpciIsImFzc2lnbiIsImNvbG9ycyIsInNldFNlcmllQ29sb3IiLCJzZXJpZSIsImZpbmQiLCJ1bmRlZmluZWQiLCJhcnJheSIsInNlcnZlQ2hhcnQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9