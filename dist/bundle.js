var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{Z:()=>d});class r{identityMatrix(){return[1,0,0,0,1,0,0,0,1]}projectionMatrix(t,e){return[2/t,0,0,0,2/e,0,-1,-1,1]}translationMatrix(t,e){return[1,0,0,0,1,0,t,e,1]}rotationMatrix(t){const e=t/180*Math.PI,r=Math.sin(e),o=Math.cos(e);return[o,-r,0,r,o,0,0,0,1]}scaleMatrix(t,e){return[t,0,0,0,e,0,0,0,1]}arrayToMatrix(t,e){const r=[];for(let o=0;o<t.length;o+=e)r.push(t.slice(o,o+e));return r}multiplyMatrices(t,e){if(t.length===e.length&&[1,4,9,16].includes(t.length)){const r=Math.sqrt(t.length),o=this.arrayToMatrix(t,r),i=this.arrayToMatrix(e,r);return o.map(((t,e)=>i[0].map(((r,n)=>t.reduce(((t,r,a)=>t+o[e][a]*i[a][n]),0))))).flat(1)}}}function o(t,e,r){const o=function(t,e,r){const o=t.createProgram();if(t.attachShader(o,e),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS))return o;console.log(t.getProgramInfoLog(o)),t.deleteProgram(o)}(t,a(t,t.VERTEX_SHADER,e),a(t,t.FRAGMENT_SHADER,r));return o}function i(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}function n(t){const e=new r,o=e.identityMatrix(),i=e.projectionMatrix(t.canvas.width,t.canvas.height),n=e.translationMatrix(0,0),a=e.rotationMatrix(0),s=e.scaleMatrix(1,1);let c=e.multiplyMatrices(o,i);return c=e.multiplyMatrices(c,n),c=e.multiplyMatrices(c,a),c=e.multiplyMatrices(c,s),c}function a(t,e,r){const o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;console.log(t.getShaderInfoLog(o)),t.deleteShader(o)}const s="attribute vec2 a_position;\r\nuniform mat3 u_matrix;\r\n\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n}",c="precision mediump float;\r\nuniform vec4 u_color;\r\n\r\nvoid main() {\r\n    gl_FragColor = u_color;\r\n}";class l{getTickInfo(t,e){const r=t/e,o=Math.pow(10,Math.floor(Math.log10(r))),i=r/o,n=(i<10?[1,1.5,2,3,5,7,10].find((t=>t>i)):10)*o;return{tickHeight:n,tickCount:Math.ceil(t/n)}}drawLines(t,e){const r=o(t,s,c),a=t.getAttribLocation(r,"a_position"),l=t.getUniformLocation(r,"u_color"),h=t.getUniformLocation(r,"u_matrix"),u=n(t),f=e[0],d=Math.max(...f.map(Math.abs)),m=this.getTickInfo(d,8),g=t.canvas.width,v=t.canvas.height,p=Math.floor(Math.min(g,v)/100),b=(v-2*p)/7,A=[],x=p,_=g-p;for(let t=1;t<=m.tickCount;t++){const e=t*b;A.push(x,e,_,e)}console.log(A);const R=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Int16Array(A),t.STATIC_DRAW),i(t),t.useProgram(r),t.uniform4f(l,.7,.7,.7,1),t.uniformMatrix3fv(h,!1,u),t.useProgram(r),t.enableVertexAttribArray(a),t.bindBuffer(t.ARRAY_BUFFER,R),t.vertexAttribPointer(a,2,t.SHORT,!1,0,0),t.drawArrays(t.LINES,0,A.length/2),m.tickCount*m.tickHeight}drawBars(t,e,r){const i=o(t,s,c),a=t.getAttribLocation(i,"a_position"),l=t.getUniformLocation(i,"u_color"),h=t.getUniformLocation(i,"u_matrix"),u=n(t),f=t.canvas.width,d=t.canvas.height,m=Math.floor(Math.min(f,d)/100),g=f-2*m,v=(d-2*m)/r,p=[],b=e[0].length,A=g/b;for(let t=0;t<b;t++){const r=m+e[0][t]*v,o=m+A*t+A/5,i=m+A*(t+1)-A/5;p.push(o,m,o,r,i,r),p.push(o,m,i,m,i,r)}const x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,new Float32Array(p),t.STATIC_DRAW),t.useProgram(i),t.uniformMatrix3fv(h,!1,u),t.enableVertexAttribArray(a),t.bindBuffer(t.ARRAY_BUFFER,x);for(let e=0;e<b;e++)t.uniform4f(l,Math.random(),Math.random(),Math.random(),1),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,12*e*Float32Array.BYTES_PER_ELEMENT),t.drawArrays(t.TRIANGLES,0,12)}drawRect(t){const e=o(t,"attribute vec2 a_position;\r\nuniform vec4 u_color;\r\nuniform mat3 u_matrix;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n    v_color = u_color;\r\n}","precision mediump float;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}"),r=t.getAttribLocation(e,"a_position"),a=t.getUniformLocation(e,"u_color"),s=t.getUniformLocation(e,"u_matrix"),c=n(t),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Int16Array([0,0,0,50,50,50,0,0,50,0,50,50]),t.STATIC_DRAW),i(t),t.useProgram(e),t.uniformMatrix3fv(s,!1,c),t.enableVertexAttribArray(r),t.uniform4f(a,.5,.5,.5,1),t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(r,2,t.SHORT,!1,0,0),t.drawArrays(t.TRIANGLES,0,3),t.enableVertexAttribArray(r),t.uniform4f(a,.1,.5,.9,1),t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(r,2,t.SHORT,!1,0,6*Int16Array.BYTES_PER_ELEMENT),t.drawArrays(t.TRIANGLES,0,3)}drawF(t){const e=o(t,"attribute vec2 a_position;\r\nvarying vec4 v_color;\r\nuniform mat3 u_matrix;\r\nvoid main() {\r\n    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n    v_color = gl_Position;\r\n}","precision mediump float;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}");t.useProgram(e);const r=t.getAttribLocation(e,"a_position"),a=t.getUniformLocation(e,"u_matrix");i(t);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),this.setGeometry(t),t.enableVertexAttribArray(r);const c=t.FLOAT;t.vertexAttribPointer(r,2,c,!1,0,0);const l=n(t);t.uniformMatrix3fv(a,!1,l);const h=t.TRIANGLES;t.drawArrays(h,0,18)}setGeometry(t){t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,30,0,0,150,0,150,30,0,30,150,30,0,100,0,30,30,30,30,100,0,100,30,30,60,67,60,30,90,30,90,67,60,67,90]),t.STATIC_DRAW)}}class h{constructor(t){let e=t;if("string"==typeof e&&(e=document.getElementById(e.replace("/^#/",""))),e instanceof HTMLCanvasElement)this.context=e.getContext("webgl");else{if(!(e instanceof WebGLRenderingContext))throw Error("Argument must be valid ID, HTMLCanvasElement or WebGLRenderingContext");this.context=e}this.initializeCanvas()}initializeCanvas(){this.resizeObserver=new ResizeObserver((t=>this.onResizeCallback(t)));const{canvas:t}=this.context;try{this.resizeObserver.observe(t,{box:"device-pixel-content-box"})}catch(e){this.resizeObserver.observe(t,{box:"content-box"})}}onResizeCallback(t){t.forEach((t=>{const e=t.devicePixelContentBoxSize?1:window.devicePixelRatio,{inlineSize:r,blockSize:o}=this.getWidthAndHeight(t);console.log(`Resize to ${r} x ${o}, dpr ${e}`)}))}getWidthAndHeight(t){return t.devicePixelContentBoxSize?t.devicePixelContentBoxSize[0]:t.contentBoxSize?t.contentBoxSize[0]:{inlineSize:t.contentRect.width,blockSize:t.contentRect.height}}setNewCanvasSize(t,e,r){const o=Math.round(t*r),i=Math.round(e*r);this.displayWidth=o,this.displayHeight=i}}class u extends h{constructor(t){super(t),this.optionsForChart={title:"Untitled",showTitle:!0,showLegend:!1},this.optionsForSeries=[]}set X(t){this.labels=t}set Y(t){const{length:e}=this.labels;if(!e)throw Error('Values on "X" axis must be specified before setting "Y" values.');const r=t.map((t=>this.sliceOrFill(t,e)));this.values=r;let o=1;this.optionsForSeries=this.values.map((()=>this.getDefaultSerieObject(o++)))}set options(t){const e=Object.keys(this.optionsForChart);Object.entries(t).forEach((t=>{const r=t[0];if(e.includes(r)){const e=t[1];this.optionsForChart[r]=e}}))}getDefaultSerieObject(t){return{serieName:`serie${t}`,color:{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:255},showLables:!1,showOnLegend:!1,edgeThickness:0}}updateSerieOptions(t,e){const r=Object.keys(t);Object.entries(e).forEach((e=>{const o=e[0];if(r.includes(o)){const r=e[1];t[o]=r}}))}setSerieOptions(t,e){e&&e.length?e.forEach((e=>{const r=this.optionsForSeries.find((t=>t.serieName===e));r?this.updateSerieOptions(r,t):console.warn(`Serie with name ${e} not found.`)})):this.optionsForSeries.forEach((e=>this.updateSerieOptions(e,t))),console.log(this.optionsForSeries)}sliceOrFill(t,e,r){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);if(t.length<e)for(;t.length!==e;)t.push(null!=r?r:0);return t}set configuration(t){throw new Error("Method not implemented.")}draw(){console.log(this.labels,this.values);const t=new l,e=t.drawLines(this.context,this.values);t.drawBars(this.context,this.values,e)}}class f extends h{constructor(t){super(t),this.options={boldEdges:!1,showValues:!0,valueType:"fixed",showLegend:!0,legendPlaement:"bottom"},this.data=[],this.deleteMe=new l}draw(){this.data.length||(this.fillWithExampleData(),console.warn("No data for chart set. Drawing with example data."))}fillWithExampleData(){this.data=Array(5).map(((t,e)=>({key:`element${e}`,value:Math.floor(10*Math.random()),color:{r:Math.floor(256*Math.random()),g:Math.floor(256*Math.random()),b:Math.floor(256*Math.random()),a:255}})))}set X(t){this.data=this.mapArrayToEntries(t)}set Y(t){if(!this.data)throw Error('Values on "X" axis must be specified before setting "Y" values.');if(this.data.length!==t.length)throw Error('Passed array differs in length from values on "X" axis count.');this.data.forEach(((e,r)=>e.value=t[r]))}set configuration(t){Object.entries(t).forEach((t=>{Object.assign(this.options,{[t[0]]:t[1]})}))}set colors(t){if(!this.data)throw Error('Values on "X" axis must be specified before setting "color" values.');if(this.data.length!==t.length)throw Error('Passed array differs in length from values on "X" axis count.');this.data.forEach(((e,r)=>e.color=t[r]))}setSerieColor(t,e){const r=this.data.find((e=>e.key===t));if(null==r)throw new Error(`Serie with name ${t} doesnt exist.`);r.color=e}mapArrayToEntries(t){return t.map((t=>({key:t,value:0})))}}function d(t,e){switch(t.toLowerCase().trim()){case"pie":return new f(e);case"bar":return new u(e);default:throw new Error(`${t} chart is not defined.`)}}var m=e.Z;export{m as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixPQUFPeVAsT0FBTzdNLEtBQUtzSyxRQUFTLENBQUUsQ0FBQ0UsRUFBSyxJQUFLQSxFQUFLLFFBSTNDc0MsV0FBT0EsR0FDZCxJQUFLOU0sS0FBS3VNLEtBQU0sTUFBTXZFLE1BQU0sdUVBQzVCLEdBQUloSSxLQUFLdU0sS0FBS2pOLFNBQVd3TixFQUFPeE4sT0FBUSxNQUFNMEksTUFBTSxpRUFDcERoSSxLQUFLdU0sS0FBSzlELFNBQVEsQ0FBQ0MsRUFBT2tFLElBQVVsRSxFQUFNa0MsTUFBUWtDLEVBQU9GLEtBR3RERyxjQUFjM0ksRUFBZXdHLEdBQ2hDLE1BQU1sQyxFQUFRMUksS0FBS3VNLEtBQUs5SSxNQUFLaUYsR0FBU0EsRUFBTXhMLE1BQVFrSCxJQUNwRCxHQUFhNEksTUFBVHRFLEVBQW9CLE1BQU0sSUFBSVYsTUFBTSxtQkFBbUI1RCxtQkFDM0RzRSxFQUFNa0MsTUFBUUEsRUFHVitCLGtCQUFrQmYsR0FDdEIsT0FBT0EsRUFBTTFMLEtBQUtoRCxJQUNQLENBQ0hBLElBQUtBLEVBQ0x1TixNQUFPLE9DdEZSLFNBQVN3QyxFQUFXM0ssRUFBY0MsR0FDN0MsT0FBUUQsRUFBSzRLLGNBQWNDLFFBQ3ZCLElBQUssTUFDRCxPQUFPLElBQUlqQixFQUFTM0osR0FDeEIsSUFBSyxNQUNELE9BQU8sSUFBSWlILEVBQVNqSCxHQUN4QixRQUNJLE1BQU0sSUFBSXlGLE1BQU0sR0FBRzFGLDRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9wbG90LWxvZ2ljL01hdGhVdGlscy50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3Bsb3QtbG9naWMvUGxvdFV0aWxzLnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvc2hhZGVycy92ZXJ0ZXhTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3NoYWRlcnMvZXhhbXBsZUxpbmVzL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvc2hhZGVycy9leGFtcGxlTGluZXMvZnJhZ21lbnRTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3Bsb3QtbG9naWMvRHJhdy50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL3NoYWRlcnMvZXhhbXBsZVR3b1JlY3RhbmdsZXMvdmVydGV4U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL2V4YW1wbGVUd29SZWN0YW5nbGVzL2ZyYWdtZW50U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9zaGFkZXJzL2ZyYWdtZW50U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9jb21wb25lbnRzL0NoYXJ0LnRzIiwid2VicGFjazovL0Bicnovd2ViZ2wtY2hhcnQvLi9zcmMvY29tcG9uZW50cy9CYXJDaGFydC50cyIsIndlYnBhY2s6Ly9AYnJ6L3dlYmdsLWNoYXJ0Ly4vc3JjL2NvbXBvbmVudHMvUGllQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vQGJyei93ZWJnbC1jaGFydC8uL3NyYy9jb21wb25lbnRzL0NoYXJ0U2VydmFudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hdGhVdGlscyB7XHJcbiAgICBpZGVudGl0eU1hdHJpeCgpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgMSwgMCwgMCxcclxuICAgICAgICAgICAgMCwgMSwgMCxcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgLy8gUnlzb3dhbmllIG9kIGRvbG5lZ28gbGV3ZWdvIHJvZ3UuXHJcbiAgICAvLyBDaGPEhWMgcnlzb3dhxIcgb2QgZ8Ozcm5lZ28gbGV3ZWdvLFxyXG4gICAgLy8gem1pZW5pxIcgbmEgLTIvaGVpZ2h0IG9yYXogKzFcclxuICAgIHByb2plY3Rpb25NYXRyaXgod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgMiAvIHdpZHRoLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAyIC8gaGVpZ2h0LCAwLFxyXG4gICAgICAgICAgICAtMSwgLTEsIDFcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgdHJhbnNsYXRpb25NYXRyaXgodHg6IG51bWJlciwgdHk6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAxLCAwLFxyXG4gICAgICAgICAgICB0eCwgdHksIDEsXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIHJvdGF0aW9uTWF0cml4KGRlZ3JlZXM6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICBjb25zdCByYWRpYW5zID0gZGVncmVlcyAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICAgICAgY29uc3QgcyA9IE1hdGguc2luKHJhZGlhbnMpO1xyXG4gICAgICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhyYWRpYW5zKTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBjLCAtcywgMCxcclxuICAgICAgICAgICAgcywgYywgMCxcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgc2NhbGVNYXRyaXgoc3g6IG51bWJlciwgc3k6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBzeCwgMCwgMCxcclxuICAgICAgICAgICAgMCwgc3ksIDAsXHJcbiAgICAgICAgICAgIDAsIDAsIDEsXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFycmF5VG9NYXRyaXgoYXJyOiBudW1iZXJbXSwgc2l6ZTogbnVtYmVyKTogbnVtYmVyW11bXSB7XHJcbiAgICAgICAgY29uc3QgcmVzOiBudW1iZXJbXVtdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpICs9IHNpemUpXHJcbiAgICAgICAgICAgIHJlcy5wdXNoKGFyci5zbGljZShpLCBpICsgc2l6ZSkpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdXNlIG1hdGguanMgaWYgbmVlZGVkIC0gY29kZSBieSBKYW4gVHVyb8WIXHJcbiAgICBtdWx0aXBseU1hdHJpY2VzKEY6IG51bWJlcltdLCBTOiBudW1iZXJbXSk6IG51bWJlcltdIHtcclxuICAgICAgICBpZiAoRi5sZW5ndGggPT09IFMubGVuZ3RoICYmIFsxLCA0LCA5LCAxNl0uaW5jbHVkZXMoRi5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvdyA9IE1hdGguc3FydChGLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IEEgPSB0aGlzLmFycmF5VG9NYXRyaXgoRiwgcG93KTtcclxuICAgICAgICAgICAgY29uc3QgQiA9IHRoaXMuYXJyYXlUb01hdHJpeChTLCBwb3cpO1xyXG4gICAgICAgICAgICByZXR1cm4gQS5tYXAoKHJvdywgaSkgPT5cclxuICAgICAgICAgICAgICAgIEJbMF0ubWFwKChfLCBqKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5yZWR1Y2UoKGFjYywgXywgbikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjICsgQVtpXVtuXSAqIEJbbl1bal0sIDBcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICkuZmxhdCgxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTWF0aFV0aWxzIGZyb20gJy4vTWF0aFV0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdnM6IHN0cmluZywgZnM6IHN0cmluZyk6IFdlYkdMUHJvZ3JhbSB7XHJcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHZzKTtcclxuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZzKTtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcclxuICAgIHJldHVybiBwcm9ncmFtO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVZpZXcoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IHZvaWQge1xyXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuICAgIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMCk7XHJcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBudW1iZXJbXSB7XHJcbiAgICBjb25zdCBkcmF3VXRpbHM6IE1hdGhVdGlscyA9IG5ldyBNYXRoVXRpbHMoKTtcclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uWCA9IDA7XHJcbiAgICBjb25zdCB0cmFuc2xhdGlvblkgPSAwO1xyXG4gICAgY29uc3Qgcm90YXRpb25JbkRlZ3JlZXMgPSAwO1xyXG4gICAgY29uc3Qgc2NhbGVYID0gMTtcclxuICAgIGNvbnN0IHNjYWxlWSA9IDE7XHJcblxyXG4gICAgY29uc3QgaWRlbnRpdHlNYXRyaXggPSBkcmF3VXRpbHMuaWRlbnRpdHlNYXRyaXgoKTtcclxuICAgIGNvbnN0IHByb2plY3Rpb25NYXRyaXggPSBkcmF3VXRpbHMucHJvamVjdGlvbk1hdHJpeChnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgY29uc3QgdHJhbnNsYXRpb25NYXRyaXggPSBkcmF3VXRpbHMudHJhbnNsYXRpb25NYXRyaXgodHJhbnNsYXRpb25YLCB0cmFuc2xhdGlvblkpO1xyXG4gICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBkcmF3VXRpbHMucm90YXRpb25NYXRyaXgocm90YXRpb25JbkRlZ3JlZXMpO1xyXG4gICAgY29uc3Qgc2NhbGVNYXRyaXggPSBkcmF3VXRpbHMuc2NhbGVNYXRyaXgoc2NhbGVYLCBzY2FsZVkpO1xyXG5cclxuICAgIGxldCBtYXRyaXggPSBkcmF3VXRpbHMubXVsdGlwbHlNYXRyaWNlcyhpZGVudGl0eU1hdHJpeCwgcHJvamVjdGlvbk1hdHJpeCk7XHJcbiAgICBtYXRyaXggPSBkcmF3VXRpbHMubXVsdGlwbHlNYXRyaWNlcyhtYXRyaXgsIHRyYW5zbGF0aW9uTWF0cml4KTtcclxuICAgIG1hdHJpeCA9IGRyYXdVdGlscy5tdWx0aXBseU1hdHJpY2VzKG1hdHJpeCwgcm90YXRpb25NYXRyaXgpO1xyXG4gICAgbWF0cml4ID0gZHJhd1V0aWxzLm11bHRpcGx5TWF0cmljZXMobWF0cml4LCBzY2FsZU1hdHJpeCk7XHJcbiAgICByZXR1cm4gbWF0cml4O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdHlwZTogbnVtYmVyLCBzb3VyY2U6IHN0cmluZyk6IFdlYkdMU2hhZGVyIHtcclxuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcclxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XHJcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgY29uc3Qgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcclxuICAgIGlmIChzdWNjZXNzKSByZXR1cm4gc2hhZGVyO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLCBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXIpOiBXZWJHTFByb2dyYW0gfCBudWxsIHtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICBjb25zdCBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2VzcykgcmV0dXJuIHByb2dyYW07XHJcblxyXG4gICAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcclxufSIsImV4cG9ydCBkZWZhdWx0IFwiYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcXHJcXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXHJcXG51bmlmb3JtIG1hdDMgdV9tYXRyaXg7XFxyXFxudm9pZCBtYWluKCkge1xcclxcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHVfbWF0cml4ICogdmVjMyhhX3Bvc2l0aW9uLCAxKSkueHksIDAsIDEpO1xcclxcbiAgICB2X2NvbG9yID0gZ2xfUG9zaXRpb247XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcclxcbnVuaWZvcm0gbWF0MyB1X21hdHJpeDtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgodV9tYXRyaXggKiB2ZWMzKGFfcG9zaXRpb24sIDEpKS54eSwgMCwgMSk7XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXHJcXG51bmlmb3JtIHZlYzQgdV9jb2xvcjtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XFxyXFxufVwiIiwiaW1wb3J0IHsgY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzLCBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCwgcHJlcGFyZVZpZXcgfSBmcm9tIFwiLi9QbG90VXRpbHNcIjtcclxuaW1wb3J0IHZlcnRleFNoYWRlclN0cmluZyBmcm9tICcuLi9zaGFkZXJzL3ZlcnRleFNoYWRlci5nbHNsJztcclxuaW1wb3J0IGZyYWdtZW50U2hhZGVyU3RyaW5nIGZyb20gJy4uL3NoYWRlcnMvZnJhZ21lbnRTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCBleGFtcGxlVHdvUmVjdGFuZ2xlc1ZTaGFkZXJTdHJpbmcgZnJvbSAnLi4vc2hhZGVycy9leGFtcGxlVHdvUmVjdGFuZ2xlcy92ZXJ0ZXhTaGFkZXIuZ2xzbCc7XHJcbmltcG9ydCBleGFtcGxlVHdvUmVjdGFuZ2xlc0ZTaGFkZXJTdHJpbmcgZnJvbSAnLi4vc2hhZGVycy9leGFtcGxlVHdvUmVjdGFuZ2xlcy9mcmFnbWVudFNoYWRlci5nbHNsJztcclxuaW1wb3J0IGV4YW1wbGVMaW5lc1YgZnJvbSAnLi4vc2hhZGVycy9leGFtcGxlTGluZXMvdmVydGV4U2hhZGVyLmdsc2wnO1xyXG5pbXBvcnQgZXhhbXBsZUxpbmVzRiBmcm9tICcuLi9zaGFkZXJzL2V4YW1wbGVMaW5lcy9mcmFnbWVudFNoYWRlci5nbHNsJztcclxuaW1wb3J0IHsgVGlja0luZm8gfSBmcm9tIFwiLi4vbW9kZWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3IHtcclxuICAgIC8vIEFsZ29yaXRobSBieSAnTWFyayBSYW5zb20nLiBQb3J0ZWQgdG8gSlMgYW5kIG1vZGlmaWVkIGJ5IG1lLlxyXG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzYxNjgxL1xyXG4gICAgZ2V0VGlja0luZm8obGFyZ2VzdDogbnVtYmVyLCBtb3N0VGlja3M6IG51bWJlcik6IFRpY2tJbmZvIHtcclxuICAgICAgICBjb25zdCBtaW5pbXVtID0gbGFyZ2VzdCAvIG1vc3RUaWNrcztcclxuICAgICAgICBjb25zdCBtYWduaXR1ZGUgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihNYXRoLmxvZzEwKG1pbmltdW0pKSk7XHJcbiAgICAgICAgY29uc3QgcmVzaWR1YWwgPSBtaW5pbXVtIC8gbWFnbml0dWRlO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlID0gWzEsIDEuNSwgMiwgMywgNSwgNywgMTBdO1xyXG4gICAgICAgIGNvbnN0IHRpY2sgPSByZXNpZHVhbCA8IDEwID8gdGFibGUuZmluZCgoZSkgPT4gKGUgPiByZXNpZHVhbCkpIDogMTA7XHJcbiAgICAgICAgY29uc3QgdGlja0hlaWdodCA9IHRpY2sgKiBtYWduaXR1ZGU7XHJcbiAgICAgICAgY29uc3QgdGlja0NvdW50ID0gTWF0aC5jZWlsKGxhcmdlc3QgLyB0aWNrSGVpZ2h0KTtcclxuICAgICAgICByZXR1cm4geyB0aWNrSGVpZ2h0LCB0aWNrQ291bnQgfTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TGluZXMoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgc2VyaWVzOiBudW1iZXJbXVtdKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCBleGFtcGxlTGluZXNWLCBleGFtcGxlTGluZXNGKTtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbkFMb2MgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnYV9wb3NpdGlvbicpO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yVUxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9jb2xvcicpO1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeFVMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfbWF0cml4Jyk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4ID0gZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZ2wpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXJpZSA9IHNlcmllc1swXTtcclxuICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heCguLi5zZXJpZS5tYXAoTWF0aC5hYnMpKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGlja0luZm8gPSB0aGlzLmdldFRpY2tJbmZvKG1heCwgOCk7XHJcbiAgICAgICAgY29uc3QgdyA9IGdsLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoID0gZ2wuY2FudmFzLmhlaWdodDtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5mbG9vcihNYXRoLm1pbih3LCBoKSAvIDEwMCk7XHJcbiAgICAgICAgY29uc3QgdW5kZXJMaW5lQXJlYUhlaWdodCA9IChoIC0gMiAqIHBhZGRpbmcpIC8gNztcclxuICAgICAgICBjb25zdCBsaW5lc1BvaW50cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFkZGluZztcclxuICAgICAgICBjb25zdCBlbmQgPSB3IC0gcGFkZGluZztcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aWNrSW5mby50aWNrQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lSCA9IGkgKiB1bmRlckxpbmVBcmVhSGVpZ2h0O1xyXG4gICAgICAgICAgICBsaW5lc1BvaW50cy5wdXNoKHN0YXJ0LCBsaW5lSCwgZW5kLCBsaW5lSCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGxpbmVzUG9pbnRzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhQnVmZmVyKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEludDE2QXJyYXkobGluZXNQb2ludHMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgICAgIHByZXBhcmVWaWV3KGdsKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIGdsLnVuaWZvcm00Zihjb2xvclVMb2MsIDAuNywgMC43LCAwLjcsIDEpO1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobWF0cml4VUxvYywgZmFsc2UsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BTG9jKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkFMb2MsIDIsIGdsLlNIT1JULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5MSU5FUywgMCwgbGluZXNQb2ludHMubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aWNrSW5mby50aWNrQ291bnQgKiB0aWNrSW5mby50aWNrSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdCYXJzKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHNlcmllczogbnVtYmVyW11bXSwgbWF4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCBleGFtcGxlTGluZXNWLCBleGFtcGxlTGluZXNGKTtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbkFMb2MgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnYV9wb3NpdGlvbicpO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yVUxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9jb2xvcicpO1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeFVMb2MgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfbWF0cml4Jyk7XHJcbiAgICAgICAgY29uc3QgbWF0cml4ID0gZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZ2wpO1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gZ2wuY2FudmFzLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IGggPSBnbC5jYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLmZsb29yKE1hdGgubWluKHcsIGgpIC8gMTAwKTsgLy9ucCA2IC0gd3RlZHkgSCA9IDU4OC5cclxuICAgICAgICBjb25zdCBIID0gaCAtIDIgKiBwYWRkaW5nO1xyXG4gICAgICAgIGNvbnN0IFcgPSB3IC0gMiAqIHBhZGRpbmc7XHJcbiAgICAgICAgY29uc3QgbXVsdGlwaWVyID0gSCAvIG1heDtcclxuXHJcbiAgICAgICAgY29uc3QgY29sUG9pbnRzID0gW107XHJcbiAgICAgICAgY29uc3QgQ09MX05VTVMgPSBzZXJpZXNbMF0ubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGNvbEFyZWFXaWR0aCA9IFcgLyBDT0xfTlVNUztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDT0xfTlVNUzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbEhlaWdodCA9IHBhZGRpbmcgKyBzZXJpZXNbMF1baV0gKiBtdWx0aXBpZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50TGVmdFggPSBwYWRkaW5nICsgKGNvbEFyZWFXaWR0aCAqIGkpICsgKGNvbEFyZWFXaWR0aCAvIDUpO1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludExlZnRZID0gcGFkZGluZyArIChjb2xBcmVhV2lkdGggKiAoaSArIDEpKSAtIChjb2xBcmVhV2lkdGggLyA1KTtcclxuICAgICAgICAgICAgY29sUG9pbnRzLnB1c2gocG9pbnRMZWZ0WCwgcGFkZGluZywgcG9pbnRMZWZ0WCwgY29sSGVpZ2h0LCBwb2ludExlZnRZLCBjb2xIZWlnaHQpO1xyXG4gICAgICAgICAgICBjb2xQb2ludHMucHVzaChwb2ludExlZnRYLCBwYWRkaW5nLCBwb2ludExlZnRZLCBwYWRkaW5nLCBwb2ludExlZnRZLCBjb2xIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YUJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhQnVmZmVyKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShjb2xQb2ludHMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcblxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihtYXRyaXhVTG9jLCBmYWxzZSwgbWF0cml4KTtcclxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkFMb2MpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhQnVmZmVyKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENPTF9OVU1TOyBpKyspIHtcclxuICAgICAgICAgICAgZ2wudW5pZm9ybTRmKGNvbG9yVUxvYywgTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgMSk7XHJcbiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BTG9jLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIGkgKiAxMiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCAxMik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICAvLyBJTklUXHJcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cyhnbCwgZXhhbXBsZVR3b1JlY3RhbmdsZXNWU2hhZGVyU3RyaW5nLCBleGFtcGxlVHdvUmVjdGFuZ2xlc0ZTaGFkZXJTdHJpbmcpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfcG9zaXRpb24nKTtcclxuICAgICAgICBjb25zdCBjb2xvclVuaWZvcm1Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9jb2xvcicpO1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeFVuaWZvcm1Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9tYXRyaXgnKTtcclxuICAgICAgICBjb25zdCBtYXRyaXggPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChnbCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGFCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBJbnQxNkFycmF5KFswLCAwLCAwLCA1MCwgNTAsIDUwLCAwLCAwLCA1MCwgMCwgNTAsIDUwXSksIGdsLlNUQVRJQ19EUkFXKTtcclxuXHJcbiAgICAgICAgLy8gUkVOREVSXHJcbiAgICAgICAgcHJlcGFyZVZpZXcoZ2wpO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDNmdihtYXRyaXhVbmlmb3JtTG9jYXRpb24sIGZhbHNlLCBtYXRyaXgpO1xyXG5cclxuICAgICAgICAvLyBSRU5ERVIgLT4gRFJBVyAxXHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbik7XHJcbiAgICAgICAgZ2wudW5pZm9ybTRmKGNvbG9yVW5pZm9ybUxvY2F0aW9uLCAwLjUsIDAuNSwgMC41LCAxKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZGF0YUJ1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uLCAyLCBnbC5TSE9SVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCAzKTtcclxuXHJcbiAgICAgICAgLy8gUkVETkVSIC0+IERSQVcgMlxyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24pO1xyXG4gICAgICAgIGdsLnVuaWZvcm00Zihjb2xvclVuaWZvcm1Mb2NhdGlvbiwgMC4xLCAwLjUsIDAuOSwgMSk7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGRhdGFCdWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiwgMiwgZ2wuU0hPUlQsIGZhbHNlLCAwLCA2ICogSW50MTZBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdGKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCB2ZXJ0ZXhTaGFkZXJTdHJpbmcsIGZyYWdtZW50U2hhZGVyU3RyaW5nKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfcG9zaXRpb24nKTtcclxuICAgICAgICBjb25zdCBtYXRyaXhVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfbWF0cml4JylcclxuXHJcbiAgICAgICAgcHJlcGFyZVZpZXcoZ2wpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NpdGlvbkJ1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5zZXRHZW9tZXRyeShnbCk7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHNpemUgPSAyOyAgICAgICAgICAgICAvLyAyIGNvbXBvbmVudHMgcGVyIGl0ZXJhdGlvblxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBnbC5GTE9BVDsgICAgICAvLyB0eXBlIG9mIGNvbXBvbmVudCAoMzJiaXQgZmxvYXQpXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gZmFsc2U7ICAgIC8vIGRvbid0IG5vcm1hbGl6ZSBkYXRhXHJcbiAgICAgICAgY29uc3Qgc3RyaWRlID0gMCAgICAgICAgICAgIC8vIG1vdmUgc2l6ZSAqIHNpemVvZih0eXBlKSBiaXRzIHRvIGdldCBuZXh0IHBvc2l0aW9uXHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gMCAgICAgICAgICAgIC8vIHN0YXJ0cyBhdCB0aGF0IGJpdFxyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplLCBzdHJpZGUsIG9mZnNldCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IGdldFRyYW5zZm9ybWF0aW9uTWF0cml4KGdsKTtcclxuICAgICAgICBnbC51bmlmb3JtTWF0cml4M2Z2KG1hdHJpeFVuaWZvcm1Mb2NhdGlvbiwgZmFsc2UsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZVR5cGUgPSBnbC5UUklBTkdMRVM7XHJcbiAgICAgICAgY29uc3QgY291bnQgPSAxODtcclxuICAgICAgICBnbC5kcmF3QXJyYXlzKHByaW1pdGl2ZVR5cGUsIG9mZnNldCwgY291bnQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldEdlb21ldHJ5KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKFxyXG4gICAgICAgICAgICBnbC5BUlJBWV9CVUZGRVIsXHJcbiAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgICAgICAgICAgICAgLy8gbGVmdCBjb2x1bW5cclxuICAgICAgICAgICAgICAgIDAsIDAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMCxcclxuICAgICAgICAgICAgICAgIDAsIDE1MCxcclxuICAgICAgICAgICAgICAgIDAsIDE1MCxcclxuICAgICAgICAgICAgICAgIDMwLCAwLFxyXG4gICAgICAgICAgICAgICAgMzAsIDE1MCxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0b3AgcnVuZ1xyXG4gICAgICAgICAgICAgICAgMzAsIDAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMzAsXHJcbiAgICAgICAgICAgICAgICAzMCwgMzAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDAsXHJcbiAgICAgICAgICAgICAgICAxMDAsIDMwLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIG1pZGRsZSBydW5nXHJcbiAgICAgICAgICAgICAgICAzMCwgNjAsXHJcbiAgICAgICAgICAgICAgICA2NywgNjAsXHJcbiAgICAgICAgICAgICAgICAzMCwgOTAsXHJcbiAgICAgICAgICAgICAgICAzMCwgOTAsXHJcbiAgICAgICAgICAgICAgICA2NywgNjAsXHJcbiAgICAgICAgICAgICAgICA2NywgOTAsXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBcImF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247XFxyXFxudW5pZm9ybSB2ZWM0IHVfY29sb3I7XFxyXFxudW5pZm9ybSBtYXQzIHVfbWF0cml4O1xcclxcbnZhcnlpbmcgdmVjNCB2X2NvbG9yO1xcclxcblxcclxcbnZvaWQgbWFpbigpIHtcXHJcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxKTtcXHJcXG4gICAgdl9jb2xvciA9IHVfY29sb3I7XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXHJcXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXHJcXG5cXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZfY29sb3I7XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXHJcXG52YXJ5aW5nIHZlYzQgdl9jb2xvcjtcXHJcXG52b2lkIG1haW4oKSB7XFxyXFxuICAgIGdsX0ZyYWdDb2xvciA9IHZfY29sb3I7XFxyXFxufVwiIiwiaW1wb3J0IHsgQ29udGV4dFNvdXJjZSwgUmVzaXplT2JzZXJ2ZXJFbnRyeVVwZGF0ZWQgfSBmcm9tIFwiLi4vbW9kZWxzXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2hhcnQge1xyXG5cclxuICAgIGNvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuXHJcbiAgICByZXNpemVPYnNlcnZlcjogUmVzaXplT2JzZXJ2ZXI7XHJcblxyXG4gICAgLy8gZXZlcnkgdGltZSBzZXQgdmlld3BvcnQgdG8gdGhvc2UgdmFsdWVzLlxyXG4gICAgZGlzcGxheVdpZHRoOiBudW1iZXI7XHJcbiAgICBkaXNwbGF5SGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBDb250ZXh0U291cmNlKSB7XHJcbiAgICAgICAgbGV0IGFuYWx5emVkRWxlbWVudCA9IHNvdXJjZTtcclxuICAgICAgICBpZiAodHlwZW9mIGFuYWx5emVkRWxlbWVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgYW5hbHl6ZWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5hbHl6ZWRFbGVtZW50LnJlcGxhY2UoJy9eIy8nLCAnJykpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYW5hbHl6ZWRFbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gYW5hbHl6ZWRFbGVtZW50LmdldENvbnRleHQoJ3dlYmdsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFuYWx5emVkRWxlbWVudCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBhbmFseXplZEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhyb3cgRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgdmFsaWQgSUQsIEhUTUxDYW52YXNFbGVtZW50IG9yIFdlYkdMUmVuZGVyaW5nQ29udGV4dCcpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNhbnZhcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXQgWCh2YWx1ZTogc3RyaW5nW10gfCBudW1iZXJbXSk7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0IFkodmFsdWU6IG51bWJlcltdIHwgbnVtYmVyW11bXSk7XHJcbiAgICAvLyBwdWJsaWMgYWJzdHJhY3Qgc2V0IGNvbmZpZ3VyYXRpb24oY29uZmlnOiB1bmtub3duKTtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBkcmF3KCk6IHZvaWQ7XHJcblxyXG4gICAgLypcclxuICAgICAgICBDb250ZW50IHVuZGVyIHRoaXMgbGluZSB3aWxsIHByb2JhYmx5IGJlIGRlbGV0ZWQhXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQ2FudmFzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXM6IFJlc2l6ZU9ic2VydmVyRW50cnlVcGRhdGVkW10pID0+IHRoaXMub25SZXNpemVDYWxsYmFjayhlbnRyaWVzKSk7XHJcbiAgICAgICAgY29uc3QgeyBjYW52YXMgfSA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoY2FudmFzLCB7IGJveDogJ2RldmljZS1waXhlbC1jb250ZW50LWJveCcgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgLy8gZGV2aWNlLXBpeGVsLWNvbnRlbnQtYm94IGlzIG5vdCBzdXBwb3J0ZWQgc28gZmFsbGJhY2sgdG8gdGhpc1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoY2FudmFzLCB7IGJveDogJ2NvbnRlbnQtYm94JyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblJlc2l6ZUNhbGxiYWNrKGVudHJpZXM6IFJlc2l6ZU9ic2VydmVyRW50cnlVcGRhdGVkW10pOiB2b2lkIHtcclxuICAgICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRwciA9IGVudHJ5LmRldmljZVBpeGVsQ29udGVudEJveFNpemUgPyAxIDogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIGNvbnN0IHsgaW5saW5lU2l6ZSwgYmxvY2tTaXplIH06IFJlc2l6ZU9ic2VydmVyU2l6ZSA9IHRoaXMuZ2V0V2lkdGhBbmRIZWlnaHQoZW50cnkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVzaXplIHRvICR7aW5saW5lU2l6ZX0geCAke2Jsb2NrU2l6ZX0sIGRwciAke2Rwcn1gKTtcclxuICAgICAgICAgICAgLy90aGlzLnNldE5ld0NhbnZhc1NpemUoaW5saW5lU2l6ZSwgYmxvY2tTaXplLCBkcHIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0V2lkdGhBbmRIZWlnaHQoZW50cnk6IFJlc2l6ZU9ic2VydmVyRW50cnlVcGRhdGVkKTogUmVzaXplT2JzZXJ2ZXJTaXplIHtcclxuICAgICAgICBpZiAoZW50cnkuZGV2aWNlUGl4ZWxDb250ZW50Qm94U2l6ZSkgcmV0dXJuIGVudHJ5LmRldmljZVBpeGVsQ29udGVudEJveFNpemVbMF07XHJcbiAgICAgICAgaWYgKGVudHJ5LmNvbnRlbnRCb3hTaXplKSByZXR1cm4gZW50cnkuY29udGVudEJveFNpemVbMF07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5saW5lU2l6ZTogZW50cnkuY29udGVudFJlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGJsb2NrU2l6ZTogZW50cnkuY29udGVudFJlY3QuaGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldE5ld0NhbnZhc1NpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGRwcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheVdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCAqIGRwcik7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheUhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogZHByKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlIZWlnaHQgPSBkaXNwbGF5SGVpZ2h0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29sb3IsIENvbnRleHRTb3VyY2UgfSBmcm9tIFwiLi4vbW9kZWxzXCI7XHJcbmltcG9ydCBEcmF3IGZyb20gXCIuLi9wbG90LWxvZ2ljL0RyYXdcIjtcclxuaW1wb3J0IHsgQ2hhcnQgfSBmcm9tIFwiLi9DaGFydFwiO1xyXG5cclxuaW50ZXJmYWNlIENoYXJ0T3B0aW9ucyB7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgc2hvd1RpdGxlOiBib29sZWFuO1xyXG4gICAgc2hvd0xlZ2VuZDogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFNlcmllT3B0aW9ucyB7XHJcbiAgICBzZXJpZU5hbWU6IHN0cmluZztcclxuICAgIGNvbG9yOiBDb2xvcjtcclxuICAgIHNob3dMYWJsZXM6IGJvb2xlYW47XHJcbiAgICBlZGdlVGhpY2tuZXNzOiBudW1iZXI7XHJcbiAgICBzaG93T25MZWdlbmQ6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhckNoYXJ0IGV4dGVuZHMgQ2hhcnQge1xyXG4gICAgb3B0aW9uc0ZvckNoYXJ0OiBDaGFydE9wdGlvbnM7XHJcbiAgICBvcHRpb25zRm9yU2VyaWVzOiBTZXJpZU9wdGlvbnNbXTtcclxuICAgIGxhYmVsczogc3RyaW5nW107XHJcbiAgICB2YWx1ZXM6IG51bWJlcltdW107XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc291cmNlOiBDb250ZXh0U291cmNlKSB7XHJcbiAgICAgICAgc3VwZXIoc291cmNlKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNGb3JDaGFydCA9IHtcclxuICAgICAgICAgICAgdGl0bGU6ICdVbnRpdGxlZCcsXHJcbiAgICAgICAgICAgIHNob3dUaXRsZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2hvd0xlZ2VuZDogZmFsc2UsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNGb3JTZXJpZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFgobGFiZWxzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMubGFiZWxzID0gbGFiZWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWShzZXJpZXM6IG51bWJlcltdW10pIHtcclxuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5sYWJlbHM7XHJcbiAgICAgICAgaWYgKCFsZW5ndGgpXHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWYWx1ZXMgb24gXCJYXCIgYXhpcyBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgc2V0dGluZyBcIllcIiB2YWx1ZXMuJyk7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkU2VyaWVzID0gc2VyaWVzLm1hcChzZXJpZSA9PiB0aGlzLnNsaWNlT3JGaWxsKHNlcmllLCBsZW5ndGgpKTtcclxuICAgICAgICB0aGlzLnZhbHVlcyA9IG1hcHBlZFNlcmllcztcclxuICAgICAgICBsZXQgaSA9IDE7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zRm9yU2VyaWVzID0gdGhpcy52YWx1ZXMubWFwKCgpID0+IHRoaXMuZ2V0RGVmYXVsdFNlcmllT2JqZWN0KGkrKykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgb3B0aW9ucyhvcHRpb25zOiBQYXJ0aWFsPENoYXJ0T3B0aW9ucz4pIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5vcHRpb25zRm9yQ2hhcnQpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHBhaXJbMF07XHJcbiAgICAgICAgICAgIGlmIChrZXlzLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFpclsxXTtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQgXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBObyBpbmRleCBzaWduYXR1cmUgd2l0aCBhIHBhcmFtZXRlciBvZiB0eXBlICdzdHJpbmcnIHdhcyBmb3VuZCBvbiB0eXBlICdDaGFydE9wdGlvbnMnXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNGb3JDaGFydFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRTZXJpZU9iamVjdChpZDogbnVtYmVyKTogU2VyaWVPcHRpb25zIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXJpZU5hbWU6IGBzZXJpZSR7aWR9YCxcclxuICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgIHI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSksXHJcbiAgICAgICAgICAgICAgICBnOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgYjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgIGE6IDI1NVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzaG93TGFibGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgc2hvd09uTGVnZW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgZWRnZVRoaWNrbmVzczogMCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlU2VyaWVPcHRpb25zKG9sZE9wdGlvbnM6IFNlcmllT3B0aW9ucywgbmV3T3B0aW9uczogUGFydGlhbDxTZXJpZU9wdGlvbnM+KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9sZE9wdGlvbnMpO1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG5ld09wdGlvbnMpLmZvckVhY2gocGFpciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHBhaXJbMF07XHJcbiAgICAgICAgICAgIGlmIChrZXlzLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFpclsxXTtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQgXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTZXJpZU9wdGlvbnMob3B0aW9uczogUGFydGlhbDxTZXJpZU9wdGlvbnM+LCB3aGljaFNlcmllcz86IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHdoaWNoU2VyaWVzICYmIHdoaWNoU2VyaWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB3aGljaFNlcmllcy5mb3JFYWNoKHNlcmllTmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxTZXJpZU9wdGlvbnMgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uc0ZvclNlcmllcy5maW5kKChleGlzdGluZ1NlcmllKSA9PiBleGlzdGluZ1NlcmllLnNlcmllTmFtZSA9PT0gc2VyaWVOYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICghYWN0dWFsU2VyaWVPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBTZXJpZSB3aXRoIG5hbWUgJHtzZXJpZU5hbWV9IG5vdCBmb3VuZC5gKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmllT3B0aW9ucyhhY3R1YWxTZXJpZU9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNGb3JTZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHRoaXMudXBkYXRlU2VyaWVPcHRpb25zKHNlcmllLCBvcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMub3B0aW9uc0ZvclNlcmllcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzbGljZU9yRmlsbChhcnJheTogbnVtYmVyW10sIGxlbjogbnVtYmVyLCBmaWxsV2l0aD86IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09PSBsZW4pIHJldHVybiBhcnJheTtcclxuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID4gbGVuKSByZXR1cm4gYXJyYXkuc2xpY2UoMCwgbGVuKTtcclxuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoIDwgbGVuKVxyXG4gICAgICAgICAgICB3aGlsZSAoYXJyYXkubGVuZ3RoICE9PSBsZW4pXHJcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGZpbGxXaXRoID8/IDApO1xyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGNvbmZpZ3VyYXRpb24oY29uZmlnOiB1bmtub3duKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxhYmVscywgdGhpcy52YWx1ZXMpO1xyXG4gICAgICAgIGNvbnN0IGRyYXcgPSBuZXcgRHJhdygpO1xyXG4gICAgICAgIGNvbnN0IGMgPSBkcmF3LmRyYXdMaW5lcyh0aGlzLmNvbnRleHQsIHRoaXMudmFsdWVzKTtcclxuICAgICAgICBkcmF3LmRyYXdCYXJzKHRoaXMuY29udGV4dCwgdGhpcy52YWx1ZXMsIGMpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ2hhcnQgfSBmcm9tIFwiLi9DaGFydFwiO1xyXG5pbXBvcnQgRHJhdyBmcm9tIFwiLi4vcGxvdC1sb2dpYy9EcmF3XCI7XHJcbmltcG9ydCB7IENvbG9yLCBDb250ZXh0U291cmNlIH0gZnJvbSBcIi4uL21vZGVsc1wiO1xyXG5cclxuaW50ZXJmYWNlIEVudHJ5IHtcclxuICAgIGtleTogc3RyaW5nO1xyXG4gICAgdmFsdWU6IG51bWJlcjtcclxuICAgIGNvbG9yPzogQ29sb3I7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDaGFydE9wdGlvbnMge1xyXG4gICAgYm9sZEVkZ2VzOiBib29sZWFuO1xyXG4gICAgc2hvd1ZhbHVlczogYm9vbGVhbjtcclxuICAgIHZhbHVlVHlwZTogJ2ZpeGVkJyB8ICdwcmVjZW50YWdlJztcclxuICAgIHNob3dMZWdlbmQ6IGJvb2xlYW47XHJcbiAgICBsZWdlbmRQbGFlbWVudDogJ3RvcCcgfCAnYm90dG9tJyB8ICdsZWZ0JyB8ICdyaWdodCc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQaWVDaGFydCBleHRlbmRzIENoYXJ0IHtcclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlTWU7XHJcblxyXG4gICAgcHJpdmF0ZSBkYXRhOiBFbnRyeVtdO1xyXG5cclxuICAgIHByaXZhdGUgb3B0aW9uczogQ2hhcnRPcHRpb25zO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogQ29udGV4dFNvdXJjZSkge1xyXG4gICAgICAgIHN1cGVyKHNvdXJjZSk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBib2xkRWRnZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaG93VmFsdWVzOiB0cnVlLFxyXG4gICAgICAgICAgICB2YWx1ZVR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIHNob3dMZWdlbmQ6IHRydWUsXHJcbiAgICAgICAgICAgIGxlZ2VuZFBsYWVtZW50OiAnYm90dG9tJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLmRlbGV0ZU1lID0gbmV3IERyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5maWxsV2l0aEV4YW1wbGVEYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTm8gZGF0YSBmb3IgY2hhcnQgc2V0LiBEcmF3aW5nIHdpdGggZXhhbXBsZSBkYXRhLicpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmlsbFdpdGhFeGFtcGxlRGF0YSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBBcnJheSg1KS5tYXAoKGUsIGkpID0+ICh7XHJcbiAgICAgICAgICAgIGtleTogYGVsZW1lbnQke2l9YCxcclxuICAgICAgICAgICAgdmFsdWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSxcclxuICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgIHI6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NiksXHJcbiAgICAgICAgICAgICAgICBnOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpLFxyXG4gICAgICAgICAgICAgICAgYjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KSxcclxuICAgICAgICAgICAgICAgIGE6IDI1NVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWCh2YWx1ZXM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5tYXBBcnJheVRvRW50cmllcyh2YWx1ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgWSh2YWx1ZXM6IG51bWJlcltdKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEpIHRocm93IEVycm9yKCdWYWx1ZXMgb24gXCJYXCIgYXhpcyBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgc2V0dGluZyBcIllcIiB2YWx1ZXMuJylcclxuICAgICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCAhPT0gdmFsdWVzLmxlbmd0aCkgdGhyb3cgRXJyb3IoJ1Bhc3NlZCBhcnJheSBkaWZmZXJzIGluIGxlbmd0aCBmcm9tIHZhbHVlcyBvbiBcIlhcIiBheGlzIGNvdW50LicpXHJcbiAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goKGVudHJ5LCBpbmRleCkgPT4gZW50cnkudmFsdWUgPSB2YWx1ZXNbaW5kZXhdKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgY29uZmlndXJhdGlvbihjb25maWc6IFBhcnRpYWw8Q2hhcnRPcHRpb25zPikge1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbmZpZykuZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIHsgW3BhaXJbMF1dOiBwYWlyWzFdIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBjb2xvcnMoY29sb3JzOiBDb2xvcltdKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEpIHRocm93IEVycm9yKCdWYWx1ZXMgb24gXCJYXCIgYXhpcyBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgc2V0dGluZyBcImNvbG9yXCIgdmFsdWVzLicpXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggIT09IGNvbG9ycy5sZW5ndGgpIHRocm93IEVycm9yKCdQYXNzZWQgYXJyYXkgZGlmZmVycyBpbiBsZW5ndGggZnJvbSB2YWx1ZXMgb24gXCJYXCIgYXhpcyBjb3VudC4nKVxyXG4gICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IGVudHJ5LmNvbG9yID0gY29sb3JzW2luZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFNlcmllQ29sb3Ioc2VyaWU6IHN0cmluZywgY29sb3I6IENvbG9yKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmRhdGEuZmluZChlbnRyeSA9PiBlbnRyeS5rZXkgPT09IHNlcmllKTtcclxuICAgICAgICBpZiAoZW50cnkgPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoYFNlcmllIHdpdGggbmFtZSAke3NlcmllfSBkb2VzbnQgZXhpc3QuYCk7XHJcbiAgICAgICAgZW50cnkuY29sb3IgPSBjb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1hcEFycmF5VG9FbnRyaWVzKGFycmF5OiBzdHJpbmdbXSk6IEVudHJ5W10ge1xyXG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKGtleSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRleHRTb3VyY2UgfSBmcm9tIFwiLi4vbW9kZWxzXCI7XHJcbmltcG9ydCB7IEJhckNoYXJ0IH0gZnJvbSBcIi4vQmFyQ2hhcnRcIjtcclxuaW1wb3J0IHsgQ2hhcnQgfSBmcm9tIFwiLi9DaGFydFwiO1xyXG5pbXBvcnQgeyBQaWVDaGFydCB9IGZyb20gXCIuL1BpZUNoYXJ0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXJ2ZUNoYXJ0KHR5cGU6IHN0cmluZywgc291cmNlOiBDb250ZXh0U291cmNlKTogQ2hhcnQge1xyXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkudHJpbSgpKSB7XHJcbiAgICAgICAgY2FzZSBcInBpZVwiOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBpZUNoYXJ0KHNvdXJjZSk7XHJcbiAgICAgICAgY2FzZSBcImJhclwiOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJhckNoYXJ0KHNvdXJjZSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3R5cGV9IGNoYXJ0IGlzIG5vdCBkZWZpbmVkLmApO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiTWF0aFV0aWxzIiwiaWRlbnRpdHlNYXRyaXgiLCJwcm9qZWN0aW9uTWF0cml4Iiwid2lkdGgiLCJoZWlnaHQiLCJ0cmFuc2xhdGlvbk1hdHJpeCIsInR4IiwidHkiLCJyb3RhdGlvbk1hdHJpeCIsImRlZ3JlZXMiLCJyYWRpYW5zIiwiTWF0aCIsIlBJIiwicyIsInNpbiIsImMiLCJjb3MiLCJzY2FsZU1hdHJpeCIsInN4Iiwic3kiLCJhcnJheVRvTWF0cml4IiwiYXJyIiwic2l6ZSIsInJlcyIsImkiLCJsZW5ndGgiLCJwdXNoIiwic2xpY2UiLCJtdWx0aXBseU1hdHJpY2VzIiwiRiIsIlMiLCJpbmNsdWRlcyIsInBvdyIsInNxcnQiLCJBIiwidGhpcyIsIkIiLCJtYXAiLCJyb3ciLCJfIiwiaiIsInJlZHVjZSIsImFjYyIsIm4iLCJmbGF0IiwiY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzIiwiZ2wiLCJ2cyIsImZzIiwicHJvZ3JhbSIsInZlcnRleFNoYWRlciIsImZyYWdtZW50U2hhZGVyIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiY29uc29sZSIsImxvZyIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJwcmVwYXJlVmlldyIsInZpZXdwb3J0IiwiY2FudmFzIiwiY2xlYXJDb2xvciIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsImdldFRyYW5zZm9ybWF0aW9uTWF0cml4IiwiZHJhd1V0aWxzIiwibWF0cml4IiwidHlwZSIsInNvdXJjZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJEcmF3IiwiZ2V0VGlja0luZm8iLCJsYXJnZXN0IiwibW9zdFRpY2tzIiwibWluaW11bSIsIm1hZ25pdHVkZSIsImZsb29yIiwibG9nMTAiLCJyZXNpZHVhbCIsInRpY2tIZWlnaHQiLCJmaW5kIiwiZSIsInRpY2tDb3VudCIsImNlaWwiLCJkcmF3TGluZXMiLCJzZXJpZXMiLCJwb3NpdGlvbkFMb2MiLCJnZXRBdHRyaWJMb2NhdGlvbiIsImNvbG9yVUxvYyIsImdldFVuaWZvcm1Mb2NhdGlvbiIsIm1hdHJpeFVMb2MiLCJzZXJpZSIsIm1heCIsImFicyIsInRpY2tJbmZvIiwidyIsImgiLCJwYWRkaW5nIiwibWluIiwidW5kZXJMaW5lQXJlYUhlaWdodCIsImxpbmVzUG9pbnRzIiwic3RhcnQiLCJlbmQiLCJsaW5lSCIsImRhdGFCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkludDE2QXJyYXkiLCJTVEFUSUNfRFJBVyIsInVzZVByb2dyYW0iLCJ1bmlmb3JtNGYiLCJ1bmlmb3JtTWF0cml4M2Z2IiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiU0hPUlQiLCJkcmF3QXJyYXlzIiwiTElORVMiLCJkcmF3QmFycyIsIlciLCJtdWx0aXBpZXIiLCJjb2xQb2ludHMiLCJDT0xfTlVNUyIsImNvbEFyZWFXaWR0aCIsImNvbEhlaWdodCIsInBvaW50TGVmdFgiLCJwb2ludExlZnRZIiwiRmxvYXQzMkFycmF5IiwicmFuZG9tIiwiRkxPQVQiLCJCWVRFU19QRVJfRUxFTUVOVCIsIlRSSUFOR0xFUyIsImRyYXdSZWN0IiwicG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiIsImNvbG9yVW5pZm9ybUxvY2F0aW9uIiwibWF0cml4VW5pZm9ybUxvY2F0aW9uIiwiZHJhd0YiLCJwb3NpdGlvbkJ1ZmZlciIsInNldEdlb21ldHJ5IiwicHJpbWl0aXZlVHlwZSIsIkNoYXJ0IiwiY29uc3RydWN0b3IiLCJhbmFseXplZEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVwbGFjZSIsIkhUTUxDYW52YXNFbGVtZW50IiwiY29udGV4dCIsImdldENvbnRleHQiLCJXZWJHTFJlbmRlcmluZ0NvbnRleHQiLCJFcnJvciIsImluaXRpYWxpemVDYW52YXMiLCJyZXNpemVPYnNlcnZlciIsIlJlc2l6ZU9ic2VydmVyIiwiZW50cmllcyIsIm9uUmVzaXplQ2FsbGJhY2siLCJvYnNlcnZlIiwiYm94IiwiZXgiLCJmb3JFYWNoIiwiZW50cnkiLCJkcHIiLCJkZXZpY2VQaXhlbENvbnRlbnRCb3hTaXplIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsImlubGluZVNpemUiLCJibG9ja1NpemUiLCJnZXRXaWR0aEFuZEhlaWdodCIsImNvbnRlbnRCb3hTaXplIiwiY29udGVudFJlY3QiLCJzZXROZXdDYW52YXNTaXplIiwiZGlzcGxheVdpZHRoIiwicm91bmQiLCJkaXNwbGF5SGVpZ2h0IiwiQmFyQ2hhcnQiLCJzdXBlciIsIm9wdGlvbnNGb3JDaGFydCIsInRpdGxlIiwic2hvd1RpdGxlIiwic2hvd0xlZ2VuZCIsIm9wdGlvbnNGb3JTZXJpZXMiLCJYIiwibGFiZWxzIiwiWSIsIm1hcHBlZFNlcmllcyIsInNsaWNlT3JGaWxsIiwidmFsdWVzIiwiZ2V0RGVmYXVsdFNlcmllT2JqZWN0Iiwib3B0aW9ucyIsImtleXMiLCJwYWlyIiwidmFsdWUiLCJpZCIsInNlcmllTmFtZSIsImNvbG9yIiwiciIsImciLCJiIiwiYSIsInNob3dMYWJsZXMiLCJzaG93T25MZWdlbmQiLCJlZGdlVGhpY2tuZXNzIiwidXBkYXRlU2VyaWVPcHRpb25zIiwib2xkT3B0aW9ucyIsIm5ld09wdGlvbnMiLCJzZXRTZXJpZU9wdGlvbnMiLCJ3aGljaFNlcmllcyIsImFjdHVhbFNlcmllT3B0aW9ucyIsImV4aXN0aW5nU2VyaWUiLCJ3YXJuIiwiYXJyYXkiLCJsZW4iLCJmaWxsV2l0aCIsImNvbmZpZ3VyYXRpb24iLCJjb25maWciLCJkcmF3IiwiUGllQ2hhcnQiLCJib2xkRWRnZXMiLCJzaG93VmFsdWVzIiwidmFsdWVUeXBlIiwibGVnZW5kUGxhZW1lbnQiLCJkYXRhIiwiZGVsZXRlTWUiLCJmaWxsV2l0aEV4YW1wbGVEYXRhIiwiQXJyYXkiLCJtYXBBcnJheVRvRW50cmllcyIsImluZGV4IiwiYXNzaWduIiwiY29sb3JzIiwic2V0U2VyaWVDb2xvciIsInVuZGVmaW5lZCIsInNlcnZlQ2hhcnQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9